(function p(c,e,t){function r(i,o){if(!e[i]){if(!c[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var d=e[i]={exports:{}};c[i][0].call(d.exports,function(t){var e=c[i][1][t];return r(e?e:t)},d,d.exports,p,c,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,a=0;a<t.length;a++)r(t[a]);return r})({1:[function(e,t){var o=Math.min,r=Math.pow;t.exports=(e)=>{const t={FL_GROUPS:"#3F7F91",FL_EVENTS:"#88BA5C",FL_NEWS:"#823256",FL_ARTICLES:"#FFB310",FL_PLACES:"#FE4336"},a="#dcdcdc",n=1,s=(e,t)=>{let o=e<t?3:1.4,a=-1*r(e-t,2),i=2*r(o,2),n=Math.floor(6*Math.exp(a/i));return n},l=(e)=>{let o=e.properties.entity_type,r=t[o];return{opacity:1,fill:!0,fillOpacity:0.8,weight:0,color:r,fillColor:r}};let i=null;const p=(e)=>i&&e.area_id!==i?{radius:1,color:a,fillColor:a,up:!1}:{up:!0},c=L.geoJsonGridLayer("https://api.fldev.di.unito.it/v5/fl/Things/tilesearch?domainId=1,4,9,10,11,12,13,14,15&limit=99999&tiles={x}:{y}:{z}",{layers:{things:{pointToLayer:function(t,r){let a=e.getZoom(),i=s(a,t.properties.zoom_level),p=o(i,n),c=Object.assign({interactive:!1},l(t),{weight:p,radius:i});return L.circleMarker(r,c)}}}});return c.update=()=>{let t=c.getLayers()[0],r=t[`_layers`],a=e.getZoom();for(let e in r){let t=r[e],i=t.feature.properties.zoom_level,c=s(a,i),d=o(c,n);t.setRadius(c);let u=Object.assign({},l(t.feature),{weight:d},p(t.feature));t.setStyle(u),u.up?t.bringToFront():t.bringToBack()}},c.setStyle=(e=null)=>{i=e,c.update()},c.resetStyle=()=>{i=null,c.update()},c}},{}],2:[function(e,t){t.exports=()=>{const e="#ff7800",t=L.geoJson([],{style:{color:e,weight:2,fill:!1,fillColor:e,opacity:1,fillOpacity:0.5},pane:"focusPane"});return t.setLayer=(e)=>{t.clearLayers(),t.addData(e)},t}},{}],3:[function(e){(function(){e("leaflet"),e("../libs/Leaflet.VectorGrid"),e("../libs/leaflet-geojson-gridlayer");const t=e("@turf/within"),o=e("@turf/helpers"),r=e("./status"),a=r(),i=e("./map"),n=i(),s=e("./datasource.js"),l=s(n),p=e("./interactive.js"),c=p(),d=e("./focus"),u=d(),b=e("./utils"),m=b();let y=!1;const _=["en","it"],f=navigator.language||navigator.userLanguage;let g=_[0];for(let e=0,t;e<_.length;e++)t=_[e],-1<f.search(t)&&(g=t);let h=new Date;const v=window.navigator.userAgent,x=v.indexOf("MSIE ");if(params=0<x?escape(location.search):new URL(location).searchParams,params){if(params.get("c")){params.get("c")}y="true"===params.get("contrast"),g=params.get("lang")?params.get("lang"):g,h=params.get("date")?params.get("date"):h}else console.error("cannot retrieve search params from URL location");const S={base:L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{maxZoom:20,attribution:"<a href=\"http://openstreetmap.org\" target=\"_blank\">OpenStreetMap</a> contributors | <a href=\"http://mapbox.com\" target=\"_blank\">Mapbox</a>"}),contrast:L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",{maxZoom:20,attribution:"<a href=\"http://openstreetmap.org\" target=\"_blank\">OpenStreetMap</a> contributors | <a href=\"http://mapbox.com\" target=\"_blank\">Mapbox</a>"})};S[y?"contrast":"base"].addTo(n),a.move(n.getBounds()),c.addTo(n),l.addTo(n),u.addTo(n),a.observe.filter((e)=>"bounds"in e).map((e)=>e.bounds).subscribe((e)=>{n.fitBounds(e)}),a.observe.filter((e)=>"id"in e).map((e)=>e.id).subscribe((e)=>c.highlight(e)),a.observe.filter((e)=>"id"in e).map((e)=>e.id).subscribe((e)=>l.setStyle(e)),a.observe.filter((e)=>"features"in e).map((e)=>e.features).subscribe((e)=>u.setLayer(e)),a.observe.filter((e)=>"reset"in e).subscribe(()=>{l.resetStyle(),c.resetStyle(),u.clearLayers()}),c.on("click",(r)=>{if(!r.originalEvent.defaultPrevented){r.originalEvent.preventDefault(),console.debug("click event at",r.latlng);let e=a.getFocus();if(e){let i=o.point([r.latlng.lng,r.latlng.lat]),n={type:"FeatureCollection",features:e.features};console.debug("within?",i,n);let s=t(o.featureCollection([i]),n);console.debug("within?",s),1>s.features.length?a.restore():a.focus(r.layer.properties)}else a.focus(r.layer.properties)}}),n.on("moveend",()=>{a.move(n.getBounds())}),n.on("zoomend",()=>{l.update()})})()},{"../libs/Leaflet.VectorGrid":8,"../libs/leaflet-geojson-gridlayer":9,"./datasource.js":1,"./focus":2,"./interactive.js":4,"./map":5,"./status":6,"./utils":7,"@turf/helpers":10,"@turf/within":13,leaflet:14}],4:[function(e,t){t.exports=()=>{const e="#ff7800",t={color:"transparent",weight:0,fillColor:"transparent"},o={color:e,weight:2,fill:!1,fillColor:e,opacity:1,fillOpacity:0.5},r=function(){return{fill:!1,weight:0}},a={nazioni:r,regioni:r,provincie:r,comuni:r,circoscrizioni:r,quartieri:r,city_block:r,site:r,building:r,landusages:r,roads:r,waterareas:r,waterways:r,indoor:r,interactive:r};L.Path.mergeOptions(t),L.Polyline.mergeOptions(t),L.Polygon.mergeOptions(t),L.Rectangle.mergeOptions(t),L.Circle.mergeOptions(t),L.CircleMarker.mergeOptions(t),a.buildings=a.building,a.boundaries=a.boundary,a.places=a.place,a.pois=a.poi,a.roads=a.road;const i={rendererFactory:L.svg.tile,attribution:!1,vectorTileLayerStyles:a,interactive:!0,pane:"vectorGridPane",getFeatureId:function(t){return t.properties.id},layersOrdering:function(e,t){switch(t){case 1:case 2:return["nazioni","waterareas","waterways"];break;case 3:case 4:return["nazioni","regioni","provincie","waterareas","waterways"];break;case 5:case 6:return["nazioni","regioni","provincie","landusages","roads","waterareas","waterways"];break;case 7:case 8:return["nazioni","regioni","provincie","landusages","roads","waterareas","waterways","comuni"];break;case 9:case 10:return["nazioni","regioni","provincie","landusages","roads","waterareas","waterways","comuni"];break;case 11:case 12:return["provincie","landusages","roads","waterareas","waterways","comuni"];break;case 13:case 14:return["provincie","quartieri","landusages","comuni"];break;case 15:case 16:return["comuni","city_block","landusages","waterareas","waterways","quartieri"];break;case 17:case 18:return["site","landusages","building","roads","waterareas","waterways","quartieri","city_block"];break;case 19:case 20:return["site","building","roads","waterareas","waterways","indoor"];break;default:return Object.keys(e);}}},n=L.vectorGrid.protobuf("https://tiles.fldev.di.unito.it/tile/{z}/{x}/{y}",i);let s=null;return n.highlight=(e=null)=>{s&&n.resetFeatureStyle(s),e&&(s=e,n.setFeatureStyle(e,o))},n.resetStyle=()=>{s&&(n.resetFeatureStyle(s),s=null)},n}},{}],5:[function(e,t){t.exports=()=>{const e=L.map("areaViewer").setView([45.070312,7.686856],14);return e.createPane("vectorGridPane"),e.createPane("focusPane"),e.getPane("overlayPane").style.zIndex=10,e.getPane("vectorGridPane").style.zIndex=11,e.getPane("focusPane").style.zIndex=12,e}},{}],6:[function(e,t){function o(e){return(t)=>{"focus"===current?0<store.focus.features.lenght&&JSON.stringify(store.focus.features).find(t.id)&&r(t,e):r(t,e)}}function r(e,t){current="focus",store.focus.id=e.id;let o=null;if(e.bbox){let t=JSON.parse(e.bbox);o=L.latLngBounds(L.latLng(t[1],t[0]),L.latLng(t[3],t[2]))}store.focus.bounds=o,utils.getFeature(e.id).then((e)=>{store.focus.features=Array.isArray(e)?e:"FeatureCollection"===e.type?e.features:"Feature"===e.type?[e]:[],t.next(store.focus)},(e)=>{console.error("getFeature",e)})}t.exports=(t={})=>{const r=e("rxjs/Rx"),a=e("./utils"),i=a(),n={focus:{id:null,bounds:null,features:[]},explorer:{bounds:null,reset:!0}};let s="explorer";const l={focus:null,move:null,restore:null,observe:null};return l.observe=r.Observable.create(function(e){l.focus=o(e),l.move=(e)=>{switch(s){case"focus":break;default:n.explorer.bounds=e;}},l.restore=()=>{s="explorer",e.next(n.explorer)}}).share(),l.observe.subscribe(),l.getFocus=()=>"focus"==s?n.focus:null,l}},{"./utils":7,"rxjs/Rx":23}],7:[function(e,t){t.exports=()=>{return{hideStyle:function(e){return(t)=>t.area_id&&t.area_id===e?{up:!0}:{weight:0,fillColor:"gray",radius:1,up:!1}},getFeature:function(e){return new Promise((t,o)=>{let r=new XMLHttpRequest,a="https://tiles.fldev.di.unito.it/areas/".concat(e);r.open("GET",a),r.onload=()=>{200<=r.status&&300>r.status?t(JSON.parse(r.response)):o(r.statusText)},r.onerror=()=>o(r.statusText),r.send()})}}}},{}],8:[function(){var e=Math.PI,t=Math.round,o=Math.sqrt,r=Math.LN2,a=Math.log,n=Math.floor,l=Math.pow;(function(){"use strict";function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function s(e,t,o){var r=o.buf,a,i;if(i=r[o.pos++],a=(112&i)>>4,128>i)return c(e,a,t);if(i=r[o.pos++],a|=(127&i)<<3,128>i)return c(e,a,t);if(i=r[o.pos++],a|=(127&i)<<10,128>i)return c(e,a,t);if(i=r[o.pos++],a|=(127&i)<<17,128>i)return c(e,a,t);if(i=r[o.pos++],a|=(127&i)<<24,128>i)return c(e,a,t);if(i=r[o.pos++],a|=(1&i)<<31,128>i)return c(e,a,t);throw new Error("Expected varint not more than 10 bytes")}function p(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function c(e,t,o){return o?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function d(e,t){var o,r;if(0<=e?(o=0|e%4294967296,r=0|e/4294967296):(o=~(-e%4294967296),r=~(-e/4294967296),4294967295^o?o=0|o+1:(o=0,r=0|r+1)),0x10000000000000000<=e||-0x10000000000000000>e)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),u(o,r,t),b(r,t)}function u(e,t,o){o.buf[o.pos++]=128|127&e,e>>>=7,o.buf[o.pos++]=128|127&e,e>>>=7,o.buf[o.pos++]=128|127&e,e>>>=7,o.buf[o.pos++]=128|127&e,e>>>=7,o.buf[o.pos]=127&e}function b(e,t){var o=(7&e)<<4;(t.buf[t.pos++]|=o|((e>>>=3)?128:0),!!e)&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!!e)&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!!e)&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!!e)&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e))}function m(e,t,o){var n=16383>=t?1:2097151>=t?2:268435455>=t?3:Math.ceil(a(t)/(7*r));o.realloc(n);for(var s=o.pos-1;s>=e;s--)o.buf[s+n]=o.buf[s]}function y(e,t){for(var o=0;o<e.length;o++)t.writeVarint(e[o])}function _(e,t){for(var o=0;o<e.length;o++)t.writeSVarint(e[o])}function f(e,t){for(var o=0;o<e.length;o++)t.writeFloat(e[o])}function g(e,t){for(var o=0;o<e.length;o++)t.writeDouble(e[o])}function h(e,t){for(var o=0;o<e.length;o++)t.writeBoolean(e[o])}function v(e,t){for(var o=0;o<e.length;o++)t.writeFixed32(e[o])}function x(e,t){for(var o=0;o<e.length;o++)t.writeSFixed32(e[o])}function S(e,t){for(var o=0;o<e.length;o++)t.writeFixed64(e[o])}function O(e,t){for(var o=0;o<e.length;o++)t.writeSFixed64(e[o])}// Buffer code below from https://github.com/feross/buffer, MIT-licensed
function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function T(e,t,o){e[o]=t,e[o+1]=t>>>8,e[o+2]=t>>>16,e[o+3]=t>>>24}function P(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function C(e,t,o){for(var r="",a=t;a<o;){var i=e[a],n=null,s=239<i?4:223<i?3:191<i?2:1;if(a+s>o)break;var l,p,c;1==s?128>i&&(n=i):2==s?(l=e[a+1],128==(192&l)&&(n=(31&i)<<6|63&l,127>=n&&(n=null))):3==s?(l=e[a+1],p=e[a+2],128==(192&l)&&128==(192&p)&&(n=(15&i)<<12|(63&l)<<6|63&p,(2047>=n||55296<=n&&57343>=n)&&(n=null))):4==s&&(l=e[a+1],p=e[a+2],c=e[a+3],128==(192&l)&&128==(192&p)&&128==(192&c)&&(n=(15&i)<<18|(63&l)<<12|(63&p)<<6|63&c,(65535>=n||1114112<=n)&&(n=null))),null===n?(n=65533,s=1):65535<n&&(n-=65536,r+=N(55296|1023&n>>>10),n=56320|1023&n),r+=N(n),a+=s}return r}function E(e,t,o){for(var r=0,a,i;r<t.length;r++){if(a=t.charCodeAt(r),!(55295<a&&57344>a))i&&(e[o++]=239,e[o++]=191,e[o++]=189,i=null);else if(!i){56319<a||r+1===t.length?(e[o++]=239,e[o++]=191,e[o++]=189):i=a;continue}else if(56320>a){e[o++]=239,e[o++]=191,e[o++]=189,i=a;continue}else a=65536|(i-55296<<10|a-56320),i=null;128>a?e[o++]=a:(2048>a?e[o++]=192|a>>6:(65536>a?e[o++]=224|a>>12:(e[o++]=240|a>>18,e[o++]=128|63&a>>12),e[o++]=128|63&a>>6),e[o++]=128|63&a)}return o}function k(e,t){this.x=e,this.y=t}function A(e,t,o,r,a){this.properties={},this.extent=o,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(j,this,t)}function j(e,t,o){1==e?t.id=o.readVarint():2==e?D(o,t):3==e?t.type=o.readVarint():4==e&&(t._geometry=o.pos)}function D(e,t){for(var o=e.readVarint()+e.pos;e.pos<o;){var r=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[r]=a}}function z(e){var t=e.length;if(1>=t)return[e];for(var o=[],r=0,a,i,n;r<t;r++)(n=B(e[r]),0!==n)&&(void 0==i&&(i=0>n),i===0>n?(a&&o.push(a),a=[e[r]]):a.push(e[r]));return a&&o.push(a),o}function B(e){for(var t=0,o=0,r=e.length,a=r-1,i,n;o<r;a=o++)i=e[o],n=e[a],t+=(n.x-i.x)*(i.y+n.y);return t}function I(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(R,this,t),this.length=this._features.length}function R(e,t,o){15===e?t.version=o.readVarint():1===e?t.name=o.readString():5===e?t.extent=o.readVarint():2===e?t._features.push(o.pos):3===e?t._keys.push(o.readString()):4===e&&t._values.push(M(o))}function M(e){for(var t=null,o=e.readVarint()+e.pos;e.pos<o;){var r=e.readVarint()>>3;t=1==r?e.readString():2==r?e.readFloat():3==r?e.readDouble():4==r?e.readVarint64():5==r?e.readVarint():6==r?e.readSVarint():7==r?e.readBoolean():null}return t}function F(e,t,o){if(3===e){var r=new q(o,o.readVarint()+o.pos);r.length&&(t[r.name]=r)}}var U=Math.atan2,N=String.fromCharCode;(function(e){function t(e){if("string"!=typeof e&&(e+=""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e+=""),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return f.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function n(e){return new Promise(function(t,o){e.onload=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function s(e){var t=new FileReader,o=n(t);return t.readAsArrayBuffer(e),o}function l(e){var t=new FileReader,o=n(t);return t.readAsText(e),o}function p(e){for(var t=new Uint8Array(e),o=Array(t.length),r=0;r<t.length;r++)o[r]=N(t[r]);return o.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,!e)this._bodyText="";else if("string"==typeof e)this._bodyText=e;else if(f.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(f.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(f.arrayBuffer&&f.blob&&h(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||v(e)))this._bodyArrayBuffer=c(e);else throw new Error("unsupported BodyInit type");this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");else return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");else return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return-1<x.indexOf(t)?t:e}function b(e,t){t=t||{};var o=t.body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e+"";if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new a(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var o=e.split("="),r=o.shift().replace(/\+/g," "),a=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function y(e){var t=new a;return e.split(/\r?\n/).forEach(function(e){var o=e.split(":"),r=o.shift().trim();if(r){var a=o.join(":").trim();t.append(r,a)}}),t}function _(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=200<=this.status&&300>this.status,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var f={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(f.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&-1<g.indexOf(Object.prototype.toString.call(e))};a.prototype.append=function(e,r){e=t(e),r=o(r);var a=this.map[e];this.map[e]=a?a+","+r:r},a.prototype["delete"]=function(e){delete this.map[t(e)]},a.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},a.prototype.set=function(e,r){this.map[t(e)]=o(r)},a.prototype.forEach=function(e,t){var o=this;for(var r in this.map)o.map.hasOwnProperty(r)&&e.call(t,o.map[r],r,o)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,o){e.push(o)}),r(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,o){e.push([o,t])}),r(e)},f.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},d.call(b.prototype),d.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];_.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=b,e.Response=_,e.fetch=function(e,t){return new Promise(function(o,r){var a=new b(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;o(new _(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(a.method,a.url,!0),"include"===a.credentials&&(i.withCredentials=!0),"responseType"in i&&f.blob&&(i.responseType="blob"),a.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}})("undefined"==typeof self?void 0:self);var V={read:function(t,o,r,a,n){var p=8*n-a-1,c=(1<<p)-1,u=c>>1,b=-7,y=r?n-1:0,i=r?-1:1,d=t[o+y],s,e;for(y+=i,s=d&(1<<-b)-1,d>>=-b,b+=p;0<b;s=256*s+t[o+y],y+=i,b-=8);for(e=s&(1<<-b)-1,s>>=-b,b+=a;0<b;e=256*e+t[o+y],y+=i,b-=8);if(0===s)s=1-u;else{if(s===c)return e?NaN:(d?-1:1)*Infinity;e+=l(2,a),s-=u}return(d?-1:1)*e*l(2,s-a)},write:function(t,o,p,u,b,y){var _=8*y-b-1,f=(1<<_)-1,g=f>>1,h=23===b?5.960464477539063e-8-6.617444900424222e-24:0,v=u?0:y-1,i=u?1:-1,d=0>o||0===o&&0>1/o?1:0,s,x,m;for(o=Math.abs(o),isNaN(o)||o===Infinity?(x=isNaN(o)?1:0,s=f):(s=n(a(o)/r),1>o*(m=l(2,-s))&&(s--,m*=2),o+=1<=s+g?h/m:h*l(2,1-g),2<=o*m&&(s++,m/=2),s+g>=f?(x=0,s=f):1<=s+g?(x=(o*m-1)*l(2,b),s+=g):(x=o*l(2,g-1)*l(2,b),s=0));8<=b;t[p+v]=255&x,v+=i,x/=256,b-=8);for(s=s<<b|x,_+=b;0<_;t[p+v]=255&s,v+=i,s/=256,_-=8);t[p+v-i]|=128*d}};i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var Z=4294967296,W=1/Z;i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,o){var r=this;for(o=o||this.length;this.pos<o;){var a=r.readVarint(),i=r.pos;r.type=7&a,e(a>>3,t,r),r.pos===i&&r.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=P(this.buf,this.pos);return this.pos+=4,e},// 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)
readFixed64:function(){var e=w(this.buf,this.pos)+w(this.buf,this.pos+4)*Z;return this.pos+=8,e},readSFixed64:function(){var e=w(this.buf,this.pos)+P(this.buf,this.pos+4)*Z;return this.pos+=8,e},readFloat:function(){var e=V.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=V.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,o,r;return(r=t[this.pos++],o=127&r,128>r)?o:(r=t[this.pos++],o|=(127&r)<<7,128>r)?o:(r=t[this.pos++],o|=(127&r)<<14,128>r)?o:(r=t[this.pos++],o|=(127&r)<<21,128>r)?o:(r=t[this.pos],o|=(15&r)<<28,s(o,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return 1==e%2?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=C(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var o=this,r=p(this);for(e=e||[];this.pos<r;)e.push(o.readVarint(t));return e},readPackedSVarint:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readSVarint());return e},readPackedBoolean:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readBoolean());return e},readPackedFloat:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readFloat());return e},readPackedDouble:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readDouble());return e},readPackedFixed32:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readFixed32());return e},readPackedSFixed32:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readSFixed32());return e},readPackedFixed64:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readFixed64());return e},readPackedSFixed64:function(e){var t=this,o=p(this);for(e=e||[];this.pos<o;)e.push(t.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;127<this.buf[this.pos++];);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else if(t===i.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),T(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),T(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),T(this.buf,-1&e,this.pos),T(this.buf,n(e*W),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),T(this.buf,-1&e,this.pos),T(this.buf,n(e*W),this.pos+4),this.pos+=8},writeVarint:function(e){return(e=+e||0,268435455<e||0>e)?void d(e,this):void((this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),!(127>=e))&&(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),!(127>=e))&&(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),127>=e||(this.buf[this.pos++]=127&e>>>7)))},writeSVarint:function(e){this.writeVarint(0>e?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=e+"",this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=E(this.buf,e,this.pos);var o=this.pos-t;128<=o&&m(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(e){this.realloc(4),V.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),V.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=this,o=e.length;this.writeVarint(o),this.realloc(o);for(var r=0;r<o;r++)t.buf[t.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var o=this.pos;e(t,this);var r=this.pos-o;128<=r&&m(o,r,this),this.pos=o-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,o){this.writeTag(e,i.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(e,t){this.writeMessage(e,y,t)},writePackedSVarint:function(e,t){this.writeMessage(e,_,t)},writePackedBoolean:function(e,t){this.writeMessage(e,h,t)},writePackedFloat:function(e,t){this.writeMessage(e,f,t)},writePackedDouble:function(e,t){this.writeMessage(e,g,t)},writePackedFixed32:function(e,t){this.writeMessage(e,v,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,x,t)},writePackedFixed64:function(e,t){this.writeMessage(e,S,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,O,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return o(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return o(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,o=e.y-this.y;return t*t+o*o},angle:function(){return U(this.y,this.x)},angleTo:function(e){return U(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return U(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,o=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=o,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),o=Math.sin(e),r=t*this.x-o*this.y,a=o*this.x+t*this.y;return this.x=r,this.y=a,this},_round:function(){return this.x=t(this.x),this.y=t(this.y),this}},k.convert=function(e){return e instanceof k?e:Array.isArray(e)?new k(e[0],e[1]):e};A.types=["Unknown","Point","LineString","Polygon"],A.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,o=1,r=0,a=0,i=0,n=[],s;e.pos<t;){if(!r){var l=e.readVarint();o=7&l,r=l>>3}if(r--,1==o||2==o)a+=e.readSVarint(),i+=e.readSVarint(),1==o&&(s&&n.push(s),s=[]),s.push(new k(a,i));else if(7==o)s&&s.push(s[0].clone());else throw new Error("unknown command "+o)}return s&&n.push(s),n},A.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,o=1,r=0,a=0,i=0,n=Infinity,s=-Infinity,l=Infinity,p=-Infinity;e.pos<t;){if(!r){var c=e.readVarint();o=7&c,r=c>>3}if(r--,1==o||2==o)a+=e.readSVarint(),i+=e.readSVarint(),a<n&&(n=a),a>s&&(s=a),i<l&&(l=i),i>p&&(p=i);else if(7!=o)throw new Error("unknown command "+o)}return[n,l,s,p]},A.prototype.toGeoJSON=function(t,o,r){function a(t){for(var o=0;o<t.length;o++){var r=t[o],a=180-360*(r.y+c)/n;t[o]=[360*(r.x+s)/n-180,360/e*Math.atan(Math.exp(a*e/180))-90]}}var n=this.extent*l(2,r),s=this.extent*t,c=this.extent*o,p=this.loadGeometry(),d=A.types[this.type],u,i;switch(this.type){case 1:var b=[];for(u=0;u<p.length;u++)b[u]=p[u][0];p=b,a(p);break;case 2:for(u=0;u<p.length;u++)a(p[u]);break;case 3:for(p=z(p),u=0;u<p.length;u++)for(i=0;i<p[u].length;i++)a(p[u][i]);}1===p.length?p=p[0]:d="Multi"+d;var m={type:"Feature",geometry:{type:d,coordinates:p},properties:this.properties};return"id"in this&&(m.id=this.id),m};I.prototype.feature=function(e){if(0>e||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new A(this._pbf,t,this.extent,this._keys,this._values)};var q=I,G=function(e,t){this.layers=e.readFields(F,{},t)};L.SVG.Tile=L.SVG.extend({initialize:function(e,t,o){L.SVG.prototype.initialize.call(this,o),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:L.Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var t in this._layers){var o=this._layers[t];o._path.style.pointerEvents="auto",this._map._targets[L.stamp(o._path)]=o}},removeFrom:function(){if(this.options.interactive)for(var e in this._layers){var t=this._layers[e];delete this._map._targets[L.stamp(t._path)]}delete this._map},_initContainer:function(){L.SVG.prototype._initContainer.call(this);L.SVG.create("rect")},_addPath:function(e){this._rootGroup.appendChild(e._path),this._layers[L.stamp(e)]=e},_updateIcon:function(e){var t=e._path=L.SVG.create("image"),o=e.options.icon,r=o.options,a=L.point(r.iconSize),i=r.iconAnchor||a&&a.divideBy(2,!0),n=e._point.subtract(i);t.setAttribute("x",n.x),t.setAttribute("y",n.y),t.setAttribute("width",a.x+"px"),t.setAttribute("height",a.y+"px"),t.setAttribute("href",r.iconUrl)}}),L.svg.tile=function(e,t,o){return new L.SVG.Tile(e,t,o)};var H=L.Class.extend({render:function(e,t){this._renderer=e,this.options=t,e._initPath(this),e._updateStyle(this)},updateStyle:function(e,t){this.options=t,e._updateStyle(this)},_getPixelBounds:function(){for(var e=this._parts,t=L.bounds([]),o=0,r;o<e.length;o++){r=e[o];for(var a=0;a<r.length;a++)t.extend(r[a])}var i=this._clickTolerance(),n=new L.Point(i,i);return t.min._subtract(n),t.max._add(n),t},_clickTolerance:L.Path.prototype._clickTolerance}),$={_makeFeatureParts:function(e,t){var o=e.geometry,r;this._parts=[];for(var a=0;a<o.length;a++){for(var i=o[a],n=[],s=0;s<i.length;s++)r=i[s],n.push(L.point(r).scaleBy(t));this._parts.push(n)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},J=L.CircleMarker.extend({includes:H.prototype,statics:{iconCache:{}},initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){H.prototype.render.call(this,e,t),this._radius=t.radius||L.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(e,t){var o=e.geometry[0];"object"==typeof o[0]&&"x"in o[0]?(this._point=L.point(o[0]).scaleBy(t),this._empty=L.Util.falseFn):(this._point=L.point(o).scaleBy(t),this._empty=L.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._radius=t.radius||this._radius,this._updateBounds(),H.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){var e=this.options.icon;if(e){var t=L.point(e.options.iconSize),o=e.options.iconAnchor||t&&t.divideBy(2,!0),r=this._point.subtract(o);this._pxBounds=new L.Bounds(r,r.add(e.options.iconSize))}else L.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.icon?this._renderer._updateIcon(this):L.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(this.options.icon){var e=this.options.icon.options.iconUrl,t=PointLayer.iconCache[e];if(!t){var o=this.options.icon;t=PointLayer.iconCache[e]=o.createIcon()}return t}return null},_containsPoint:function(e){var t=this.options.icon;return t?this._pxBounds.contains(e):L.CircleMarker.prototype._containsPoint.call(this,e)}}),Y=L.Polyline.extend({includes:[H.prototype,$],initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){t.fill=!1,H.prototype.render.call(this,e,t),this._updatePath()},updateStyle:function(e,t){t.fill=!1,H.prototype.updateStyle.call(this,e,t)}}),K=L.Polygon.extend({includes:[H.prototype,$],initialize:function(e,t){this.properties=e.properties,this._makeFeatureParts(e,t)},render:function(e,t){H.prototype.render.call(this,e,t),this._updatePath()}});L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{},interactive:!1},initialize:function(e){L.setOptions(this,e),L.GridLayer.prototype.initialize.apply(this,arguments),this.options.getFeatureId&&(this._vectorTiles={},this._overriddenStyles={},this.on("tileunload",function(t){var e=this._tileCoordsToKey(t.coords),o=this._vectorTiles[e];o&&this._map&&o.removeFrom(this._map),delete this._vectorTiles[e]},this)),this._dataLayerNames={}},createTile:function(e,t){var o=this.options.getFeatureId,r=this.getTileSize(),a=this.options.rendererFactory(e,r,this.options),i=this._getVectorTilePromise(e),n=e.z;return o&&(this._vectorTiles[this._tileCoordsToKey(e)]=a,a._features={}),i.then(function(r){var s=Object.keys(r.layers);for(var l in this.options.layersOrdering&&(s=this.options.layersOrdering(r.layers,n)),s){var p=s[l];if(r.layers[p]){this._dataLayerNames[p]=!0;for(var c=r.layers[p],d=this.getTileSize().divideBy(c.extent),u=this.options.vectorTileLayerStyles[p]||L.Path.prototype.options,b=0;b<c.features.length;b++){var i=c.features[b],m=u,y;if(o){y=this.options.getFeatureId(i);var _=this._overriddenStyles[y];_&&(_[p]?m=_[p]:m=_)}if(m instanceof Function&&(m=m(i.properties,e.z)),m instanceof Array||(m=[m]),!!m.length){for(var f=this._createLayer(i,d),g=0,h;g<m.length;g++)h=L.extend({},L.Path.prototype.options,m[g]),f.render(a,h),a._addPath(f);this.options.interactive&&f.makeInteractive(),o&&(a._features[y]={layerName:p,feature:f})}}}}null!=this._map&&a.addTo(this._map),L.Util.requestAnimFrame(t.bind(e,null,null))}.bind(this)),a.getContainer()},setFeatureStyle:function(e,t){for(var o in this._overriddenStyles[e]=t,this._vectorTiles){var r=this._vectorTiles[o],a=r._features,i=a[e];if(i){var n=i.feature,s=t;t[i.layerName]&&(s=t[i.layerName]),this._updateStyles(n,r,s)}}return this},resetFeatureStyle:function(e){for(var t in delete this._overriddenStyles[e],this._vectorTiles){var o=this._vectorTiles[t],r=o._features,a=r[e];if(a){var i=a.feature,n=this.options.vectorTileLayerStyles[a.layerName]||L.Path.prototype.options;this._updateStyles(i,o,n)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_updateStyles:function(e,t,o){o=o instanceof Function?o(e.properties,t.getCoord().z):o,o instanceof Array||(o=[o]);for(var r=0,a;r<o.length;r++)a=L.extend({},L.Path.prototype.options,o[r]),e.updateStyle(t,a)},_createLayer:function(e,t){var o;switch(e.type){case 1:o=new J(e,t);break;case 2:o=new Y(e,t);break;case 3:o=new K(e,t);}return this.options.interactive&&o.addEventParent(this),o}}),L.vectorGrid=function(e){return new L.VectorGrid(e)},L.VectorGrid.Protobuf=L.VectorGrid.extend({options:{subdomains:"abc",fetchOptions:{}},initialize:function(e,t){this._url=e,L.VectorGrid.prototype.initialize.call(this,t)},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(e){var t={s:this._getSubdomain(e),x:e.x,y:e.y,z:e.z},o=this.layersOrdering;if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}var a=L.Util.template(this._url,L.extend(t,this.options));return fetch(a,this.options.fetchOptions).then(function(e){return e.ok?e.blob().then(function(e){var t=new FileReader;return new Promise(function(o){t.addEventListener("loadend",function(){var e=new i(t.result);return o(new G(e))}),t.readAsArrayBuffer(e)})}):{layers:[]}}).then(function(e){for(var t in e.layers){for(var o=[],r=0,a;r<e.layers[t].length;r++)a=e.layers[t].feature(r),a.geometry=a.loadGeometry(),o.push(a);e.layers[t].features=o}return e})}}),L.vectorGrid.protobuf=function(e,t){return new L.VectorGrid.Protobuf(e,t)};var X=function(e,t,o){try{return window.URL.createObjectURL(new Blob([Uint8Array.from(e.split("").map(function(e){return e.charCodeAt(0)}))],{type:t}))}catch(r){return"data:"+t+(o?";base64,":",")+e}}("'use strict';\n\nvar simplify_1 = simplify$1;\n\n// calculate simplification data using optimized Douglas-Peucker algorithm\n\nfunction simplify$1(points, tolerance) {\n\n    var sqTolerance = tolerance * tolerance,\n        len = points.length,\n        first = 0,\n        last = len - 1,\n        stack = [],\n        i, maxSqDist, sqDist, index;\n\n    // always retain the endpoints (1 is the max value)\n    points[first][2] = 1;\n    points[last][2] = 1;\n\n    // avoid recursion by using a stack\n    while (last) {\n\n        maxSqDist = 0;\n\n        for (i = first + 1; i < last; i++) {\n            sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n            if (sqDist > maxSqDist) {\n                index = i;\n                maxSqDist = sqDist;\n            }\n        }\n\n        if (maxSqDist > sqTolerance) {\n            points[index][2] = maxSqDist; // save the point importance in squared pixels as a z coordinate\n            stack.push(first);\n            stack.push(index);\n            first = index;\n\n        } else {\n            last = stack.pop();\n            first = stack.pop();\n        }\n    }\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, a, b) {\n\n    var x = a[0], y = a[1],\n        bx = b[0], by = b[1],\n        px = p[0], py = p[1],\n        dx = bx - x,\n        dy = by - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = bx;\n            y = by;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = px - x;\n    dy = py - y;\n\n    return dx * dx + dy * dy;\n}\n\nvar feature = createFeature$1;\n\nfunction createFeature$1(tags, type, geom, id) {\n    var feature = {\n        id: id || null,\n        type: type,\n        geometry: geom,\n        tags: tags || null,\n        min: [Infinity, Infinity], // initial bbox values\n        max: [-Infinity, -Infinity]\n    };\n    calcBBox(feature);\n    return feature;\n}\n\n// calculate the feature bounding box for faster clipping later\nfunction calcBBox(feature) {\n    var geometry = feature.geometry,\n        min = feature.min,\n        max = feature.max;\n\n    if (feature.type === 1) {\n        calcRingBBox(min, max, geometry);\n    } else {\n        for (var i = 0; i < geometry.length; i++) {\n            calcRingBBox(min, max, geometry[i]);\n        }\n    }\n\n    return feature;\n}\n\nfunction calcRingBBox(min, max, points) {\n    for (var i = 0, p; i < points.length; i++) {\n        p = points[i];\n        min[0] = Math.min(p[0], min[0]);\n        max[0] = Math.max(p[0], max[0]);\n        min[1] = Math.min(p[1], min[1]);\n        max[1] = Math.max(p[1], max[1]);\n    }\n}\n\nvar convert_1 = convert$1;\n\nvar simplify = simplify_1;\nvar createFeature = feature;\n\n// converts GeoJSON feature into an intermediate projected JSON vector format with simplification data\n\nfunction convert$1(data, tolerance) {\n    var features = [];\n\n    if (data.type === 'FeatureCollection') {\n        for (var i = 0; i < data.features.length; i++) {\n            convertFeature(features, data.features[i], tolerance);\n        }\n    } else if (data.type === 'Feature') {\n        convertFeature(features, data, tolerance);\n\n    } else {\n        // single geometry or a geometry collection\n        convertFeature(features, {geometry: data}, tolerance);\n    }\n    return features;\n}\n\nfunction convertFeature(features, feature$$1, tolerance) {\n    if (feature$$1.geometry === null) {\n        // ignore features with null geometry\n        return;\n    }\n\n    var geom = feature$$1.geometry,\n        type = geom.type,\n        coords = geom.coordinates,\n        tags = feature$$1.properties,\n        id = feature$$1.id,\n        i, j, rings, projectedRing;\n\n    if (type === 'Point') {\n        features.push(createFeature(tags, 1, [projectPoint(coords)], id));\n\n    } else if (type === 'MultiPoint') {\n        features.push(createFeature(tags, 1, project(coords), id));\n\n    } else if (type === 'LineString') {\n        features.push(createFeature(tags, 2, [project(coords, tolerance)], id));\n\n    } else if (type === 'MultiLineString' || type === 'Polygon') {\n        rings = [];\n        for (i = 0; i < coords.length; i++) {\n            projectedRing = project(coords[i], tolerance);\n            if (type === 'Polygon') { projectedRing.outer = (i === 0); }\n            rings.push(projectedRing);\n        }\n        features.push(createFeature(tags, type === 'Polygon' ? 3 : 2, rings, id));\n\n    } else if (type === 'MultiPolygon') {\n        rings = [];\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                projectedRing = project(coords[i][j], tolerance);\n                projectedRing.outer = (j === 0);\n                rings.push(projectedRing);\n            }\n        }\n        features.push(createFeature(tags, 3, rings, id));\n\n    } else if (type === 'GeometryCollection') {\n        for (i = 0; i < geom.geometries.length; i++) {\n            convertFeature(features, {\n                geometry: geom.geometries[i],\n                properties: tags\n            }, tolerance);\n        }\n\n    } else {\n        throw new Error('Input data is not a valid GeoJSON object.');\n    }\n}\n\nfunction project(lonlats, tolerance) {\n    var projected = [];\n    for (var i = 0; i < lonlats.length; i++) {\n        projected.push(projectPoint(lonlats[i]));\n    }\n    if (tolerance) {\n        simplify(projected, tolerance);\n        calcSize(projected);\n    }\n    return projected;\n}\n\nfunction projectPoint(p) {\n    var sin = Math.sin(p[1] * Math.PI / 180),\n        x = (p[0] / 360 + 0.5),\n        y = (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n\n    y = y < 0 ? 0 :\n        y > 1 ? 1 : y;\n\n    return [x, y, 0];\n}\n\n// calculate area and length of the poly\nfunction calcSize(points) {\n    var area = 0,\n        dist = 0;\n\n    for (var i = 0, a, b; i < points.length - 1; i++) {\n        a = b || points[i];\n        b = points[i + 1];\n\n        area += a[0] * b[1] - b[0] * a[1];\n\n        // use Manhattan distance instead of Euclidian one to avoid expensive square root computation\n        dist += Math.abs(b[0] - a[0]) + Math.abs(b[1] - a[1]);\n    }\n    points.area = Math.abs(area / 2);\n    points.dist = dist;\n}\n\nvar tile = transformTile;\nvar point = transformPoint;\n\n// Transforms the coordinates of each feature in the given tile from\n// mercator-projected space into (extent x extent) tile space.\nfunction transformTile(tile, extent) {\n    if (tile.transformed) { return tile; }\n\n    var z2 = tile.z2,\n        tx = tile.x,\n        ty = tile.y,\n        i, j, k;\n\n    for (i = 0; i < tile.features.length; i++) {\n        var feature = tile.features[i],\n            geom = feature.geometry,\n            type = feature.type;\n\n        if (type === 1) {\n            for (j = 0; j < geom.length; j++) { geom[j] = transformPoint(geom[j], extent, z2, tx, ty); }\n\n        } else {\n            for (j = 0; j < geom.length; j++) {\n                var ring = geom[j];\n                for (k = 0; k < ring.length; k++) { ring[k] = transformPoint(ring[k], extent, z2, tx, ty); }\n            }\n        }\n    }\n\n    tile.transformed = true;\n\n    return tile;\n}\n\nfunction transformPoint(p, extent, z2, tx, ty) {\n    var x = Math.round(extent * (p[0] * z2 - tx)),\n        y = Math.round(extent * (p[1] * z2 - ty));\n    return [x, y];\n}\n\nvar transform$1 = {\n\ttile: tile,\n\tpoint: point\n};\n\nvar clip_1 = clip$1;\n\nvar createFeature$2 = feature;\n\n/* clip features between two axis-parallel lines:\n *     |        |\n *  ___|___     |     /\n * /   |   ____|____/\n *     |        |\n */\n\nfunction clip$1(features, scale, k1, k2, axis, intersect, minAll, maxAll) {\n\n    k1 /= scale;\n    k2 /= scale;\n\n    if (minAll >= k1 && maxAll <= k2) { return features; } // trivial accept\n    else if (minAll > k2 || maxAll < k1) { return null; } // trivial reject\n\n    var clipped = [];\n\n    for (var i = 0; i < features.length; i++) {\n\n        var feature$$1 = features[i],\n            geometry = feature$$1.geometry,\n            type = feature$$1.type,\n            min, max;\n\n        min = feature$$1.min[axis];\n        max = feature$$1.max[axis];\n\n        if (min >= k1 && max <= k2) { // trivial accept\n            clipped.push(feature$$1);\n            continue;\n        } else if (min > k2 || max < k1) { continue; } // trivial reject\n\n        var slices = type === 1 ?\n                clipPoints(geometry, k1, k2, axis) :\n                clipGeometry(geometry, k1, k2, axis, intersect, type === 3);\n\n        if (slices.length) {\n            // if a feature got clipped, it will likely get clipped on the next zoom level as well,\n            // so there's no need to recalculate bboxes\n            clipped.push(createFeature$2(feature$$1.tags, type, slices, feature$$1.id));\n        }\n    }\n\n    return clipped.length ? clipped : null;\n}\n\nfunction clipPoints(geometry, k1, k2, axis) {\n    var slice = [];\n\n    for (var i = 0; i < geometry.length; i++) {\n        var a = geometry[i],\n            ak = a[axis];\n\n        if (ak >= k1 && ak <= k2) { slice.push(a); }\n    }\n    return slice;\n}\n\nfunction clipGeometry(geometry, k1, k2, axis, intersect, closed) {\n\n    var slices = [];\n\n    for (var i = 0; i < geometry.length; i++) {\n\n        var ak = 0,\n            bk = 0,\n            b = null,\n            points = geometry[i],\n            area = points.area,\n            dist = points.dist,\n            outer = points.outer,\n            len = points.length,\n            a, j, last;\n\n        var slice = [];\n\n        for (j = 0; j < len - 1; j++) {\n            a = b || points[j];\n            b = points[j + 1];\n            ak = bk || a[axis];\n            bk = b[axis];\n\n            if (ak < k1) {\n\n                if ((bk > k2)) { // ---|-----|-->\n                    slice.push(intersect(a, b, k1), intersect(a, b, k2));\n                    if (!closed) { slice = newSlice(slices, slice, area, dist, outer); }\n\n                } else if (bk >= k1) { slice.push(intersect(a, b, k1)); } // ---|-->  |\n\n            } else if (ak > k2) {\n\n                if ((bk < k1)) { // <--|-----|---\n                    slice.push(intersect(a, b, k2), intersect(a, b, k1));\n                    if (!closed) { slice = newSlice(slices, slice, area, dist, outer); }\n\n                } else if (bk <= k2) { slice.push(intersect(a, b, k2)); } // |  <--|---\n\n            } else {\n\n                slice.push(a);\n\n                if (bk < k1) { // <--|---  |\n                    slice.push(intersect(a, b, k1));\n                    if (!closed) { slice = newSlice(slices, slice, area, dist, outer); }\n\n                } else if (bk > k2) { // |  ---|-->\n                    slice.push(intersect(a, b, k2));\n                    if (!closed) { slice = newSlice(slices, slice, area, dist, outer); }\n                }\n                // | --> |\n            }\n        }\n\n        // add the last point\n        a = points[len - 1];\n        ak = a[axis];\n        if (ak >= k1 && ak <= k2) { slice.push(a); }\n\n        // close the polygon if its endpoints are not the same after clipping\n\n        last = slice[slice.length - 1];\n        if (closed && last && (slice[0][0] !== last[0] || slice[0][1] !== last[1])) { slice.push(slice[0]); }\n\n        // add the final slice\n        newSlice(slices, slice, area, dist, outer);\n    }\n\n    return slices;\n}\n\nfunction newSlice(slices, slice, area, dist, outer) {\n    if (slice.length) {\n        // we don't recalculate the area/length of the unclipped geometry because the case where it goes\n        // below the visibility threshold as a result of clipping is rare, so we avoid doing unnecessary work\n        slice.area = area;\n        slice.dist = dist;\n        if (outer !== undefined) { slice.outer = outer; }\n\n        slices.push(slice);\n    }\n    return [];\n}\n\nvar clip$2 = clip_1;\nvar createFeature$3 = feature;\n\nvar wrap_1 = wrap$1;\n\nfunction wrap$1(features, buffer, intersectX) {\n    var merged = features,\n        left  = clip$2(features, 1, -1 - buffer, buffer,     0, intersectX, -1, 2), // left world copy\n        right = clip$2(features, 1,  1 - buffer, 2 + buffer, 0, intersectX, -1, 2); // right world copy\n\n    if (left || right) {\n        merged = clip$2(features, 1, -buffer, 1 + buffer, 0, intersectX, -1, 2) || []; // center world copy\n\n        if (left) { merged = shiftFeatureCoords(left, 1).concat(merged); } // merge left into center\n        if (right) { merged = merged.concat(shiftFeatureCoords(right, -1)); } // merge right into center\n    }\n\n    return merged;\n}\n\nfunction shiftFeatureCoords(features, offset) {\n    var newFeatures = [];\n\n    for (var i = 0; i < features.length; i++) {\n        var feature$$1 = features[i],\n            type = feature$$1.type;\n\n        var newGeometry;\n\n        if (type === 1) {\n            newGeometry = shiftCoords(feature$$1.geometry, offset);\n        } else {\n            newGeometry = [];\n            for (var j = 0; j < feature$$1.geometry.length; j++) {\n                newGeometry.push(shiftCoords(feature$$1.geometry[j], offset));\n            }\n        }\n\n        newFeatures.push(createFeature$3(feature$$1.tags, type, newGeometry, feature$$1.id));\n    }\n\n    return newFeatures;\n}\n\nfunction shiftCoords(points, offset) {\n    var newPoints = [];\n    newPoints.area = points.area;\n    newPoints.dist = points.dist;\n\n    for (var i = 0; i < points.length; i++) {\n        newPoints.push([points[i][0] + offset, points[i][1], points[i][2]]);\n    }\n    return newPoints;\n}\n\nvar tile$1 = createTile$1;\n\nfunction createTile$1(features, z2, tx, ty, tolerance, noSimplify) {\n    var tile = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: tx,\n        y: ty,\n        z2: z2,\n        transformed: false,\n        min: [2, 1],\n        max: [-1, 0]\n    };\n    for (var i = 0; i < features.length; i++) {\n        tile.numFeatures++;\n        addFeature(tile, features[i], tolerance, noSimplify);\n\n        var min = features[i].min,\n            max = features[i].max;\n\n        if (min[0] < tile.min[0]) { tile.min[0] = min[0]; }\n        if (min[1] < tile.min[1]) { tile.min[1] = min[1]; }\n        if (max[0] > tile.max[0]) { tile.max[0] = max[0]; }\n        if (max[1] > tile.max[1]) { tile.max[1] = max[1]; }\n    }\n    return tile;\n}\n\nfunction addFeature(tile, feature, tolerance, noSimplify) {\n\n    var geom = feature.geometry,\n        type = feature.type,\n        simplified = [],\n        sqTolerance = tolerance * tolerance,\n        i, j, ring, p;\n\n    if (type === 1) {\n        for (i = 0; i < geom.length; i++) {\n            simplified.push(geom[i]);\n            tile.numPoints++;\n            tile.numSimplified++;\n        }\n\n    } else {\n\n        // simplify and transform projected coordinates for tile geometry\n        for (i = 0; i < geom.length; i++) {\n            ring = geom[i];\n\n            // filter out tiny polylines & polygons\n            if (!noSimplify && ((type === 2 && ring.dist < tolerance) ||\n                                (type === 3 && ring.area < sqTolerance))) {\n                tile.numPoints += ring.length;\n                continue;\n            }\n\n            var simplifiedRing = [];\n\n            for (j = 0; j < ring.length; j++) {\n                p = ring[j];\n                // keep points with importance > tolerance\n                if (noSimplify || p[2] > sqTolerance) {\n                    simplifiedRing.push(p);\n                    tile.numSimplified++;\n                }\n                tile.numPoints++;\n            }\n\n            if (type === 3) { rewind(simplifiedRing, ring.outer); }\n\n            simplified.push(simplifiedRing);\n        }\n    }\n\n    if (simplified.length) {\n        var tileFeature = {\n            geometry: simplified,\n            type: type,\n            tags: feature.tags || null\n        };\n        if (feature.id !== null) {\n            tileFeature.id = feature.id;\n        }\n        tile.features.push(tileFeature);\n    }\n}\n\nfunction rewind(ring, clockwise) {\n    var area = signedArea(ring);\n    if (area < 0 === clockwise) { ring.reverse(); }\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2[0] - p1[0]) * (p1[1] + p2[1]);\n    }\n    return sum;\n}\n\nvar index = geojsonvt;\n\nvar convert = convert_1;\nvar transform = transform$1;\nvar clip = clip_1;\nvar wrap = wrap_1;\nvar createTile = tile$1;     // final simplified tile generation\n\n\nfunction geojsonvt(data, options) {\n    return new GeoJSONVT(data, options);\n}\n\nfunction GeoJSONVT(data, options) {\n    options = this.options = extend(Object.create(this.options), options);\n\n    var debug = options.debug;\n\n    if (debug) { console.time('preprocess data'); }\n\n    var z2 = 1 << options.maxZoom, // 2^z\n        features = convert(data, options.tolerance / (z2 * options.extent));\n\n    this.tiles = {};\n    this.tileCoords = [];\n\n    if (debug) {\n        console.timeEnd('preprocess data');\n        console.log('index: maxZoom: %d, maxPoints: %d', options.indexMaxZoom, options.indexMaxPoints);\n        console.time('generate tiles');\n        this.stats = {};\n        this.total = 0;\n    }\n\n    features = wrap(features, options.buffer / options.extent, intersectX);\n\n    // start slicing from the top tile down\n    if (features.length) { this.splitTile(features, 0, 0, 0); }\n\n    if (debug) {\n        if (features.length) { console.log('features: %d, points: %d', this.tiles[0].numFeatures, this.tiles[0].numPoints); }\n        console.timeEnd('generate tiles');\n        console.log('tiles generated:', this.total, JSON.stringify(this.stats));\n    }\n}\n\nGeoJSONVT.prototype.options = {\n    maxZoom: 14,            // max zoom to preserve detail on\n    indexMaxZoom: 5,        // max zoom in the tile index\n    indexMaxPoints: 100000, // max number of points per tile in the tile index\n    solidChildren: false,   // whether to tile solid square tiles further\n    tolerance: 3,           // simplification tolerance (higher means simpler)\n    extent: 4096,           // tile extent\n    buffer: 64,             // tile buffer on each side\n    debug: 0                // logging level (0, 1 or 2)\n};\n\nGeoJSONVT.prototype.splitTile = function (features, z, x, y, cz, cx, cy) {\n    var this$1 = this;\n\n\n    var stack = [features, z, x, y],\n        options = this.options,\n        debug = options.debug,\n        solid = null;\n\n    // avoid recursion by using a processing queue\n    while (stack.length) {\n        y = stack.pop();\n        x = stack.pop();\n        z = stack.pop();\n        features = stack.pop();\n\n        var z2 = 1 << z,\n            id = toID(z, x, y),\n            tile = this$1.tiles[id],\n            tileTolerance = z === options.maxZoom ? 0 : options.tolerance / (z2 * options.extent);\n\n        if (!tile) {\n            if (debug > 1) { console.time('creation'); }\n\n            tile = this$1.tiles[id] = createTile(features, z2, x, y, tileTolerance, z === options.maxZoom);\n            this$1.tileCoords.push({z: z, x: x, y: y});\n\n            if (debug) {\n                if (debug > 1) {\n                    console.log('tile z%d-%d-%d (features: %d, points: %d, simplified: %d)',\n                        z, x, y, tile.numFeatures, tile.numPoints, tile.numSimplified);\n                    console.timeEnd('creation');\n                }\n                var key = 'z' + z;\n                this$1.stats[key] = (this$1.stats[key] || 0) + 1;\n                this$1.total++;\n            }\n        }\n\n        // save reference to original geometry in tile so that we can drill down later if we stop now\n        tile.source = features;\n\n        // if it's the first-pass tiling\n        if (!cz) {\n            // stop tiling if we reached max zoom, or if the tile is too simple\n            if (z === options.indexMaxZoom || tile.numPoints <= options.indexMaxPoints) { continue; }\n\n        // if a drilldown to a specific tile\n        } else {\n            // stop tiling if we reached base zoom or our target tile zoom\n            if (z === options.maxZoom || z === cz) { continue; }\n\n            // stop tiling if it's not an ancestor of the target tile\n            var m = 1 << (cz - z);\n            if (x !== Math.floor(cx / m) || y !== Math.floor(cy / m)) { continue; }\n        }\n\n        // stop tiling if the tile is solid clipped square\n        if (!options.solidChildren && isClippedSquare(tile, options.extent, options.buffer)) {\n            if (cz) { solid = z; } // and remember the zoom if we're drilling down\n            continue;\n        }\n\n        // if we slice further down, no need to keep source geometry\n        tile.source = null;\n\n        if (debug > 1) { console.time('clipping'); }\n\n        // values we'll use for clipping\n        var k1 = 0.5 * options.buffer / options.extent,\n            k2 = 0.5 - k1,\n            k3 = 0.5 + k1,\n            k4 = 1 + k1,\n            tl, bl, tr, br, left, right;\n\n        tl = bl = tr = br = null;\n\n        left  = clip(features, z2, x - k1, x + k3, 0, intersectX, tile.min[0], tile.max[0]);\n        right = clip(features, z2, x + k2, x + k4, 0, intersectX, tile.min[0], tile.max[0]);\n\n        if (left) {\n            tl = clip(left, z2, y - k1, y + k3, 1, intersectY, tile.min[1], tile.max[1]);\n            bl = clip(left, z2, y + k2, y + k4, 1, intersectY, tile.min[1], tile.max[1]);\n        }\n\n        if (right) {\n            tr = clip(right, z2, y - k1, y + k3, 1, intersectY, tile.min[1], tile.max[1]);\n            br = clip(right, z2, y + k2, y + k4, 1, intersectY, tile.min[1], tile.max[1]);\n        }\n\n        if (debug > 1) { console.timeEnd('clipping'); }\n\n        if (features.length) {\n            stack.push(tl || [], z + 1, x * 2,     y * 2);\n            stack.push(bl || [], z + 1, x * 2,     y * 2 + 1);\n            stack.push(tr || [], z + 1, x * 2 + 1, y * 2);\n            stack.push(br || [], z + 1, x * 2 + 1, y * 2 + 1);\n        }\n    }\n\n    return solid;\n};\n\nGeoJSONVT.prototype.getTile = function (z, x, y) {\n    var this$1 = this;\n\n    var options = this.options,\n        extent = options.extent,\n        debug = options.debug;\n\n    var z2 = 1 << z;\n    x = ((x % z2) + z2) % z2; // wrap tile x coordinate\n\n    var id = toID(z, x, y);\n    if (this.tiles[id]) { return transform.tile(this.tiles[id], extent); }\n\n    if (debug > 1) { console.log('drilling down to z%d-%d-%d', z, x, y); }\n\n    var z0 = z,\n        x0 = x,\n        y0 = y,\n        parent;\n\n    while (!parent && z0 > 0) {\n        z0--;\n        x0 = Math.floor(x0 / 2);\n        y0 = Math.floor(y0 / 2);\n        parent = this$1.tiles[toID(z0, x0, y0)];\n    }\n\n    if (!parent || !parent.source) { return null; }\n\n    // if we found a parent tile containing the original geometry, we can drill down from it\n    if (debug > 1) { console.log('found parent tile z%d-%d-%d', z0, x0, y0); }\n\n    // it parent tile is a solid clipped square, return it instead since it's identical\n    if (isClippedSquare(parent, extent, options.buffer)) { return transform.tile(parent, extent); }\n\n    if (debug > 1) { console.time('drilling down'); }\n    var solid = this.splitTile(parent.source, z0, x0, y0, z, x, y);\n    if (debug > 1) { console.timeEnd('drilling down'); }\n\n    // one of the parent tiles was a solid clipped square\n    if (solid !== null) {\n        var m = 1 << (z - solid);\n        id = toID(solid, Math.floor(x / m), Math.floor(y / m));\n    }\n\n    return this.tiles[id] ? transform.tile(this.tiles[id], extent) : null;\n};\n\nfunction toID(z, x, y) {\n    return (((1 << z) * y + x) * 32) + z;\n}\n\nfunction intersectX(a, b, x) {\n    return [x, (x - a[0]) * (b[1] - a[1]) / (b[0] - a[0]) + a[1], 1];\n}\nfunction intersectY(a, b, y) {\n    return [(y - a[1]) * (b[0] - a[0]) / (b[1] - a[1]) + a[0], y, 1];\n}\n\nfunction extend(dest, src) {\n    for (var i in src) { dest[i] = src[i]; }\n    return dest;\n}\n\n// checks whether a tile is a whole-area fill after clipping; if it is, there's no sense slicing it further\nfunction isClippedSquare(tile, extent, buffer) {\n\n    var features = tile.source;\n    if (features.length !== 1) { return false; }\n\n    var feature = features[0];\n    if (feature.type !== 3 || feature.geometry.length > 1) { return false; }\n\n    var len = feature.geometry[0].length;\n    if (len !== 5) { return false; }\n\n    for (var i = 0; i < len; i++) {\n        var p = transform.point(feature.geometry[0][i], extent, tile.z2, tile.x, tile.y);\n        if ((p[0] !== -buffer && p[0] !== extent + buffer) ||\n            (p[1] !== -buffer && p[1] !== extent + buffer)) { return false; }\n    }\n\n    return true;\n}\n\nvar identity = function(x) {\n  return x;\n};\n\nvar transform$3 = function(topology) {\n  if ((transform = topology.transform) == null) { return identity; }\n  var transform,\n      x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(point, i) {\n    if (!i) { x0 = y0 = 0; }\n    point[0] = (x0 += point[0]) * kx + dx;\n    point[1] = (y0 += point[1]) * ky + dy;\n    return point;\n  };\n};\n\nvar bbox = function(topology) {\n  var bbox = topology.bbox;\n\n  function bboxPoint(p0) {\n    p1[0] = p0[0], p1[1] = p0[1], t(p1);\n    if (p1[0] < x0) { x0 = p1[0]; }\n    if (p1[0] > x1) { x1 = p1[0]; }\n    if (p1[1] < y0) { y0 = p1[1]; }\n    if (p1[1] > y1) { y1 = p1[1]; }\n  }\n\n  function bboxGeometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(bboxGeometry); break;\n      case \"Point\": bboxPoint(o.coordinates); break;\n      case \"MultiPoint\": o.coordinates.forEach(bboxPoint); break;\n    }\n  }\n\n  if (!bbox) {\n    var t = transform$3(topology), p0, p1 = new Array(2), name,\n        x0 = Infinity, y0 = x0, x1 = -x0, y1 = -x0;\n\n    topology.arcs.forEach(function(arc) {\n      var i = -1, n = arc.length;\n      while (++i < n) {\n        p0 = arc[i], p1[0] = p0[0], p1[1] = p0[1], t(p1, i);\n        if (p1[0] < x0) { x0 = p1[0]; }\n        if (p1[0] > x1) { x1 = p1[0]; }\n        if (p1[1] < y0) { y0 = p1[1]; }\n        if (p1[1] > y1) { y1 = p1[1]; }\n      }\n    });\n\n    for (name in topology.objects) {\n      bboxGeometry(topology.objects[name]);\n    }\n\n    bbox = topology.bbox = [x0, y0, x1, y1];\n  }\n\n  return bbox;\n};\n\nvar reverse = function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) { t = array[i], array[i++] = array[j], array[j] = t; }\n};\n\nvar feature$2 = function(topology, o) {\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature$3(topology, o); })}\n      : feature$3(topology, o);\n};\n\nfunction feature$3(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nfunction object(topology, o) {\n  var transformPoint = transform$3(topology),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) { points.pop(); }\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k].slice(), k));\n    }\n    if (i < 0) { reverse(points, n); }\n  }\n\n  function point(p) {\n    return transformPoint(p.slice());\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) { arc(arcs[i], points); }\n    if (points.length < 2) { points.push(points[0].slice()); }\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) { points.push(points[0].slice()); }\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n\nvar stitch = function(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) { p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; }); }\n    else { p1 = arc[arc.length - 1]; }\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) { fragments.push([i]); } });\n\n  return fragments;\n};\n\nfunction extractArcs(topology, object$$1, filter) {\n  var arcs = [],\n      geomsByArc = [],\n      geom;\n\n  function extract0(i) {\n    var j = i < 0 ? ~i : i;\n    (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n  }\n\n  function extract1(arcs) {\n    arcs.forEach(extract0);\n  }\n\n  function extract2(arcs) {\n    arcs.forEach(extract1);\n  }\n\n  function extract3(arcs) {\n    arcs.forEach(extract2);\n  }\n\n  function geometry(o) {\n    switch (geom = o, o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"LineString\": extract1(o.arcs); break;\n      case \"MultiLineString\": case \"Polygon\": extract2(o.arcs); break;\n      case \"MultiPolygon\": extract3(o.arcs); break;\n    }\n  }\n\n  geometry(object$$1);\n\n  geomsByArc.forEach(filter == null\n      ? function(geoms) { arcs.push(geoms[0].i); }\n      : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) { arcs.push(geoms[0].i); } });\n\n  return arcs;\n}\n\nfunction planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) { a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0]; }\n  return Math.abs(area); // Note: doubled area!\n}\n\nvar bisect = function(a, x) {\n  var lo = 0, hi = a.length;\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid] < x) { lo = mid + 1; }\n    else { hi = mid; }\n  }\n  return lo;\n};\n\nvar slicers = {};\nvar options;\n\nonmessage = function (e) {\n\tif (e.data[0] === 'slice') {\n\t\t// Given a blob of GeoJSON and some topojson/geojson-vt options, do the slicing.\n\t\tvar geojson = e.data[1];\n\t\toptions     = e.data[2];\n\n\t\tif (geojson.type && geojson.type === 'Topology') {\n\t\t\tfor (var layerName in geojson.objects) {\n\t\t\t\tslicers[layerName] = index(\n\t\t\t\t\tfeature$2(geojson, geojson.objects[layerName])\n\t\t\t\t, options);\n\t\t\t}\n\t\t} else {\n\t\t\tslicers[options.vectorTileLayerName] = index(geojson, options);\n\t\t}\n\n\t} else if (e.data[0] === 'get') {\n\t\t// Gets the vector tile for the given coordinates, sends it back as a message\n\t\tvar coords = e.data[1];\n\n\t\tvar tileLayers = {};\n\t\tfor (var layerName in slicers) {\n\t\t\tvar slicedTileLayer = slicers[layerName].getTile(coords.z, coords.x, coords.y);\n\n\t\t\tif (slicedTileLayer) {\n\t\t\t\tvar vectorTileLayer = {\n\t\t\t\t\tfeatures: [],\n\t\t\t\t\textent: options.extent,\n\t\t\t\t\tname: options.vectorTileLayerName,\n\t\t\t\t\tlength: slicedTileLayer.features.length\n\t\t\t\t};\n\n\t\t\t\tfor (var i in slicedTileLayer.features) {\n\t\t\t\t\tvar feat = {\n\t\t\t\t\t\tgeometry: slicedTileLayer.features[i].geometry,\n\t\t\t\t\t\tproperties: slicedTileLayer.features[i].tags,\n\t\t\t\t\t\ttype: slicedTileLayer.features[i].type\t// 1 = point, 2 = line, 3 = polygon\n\t\t\t\t\t};\n\t\t\t\t\tvectorTileLayer.features.push(feat);\n\t\t\t\t}\n\t\t\t\ttileLayers[layerName] = vectorTileLayer;\n\t\t\t}\n\t\t}\n\t\tpostMessage({ layers: tileLayers, coords: coords });\n\t}\n};\n//# sourceMappingURL=slicerWebWorker.js.worker.map\n","text/plain; charset=us-ascii",!1);L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},initialize:function(e,t){L.VectorGrid.prototype.initialize.call(this,t);var t={};for(var o in this.options)"rendererFactory"!=o&&"vectorTileLayerStyles"!=o&&"function"!=typeof this.options[o]&&(t[o]=this.options[o]);this._worker=new Worker(X),this._worker.postMessage(["slice",e,t])},_getVectorTilePromise:function(e){var t=this,o=new Promise(function(o){t._worker.addEventListener("message",function r(a){a.data.coords&&a.data.coords.x===e.x&&a.data.coords.y===e.y&&a.data.coords.z===e.z&&(o(a.data),t._worker.removeEventListener("message",r))})});return this._worker.postMessage(["get",e]),o}}),L.vectorGrid.slicer=function(e,t){return new L.VectorGrid.Slicer(e,t)},L.Canvas.Tile=L.Canvas.extend({initialize:function(e,t,o){L.Canvas.prototype.initialize.call(this,o),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,o.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:L.Util.falseFn,addTo:function(e){this._map=e},removeFrom:function(){delete this._map},_onClick:function(t){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset()),o,r;for(var a in this._layers)o=this._layers[a],o.options.interactive&&o._containsPoint(e)&&!this._map._draggableMoved(o)&&(r=o);r&&(L.DomEvent.fakeStop(t),this._fireEvent([r],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseHover(t,e)}},_updateIcon:function(e){if(this._drawing){var t=e.options.icon,o=t.options,r=L.point(o.iconSize),a=o.iconAnchor||r&&r.divideBy(2,!0),i=e._point.subtract(a),n=this._ctx,s=e._getImage();s.complete?n.drawImage(s,i.x,i.y,r.x,r.y):L.DomEvent.on(s,"load",function(){n.drawImage(s,i.x,i.y,r.x,r.y)}),this._drawnLayers[e._leaflet_id]=e}}}),L.canvas.tile=function(e,t,o){return new L.Canvas.Tile(e,t,o)}})()},{}],9:[function(){(function(){function e(e){e.GeoJSONGridLayer=e.GridLayer.extend({initialize:function(t,o){e.GridLayer.prototype.initialize.call(this,o),this._url=t,this._geojsons={},this._features={},this.geoJsonClass=this.options.geoJsonClass?this.options.geoJsonClass:e.GeoJSON},onAdd:function(t){var o=this._geojsons;Object.keys(o).forEach(function(e){t.addLayer(o[e])}),e.GridLayer.prototype.onAdd.call(this,t),this.zoomanimHandler=this._handleZoom.bind(this),t.on("zoomanim",this.zoomanimHandler)},onRemove:function(t){var o=this._geojsons;Object.keys(o).forEach(function(e){t.removeLayer(o[e])}),e.GridLayer.prototype.onRemove.call(this,t),t.off("zoomanim",this.zoomanimHandler)},_handleZoom:function(t){this.checkZoomConditions(t.zoom)},createTile:function(t,o){var r=e.DomUtil.create("div","leaflet-tile"),a=this.getTileSize();return r.width=a.x,r.height=a.y,this.fetchTile(t,function(e){o(e,r)}),r},fetchTile:function(t,o){var r=e.Util.template(this._url,t),a=this,i=new XMLHttpRequest;i.open("GET",r,!0),i.onload=function(){if(200<=i.status&&400>i.status){var e=JSON.parse(i.responseText);a.addData(e),o(null)}else o(i.statusText)},i.onerror=function(){o(i.statusText)},i.send()},getLayers:function(){var e=this._geojsons,t=[];return Object.keys(e).forEach(function(o){t.push(e[o])}),t},hasLayerWithId:function(e,t){return this._geojsons[e]&&this._features[e]&&this._features[e].hasOwnProperty(t)},addData:function(e){if("FeatureCollection"===e.type)this.addSubLayerData("default",e);else{var t=this;Object.keys(e).forEach(function(o){t.addSubLayerData(o,e[o])})}},addSubLayerData:function(e,t){this._geojsons[e]||(this._geojsons[e]=new this.geoJsonClass(null,this.options.layers[e]).addTo(this._map),this.checkZoomConditions(this._map.getZoom()));var o=t.features.filter(function(t){return!this.hasLayerWithId(e,t.id?t.id:t.properties.id)},this);this._features[e]||(this._features[e]={}),o.forEach(function(t){var o=t.id?t.id:t.properties.id;this._features[e][o]=t},this),this._geojsons[e].addData({type:"FeatureCollection",features:o})},checkZoomConditions:function(e){var t=this._geojsons,o=this._map;Object.keys(t).forEach(function(r){var a=t[r],i=a.options;i.maxZoom&&e>i.maxZoom||i.minZoom&&e<i.minZoom?o.removeLayer(a):o.addLayer(a)})}}),e.geoJsonGridLayer=function(t,o){return new e.GeoJSONGridLayer(t,o)}}window.console||{error:function(){},warn:function(){}};"function"==typeof define&&define.amd?define(["leaflet"],function(t){e(t)}):e(L)})()},{}],10:[function(e,t){function o(e,t){if(!e)throw new Error("No geometry passed");return{type:"Feature",properties:t||{},geometry:e}}function r(e,t){if(e===void 0||null===e)throw new Error("radians is required");var o=s[t||"kilometers"];if(!o)throw new Error("units is invalid");return e*o}function a(e,t){if(e===void 0||null===e)throw new Error("distance is required");var o=s[t||"kilometers"];if(!o)throw new Error("units is invalid");return e/o}function i(e){if(null===e||e===void 0)throw new Error("radians is required");return 180*(e%(2*n))/n}var n=Math.PI,s={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373000,metres:6373000,centimeters:6.373e8,centimetres:6.373e8,kilometers:6373,kilometres:6373,feet:20908792.65},l={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:2.47105e-4,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006};t.exports={feature:o,featureCollection:function(e){if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");return{type:"FeatureCollection",features:e}},geometryCollection:function(e,t){if(!e)throw new Error("geometries is required");return o({type:"GeometryCollection",geometries:e},t)},point:function(e,t){if(!e)throw new Error("No coordinates passed");if(void 0===e.length)throw new Error("Coordinates must be an array");if(2>e.length)throw new Error("Coordinates must be at least 2 numbers long");if("number"!=typeof e[0]||"number"!=typeof e[1])throw new Error("Coordinates must contain numbers");return o({type:"Point",coordinates:e},t)},multiPoint:function(e,t){if(!e)throw new Error("No coordinates passed");return o({type:"MultiPoint",coordinates:e},t)},lineString:function(e,t){if(!e)throw new Error("No coordinates passed");if(2>e.length)throw new Error("Coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:e},t)},multiLineString:function(e,t){if(!e)throw new Error("No coordinates passed");return o({type:"MultiLineString",coordinates:e},t)},polygon:function(e,t){if(!e)throw new Error("No coordinates passed");for(var r=0,a;r<e.length;r++){if(a=e[r],4>a.length)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<a[a.length-1].length;i++)if(a[a.length-1][i]!==a[0][i])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:e},t)},multiPolygon:function(e,t){if(!e)throw new Error("No coordinates passed");return o({type:"MultiPolygon",coordinates:e},t)},radiansToDistance:r,distanceToRadians:a,distanceToDegrees:function(e,t){return i(a(e,t))},radians2degrees:i,degrees2radians:function(e){if(null===e||e===void 0)throw new Error("degrees is required");return e%360*n/180},bearingToAngle:function(e){if(null===e||void 0===e)throw new Error("bearing is required");var t=e%360;return 0>t&&(t+=360),t},convertDistance:function(e,t,o){if(null===e||e===void 0)throw new Error("distance is required");if(!(0<=e))throw new Error("distance must be a positive number");var i=r(a(e,t),o||"kilometers");return i},convertArea:function(e,t,o){if(null===e||e===void 0)throw new Error("area is required");if(!(0<=e))throw new Error("area must be a positive number");var r=l[t||"meters"];if(!r)throw new Error("invalid original units");var a=l[o||"kilometers"];if(!a)throw new Error("invalid final units");return e/r*a},round:function(e,t){if(e===void 0||null===e||isNaN(e))throw new Error("num is required");if(t&&!(0<=t))throw new Error("precision must be a positive number");var o=Math.pow(10,t||0);return Math.round(e*o)/o}}},{}],11:[function(e,t){function o(e,t,o){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var a=0,i=t.length-1;a<t.length;i=a++){var n=t[a][0],s=t[a][1],l=t[i][0],p=t[i][1],c=0==e[1]*(n-l)+s*(l-e[0])+p*(e[0]-n)&&0>=(n-e[0])*(l-e[0])&&0>=(s-e[1])*(p-e[1]);if(c)return!o;var d=s>e[1]!=p>e[1]&&e[0]<(l-n)*(e[1]-s)/(p-s)+n;d&&(r=!r)}return r}function r(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var a=e("@turf/invariant"),n=a.getCoord,s=a.getCoords;t.exports=function(e,t,a){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var l=n(e),p=s(t),c=t.geometry?t.geometry.type:t.type,d=t.bbox;if(d&&!1===r(l,d))return!1;"Polygon"===c&&(p=[p]);for(var u=0,i=!1;u<p.length&&!i;u++)if(o(l,p[u][0],a)){for(var b=!1,m=1;m<p[u].length&&!b;)o(l,p[u][m],!a)&&(b=!0),m++;b||(i=!0)}return i}},{"@turf/invariant":12}],12:[function(e,t){function o(e){if(!e)throw new Error("No obj passed");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return r(t),t;throw new Error("No valid coordinates")}function r(e){if(1<e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return r(e[0]);throw new Error("coordinates must only contain numbers")}function a(e){if(!e)throw new Error("<geojson> is required");if(e.geometry)return e.geometry;if(e.coordinates||e.geometries)return e;throw new Error("<geojson> must be a Feature or Geometry Object")}t.exports={geojsonType:function(e,t,o){if(!t||!o)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+o+": must be a "+t+", given "+e.type)},collectionOf:function(e,t,o){if(!e)throw new Error("No featureCollection passed");if(!o)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+o+", FeatureCollection required");for(var r=0,a;r<e.features.length;r++){if(a=e.features[r],!a||"Feature"!==a.type||!a.geometry)throw new Error("Invalid input to "+o+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+o+": must be a "+t+", given "+a.geometry.type)}},featureOf:function(e,t,o){if(!e)throw new Error("No feature passed");if(!o)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+o+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+o+": must be a "+t+", given "+e.geometry.type)},getCoord:function(e){if(!e)throw new Error("No obj passed");var t=o(e);if(1<t.length&&"number"==typeof t[0]&&"number"==typeof t[1])return t;throw new Error("Coordinate is not a valid Point")},getCoords:o,containsNumber:r,getGeom:a,getGeomType:function(e){return a(e).type}}},{}],13:[function(e,t){var o=e("@turf/inside"),r=e("@turf/helpers").featureCollection;t.exports=function(e,t){for(var a=r([]),n=0;n<t.features.length;n++)for(var i=0,s;i<e.features.length;i++)s=o(e.features[i],t.features[n]),s&&a.features.push(e.features[i]);return a}},{"@turf/helpers":10,"@turf/inside":11}],14:[function(e,t){var o=Math.max,a=Math.atan,n=Math.PI,i=Math.round,s=Math.sin,r=Math.cos,l=Math.sqrt,p=Math.ceil,c=Math.LN2,u=Math.log,d=Math.abs,b=Math.min,m=Math.floor,y=Math.exp,_=Math.pow;(function(f,g){var e=Math.acos,h={version:"1.0.3"};"object"==typeof t&&"object"==typeof t.exports?t.exports=h:"function"==typeof define&&define.amd&&define(h),"undefined"!=typeof f&&function(){var e=f.L;h.noConflict=function(){return f.L=e,this},f.L=h}(),h.Util={extend:function(e){var t,o,r,a;for(o=1,r=arguments.length;o<r;o++)for(t in a=arguments[o],a)e[t]=a[t];return e},create:Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),bind:function(e,t){var o=Array.prototype.slice;if(e.bind)return e.bind.apply(e,o.call(arguments,1));var r=o.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(o.call(arguments)):arguments)}},stamp:function(e){return e._leaflet_id=e._leaflet_id||++h.Util.lastId,e._leaflet_id},lastId:0,throttle:function(e,t,o){var r,a,i,n;return n=function(){r=!1,a&&(i.apply(o,a),a=!1)},i=function(){r?a=arguments:(e.apply(o,arguments),setTimeout(n,t),r=!0)},i},wrapNum:function(e,t,o){var r=t[1],a=t[0],i=r-a;return e===r&&o?e:((e-a)%i+i)%i+a},falseFn:function(){return!1},formatNum:function(e,t){var o=_(10,t||5);return i(e*o)/o},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return h.Util.trim(e).split(/\s+/)},setOptions:function(e,t){for(var o in e.hasOwnProperty("options")||(e.options=e.options?h.Util.create(e.options):{}),t)e.options[o]=t[o];return e.options},getParamString:function(e,t,o){var r=[];for(var a in e)r.push(encodeURIComponent(o?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")},template:function(e,t){return e.replace(h.Util.templateRe,function(e,o){var r=t[o];if(r===void 0)throw new Error("No value provided for variable "+e);else"function"==typeof r&&(r=r(t));return r})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf:function(e,t){for(var o=0;o<e.length;o++)if(e[o]===t)return o;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){return f["webkit"+e]||f["moz"+e]||f["ms"+e]}function t(e){var t=+new Date,a=o(0,16-(t-r));return r=t+a,f.setTimeout(e,a)}var r=0,a=f.requestAnimationFrame||e("RequestAnimationFrame")||t,i=f.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){f.clearTimeout(e)};h.Util.requestAnimFrame=function(e,o,r){return r&&a===t?void e.call(o):a.call(f,h.bind(e,o))},h.Util.cancelAnimFrame=function(e){e&&i.call(f,e)}}(),h.extend=h.Util.extend,h.bind=h.Util.bind,h.stamp=h.Util.stamp,h.setOptions=h.Util.setOptions,h.Class=function(){},h.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=t.__super__=this.prototype,r=h.Util.create(o);for(var a in r.constructor=t,t.prototype=r,this)this.hasOwnProperty(a)&&"prototype"!=a&&(t[a]=this[a]);return e.statics&&(h.extend(t,e.statics),delete e.statics),e.includes&&(h.Util.extend.apply(null,[r].concat(e.includes)),delete e.includes),r.options&&(e.options=h.Util.extend(h.Util.create(r.options),e.options)),h.extend(r,e),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},t},h.Class.include=function(e){return h.extend(this.prototype,e),this},h.Class.mergeOptions=function(e){return h.extend(this.prototype.options,e),this},h.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),o="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this},h.Evented=h.Class.extend({on:function(e,t,o){if("object"==typeof e)for(var r in e)this._on(r,e[r],t);else{e=h.Util.splitWords(e);for(var a=0,i=e.length;a<i;a++)this._on(e[a],t,o)}return this},off:function(e,t,o){if(!e)delete this._events;else if("object"==typeof e)for(var r in e)this._off(r,e[r],t);else{e=h.Util.splitWords(e);for(var a=0,i=e.length;a<i;a++)this._off(e[a],t,o)}return this},_on:function(e,t,o){this._events=this._events||{};var r=this._events[e];r||(r=[],this._events[e]=r),o===this&&(o=void 0);for(var a={fn:t,ctx:o},n=r,s=0,i=n.length;s<i;s++)if(n[s].fn===t&&n[s].ctx===o)return;n.push(a)},_off:function(e,t,o){var r,a,i;if(this._events&&(r=this._events[e],!!r)){if(!t){for(a=0,i=r.length;a<i;a++)r[a].fn=h.Util.falseFn;return void delete this._events[e]}if(o===this&&(o=void 0),r)for(a=0,i=r.length;a<i;a++){var n=r[a];if(n.ctx===o&&n.fn===t)return n.fn=h.Util.falseFn,this._firingCount&&(this._events[e]=r=r.slice()),void r.splice(a,1)}}},fire:function(e,t,o){if(!this.listens(e,o))return this;var r=h.Util.extend({},t,{type:e,target:this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var n=0,i=a.length,s;n<i;n++)s=a[n],s.fn.call(s.ctx||this,r);this._firingCount--}}return o&&this._propagateEvent(r),this},listens:function(e,t){var o=this._events&&this._events[e];if(o&&o.length)return!0;if(t)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t))return!0;return!1},once:function(e,t,o){if("object"==typeof e){for(var r in e)this.once(r,e[r],t);return this}var a=h.bind(function(){this.off(e,t,o).off(e,a,o)},this);return this.on(e,t,o).on(e,a,o)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[h.stamp(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[h.stamp(e)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,h.extend({layer:t.target},t),!0)}});var v=h.Evented.prototype;v.addEventListener=v.on,v.removeEventListener=v.clearAllEventListeners=v.off,v.addOneTimeEventListener=v.once,v.fireEvent=v.fire,v.hasEventListeners=v.listens,h.Mixin={Events:v},function(){var e=navigator.userAgent.toLowerCase(),t=g.documentElement,o="ActiveXObject"in f,r=-1!==e.indexOf("webkit"),a=-1!==e.indexOf("phantom"),i=-1!==e.search("android [23]"),n=-1!==e.indexOf("chrome"),s=-1!==e.indexOf("gecko")&&!r&&!f.opera&&!o,l=0===navigator.platform.indexOf("Win"),p="undefined"!=typeof orientation||-1!==e.indexOf("mobile"),c=!f.PointerEvent&&f.MSPointerEvent,d=f.PointerEvent||c,u=o&&"transition"in t.style,b="WebKitCSSMatrix"in f&&"m11"in new f.WebKitCSSMatrix&&!i,m="MozPerspective"in t.style,y="OTransition"in t.style,_=!f.L_NO_TOUCH&&(d||"ontouchstart"in f||f.DocumentTouch&&g instanceof f.DocumentTouch);h.Browser={ie:o,ielt9:o&&!g.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in g),webkit:r,gecko:s,android:-1!==e.indexOf("android"),android23:i,chrome:n,safari:!n&&-1!==e.indexOf("safari"),win:l,ie3d:u,webkit3d:b,gecko3d:m,opera12:y,any3d:!f.L_DISABLE_3D&&(u||b||m)&&!y&&!a,mobile:p,mobileWebkit:p&&r,mobileWebkit3d:p&&b,mobileOpera:p&&f.opera,mobileGecko:p&&s,touch:!!_,msPointer:!!c,pointer:!!d,retina:1<(f.devicePixelRatio||f.screen.deviceXDPI/f.screen.logicalXDPI)}}(),h.Point=function(e,t,o){this.x=o?i(e):e,this.y=o?i(t):t},h.Point.prototype={clone:function(){return new h.Point(this.x,this.y)},add:function(e){return this.clone()._add(h.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(h.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new h.Point(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new h.Point(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=i(this.x),this.y=i(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=m(this.x),this.y=m(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=p(this.x),this.y=p(this.y),this},distanceTo:function(e){e=h.point(e);var t=e.x-this.x,o=e.y-this.y;return l(t*t+o*o)},equals:function(e){return e=h.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=h.point(e),d(e.x)<=d(this.x)&&d(e.y)<=d(this.y)},toString:function(){return"Point("+h.Util.formatNum(this.x)+", "+h.Util.formatNum(this.y)+")"}},h.point=function(e,t,o){return e instanceof h.Point?e:h.Util.isArray(e)?new h.Point(e[0],e[1]):void 0===e||null===e?e:"object"==typeof e&&"x"in e&&"y"in e?new h.Point(e.x,e.y):new h.Point(e,t,o)},h.Bounds=function(e,t){if(e)for(var o=t?[e,t]:e,r=0,a=o.length;r<a;r++)this.extend(o[r])},h.Bounds.prototype={extend:function(e){return e=h.point(e),this.min||this.max?(this.min.x=b(e.x,this.min.x),this.max.x=o(e.x,this.max.x),this.min.y=b(e.y,this.min.y),this.max.y=o(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new h.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new h.Point(this.min.x,this.max.y)},getTopRight:function(){return new h.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,o;return e="number"==typeof e[0]||e instanceof h.Point?h.point(e):h.bounds(e),e instanceof h.Bounds?(t=e.min,o=e.max):t=o=e,t.x>=this.min.x&&o.x<=this.max.x&&t.y>=this.min.y&&o.y<=this.max.y},intersects:function(e){e=h.bounds(e);var t=this.min,o=this.max,r=e.min,a=e.max,i=a.x>=t.x&&r.x<=o.x,n=a.y>=t.y&&r.y<=o.y;return i&&n},overlaps:function(e){e=h.bounds(e);var t=this.min,o=this.max,r=e.min,a=e.max,i=a.x>t.x&&r.x<o.x,n=a.y>t.y&&r.y<o.y;return i&&n},isValid:function(){return!!(this.min&&this.max)}},h.bounds=function(e,t){return!e||e instanceof h.Bounds?e:new h.Bounds(e,t)},h.Transformation=function(e,t,o,r){this._a=e,this._b=t,this._c=o,this._d=r},h.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new h.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},h.DomUtil={get:function(e){return"string"==typeof e?g.getElementById(e):e},getStyle:function(e,t){var o=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!o||"auto"===o)&&g.defaultView){var r=g.defaultView.getComputedStyle(e,null);o=r?r[t]:null}return"auto"===o?null:o},create:function(e,t,o){var r=g.createElement(e);return r.className=t||"",o&&o.appendChild(r),r},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},toFront:function(e){e.parentNode.appendChild(e)},toBack:function(e){var t=e.parentNode;t.insertBefore(e,t.firstChild)},hasClass:function(e,t){if(e.classList!==void 0)return e.classList.contains(t);var o=h.DomUtil.getClass(e);return 0<o.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(o)},addClass:function(e,t){if(e.classList!==void 0)for(var o=h.Util.splitWords(t),r=0,a=o.length;r<a;r++)e.classList.add(o[r]);else if(!h.DomUtil.hasClass(e,t)){var i=h.DomUtil.getClass(e);h.DomUtil.setClass(e,(i?i+" ":"")+t)}},removeClass:function(e,t){e.classList===void 0?h.DomUtil.setClass(e,h.Util.trim((" "+h.DomUtil.getClass(e)+" ").replace(" "+t+" "," "))):e.classList.remove(t)},setClass:function(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t},getClass:function(e){return e.className.baseVal===void 0?e.className:e.className.baseVal},setOpacity:function(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&h.DomUtil._setOpacityIE(e,t)},_setOpacityIE:function(e,t){var o=!1,r="DXImageTransform.Microsoft.Alpha";try{o=e.filters.item(r)}catch(o){if(1===t)return}t=i(100*t),o?(o.Enabled=100!==t,o.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"},testProp:function(e){for(var t=g.documentElement.style,o=0;o<e.length;o++)if(e[o]in t)return e[o];return!1},setTransform:function(e,t,o){var r=t||new h.Point(0,0);e.style[h.DomUtil.TRANSFORM]=(h.Browser.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(o?" scale("+o+")":"")},setPosition:function(e,t){e._leaflet_pos=t,h.Browser.any3d?h.DomUtil.setTransform(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos||new h.Point(0,0)}},function(){h.DomUtil.TRANSFORM=h.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var e=h.DomUtil.TRANSITION=h.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(h.DomUtil.TRANSITION_END="webkitTransition"===e||"OTransition"===e?e+"End":"transitionend","onselectstart"in g)h.DomUtil.disableTextSelection=function(){h.DomEvent.on(f,"selectstart",h.DomEvent.preventDefault)},h.DomUtil.enableTextSelection=function(){h.DomEvent.off(f,"selectstart",h.DomEvent.preventDefault)};else{var t=h.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);h.DomUtil.disableTextSelection=function(){if(t){var e=g.documentElement.style;this._userSelect=e[t],e[t]="none"}},h.DomUtil.enableTextSelection=function(){t&&(g.documentElement.style[t]=this._userSelect,delete this._userSelect)}}h.DomUtil.disableImageDrag=function(){h.DomEvent.on(f,"dragstart",h.DomEvent.preventDefault)},h.DomUtil.enableImageDrag=function(){h.DomEvent.off(f,"dragstart",h.DomEvent.preventDefault)},h.DomUtil.preventOutline=function(e){for(;-1===e.tabIndex;)e=e.parentNode;e&&e.style&&(h.DomUtil.restoreOutline(),this._outlineElement=e,this._outlineStyle=e.style.outline,e.style.outline="none",h.DomEvent.on(f,"keydown",h.DomUtil.restoreOutline,this))},h.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,h.DomEvent.off(f,"keydown",h.DomUtil.restoreOutline,this))}}(),h.LatLng=function(e,t,o){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,o!==void 0&&(this.alt=+o)},h.LatLng.prototype={equals:function(e,t){if(!e)return!1;e=h.latLng(e);var r=o(d(this.lat-e.lat),d(this.lng-e.lng));return r<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+h.Util.formatNum(this.lat,e)+", "+h.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){return h.CRS.Earth.distance(this,h.latLng(e))},wrap:function(){return h.CRS.Earth.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,o=t/r(n/180*this.lat);return h.latLngBounds([this.lat-t,this.lng-o],[this.lat+t,this.lng+o])},clone:function(){return new h.LatLng(this.lat,this.lng,this.alt)}},h.latLng=function(e,t,o){return e instanceof h.LatLng?e:h.Util.isArray(e)&&"object"!=typeof e[0]?3===e.length?new h.LatLng(e[0],e[1],e[2]):2===e.length?new h.LatLng(e[0],e[1]):null:void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new h.LatLng(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new h.LatLng(e,t,o)},h.LatLngBounds=function(e,t){if(e)for(var o=t?[e,t]:e,r=0,a=o.length;r<a;r++)this.extend(o[r])},h.LatLngBounds.prototype={extend:function(e){var t=this._southWest,r=this._northEast,a,i;if(e instanceof h.LatLng)a=e,i=e;else{if(!(e instanceof h.LatLngBounds))return e?this.extend(h.latLng(e)||h.latLngBounds(e)):this;if(a=e._southWest,i=e._northEast,!a||!i)return this}return t||r?(t.lat=b(a.lat,t.lat),t.lng=b(a.lng,t.lng),r.lat=o(i.lat,r.lat),r.lng=o(i.lng,r.lng)):(this._southWest=new h.LatLng(a.lat,a.lng),this._northEast=new h.LatLng(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,o=this._northEast,r=d(t.lat-o.lat)*e,a=d(t.lng-o.lng)*e;return new h.LatLngBounds(new h.LatLng(t.lat-r,t.lng-a),new h.LatLng(o.lat+r,o.lng+a))},getCenter:function(){return new h.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new h.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new h.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof h.LatLng||"lat"in e?h.latLng(e):h.latLngBounds(e);var t=this._southWest,o=this._northEast,r,a;return e instanceof h.LatLngBounds?(r=e.getSouthWest(),a=e.getNorthEast()):r=a=e,r.lat>=t.lat&&a.lat<=o.lat&&r.lng>=t.lng&&a.lng<=o.lng},intersects:function(e){e=h.latLngBounds(e);var t=this._southWest,o=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),i=a.lat>=t.lat&&r.lat<=o.lat,n=a.lng>=t.lng&&r.lng<=o.lng;return i&&n},overlaps:function(e){e=h.latLngBounds(e);var t=this._southWest,o=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),i=a.lat>t.lat&&r.lat<o.lat,n=a.lng>t.lng&&r.lng<o.lng;return i&&n},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return!!e&&(e=h.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast()))},isValid:function(){return!!(this._southWest&&this._northEast)}},h.latLngBounds=function(e,t){return e instanceof h.LatLngBounds?e:new h.LatLngBounds(e,t)},h.Projection={},h.Projection.LonLat={project:function(e){return new h.Point(e.lng,e.lat)},unproject:function(e){return new h.LatLng(e.y,e.x)},bounds:h.bounds([-180,-90],[180,90])},h.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=n/180,r=this.MAX_LATITUDE,a=o(b(r,e.lat),-r),i=s(a*t);return new h.Point(this.R*e.lng*t,this.R*u((1+i)/(1-i))/2)},unproject:function(e){var t=180/n;return new h.LatLng((2*a(y(e.y/this.R))-n/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*n;return h.bounds([-e,-e],[e,e])}()},h.CRS={latLngToPoint:function(e,t){var o=this.projection.project(e),r=this.scale(t);return this.transformation._transform(o,r)},pointToLatLng:function(e,t){var o=this.scale(t),r=this.transformation.untransform(e,o);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*_(2,e)},zoom:function(e){return u(e/256)/c},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,o=this.scale(e),r=this.transformation.transform(t.min,o),a=this.transformation.transform(t.max,o);return h.bounds(r,a)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?h.Util.wrapNum(e.lng,this.wrapLng,!0):e.lng,o=this.wrapLat?h.Util.wrapNum(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return h.latLng(o,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),o=this.wrapLatLng(t),r=t.lat-o.lat,a=t.lng-o.lng;if(0==r&&0==a)return e;var i=e.getSouthWest(),n=e.getNorthEast(),s=h.latLng({lat:i.lat-r,lng:i.lng-a}),l=h.latLng({lat:n.lat-r,lng:n.lng-a});return new h.LatLngBounds(s,l)}},h.CRS.Simple=h.extend({},h.CRS,{projection:h.Projection.LonLat,transformation:new h.Transformation(1,0,-1,0),scale:function(e){return _(2,e)},zoom:function(e){return u(e)/c},distance:function(e,t){var o=t.lng-e.lng,r=t.lat-e.lat;return l(o*o+r*r)},infinite:!0}),h.CRS.Earth=h.extend({},h.CRS,{wrapLng:[-180,180],R:6371000,distance:function(t,o){var i=n/180,l=t.lat*i,p=o.lat*i,c=s(l)*s(p)+r(l)*r(p)*r((o.lng-t.lng)*i);return this.R*e(b(c,1))}}),h.CRS.EPSG3857=h.extend({},h.CRS.Earth,{code:"EPSG:3857",projection:h.Projection.SphericalMercator,transformation:function(){var e=0.5/(n*h.Projection.SphericalMercator.R);return new h.Transformation(e,0.5,-e,0.5)}()}),h.CRS.EPSG900913=h.extend({},h.CRS.EPSG3857,{code:"EPSG:900913"}),h.CRS.EPSG4326=h.extend({},h.CRS.Earth,{code:"EPSG:4326",projection:h.Projection.LonLat,transformation:new h.Transformation(1/180,1,-1/180,0.5)}),h.Map=h.Evented.extend({options:{crs:h.CRS.EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=h.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=h.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(h.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=h.DomUtil.TRANSITION&&h.Browser.any3d&&!h.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),h.DomEvent.on(this._proxy,h.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,o){if(t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(h.latLng(e),t,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&!0!==o){void 0!==o.animate&&(o.zoom=h.extend({animate:o.animate},o.zoom),o.pan=h.extend({animate:o.animate,duration:o.duration},o.pan));var r=this._zoom===t?this._tryAnimatedPan(e,o.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,o.zoom);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(h.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(h.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,o){var r=this.getZoomScale(t),a=this.getSize().divideBy(2),i=e instanceof h.Point?e:this.latLngToContainerPoint(e),n=i.subtract(a).multiplyBy(1-1/r),s=this.containerPointToLatLng(a.add(n));return this.setView(s,t,{zoom:o})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():h.latLngBounds(e);var o=h.point(t.paddingTopLeft||t.padding||[0,0]),r=h.point(t.paddingBottomRight||t.padding||[0,0]),a=this.getBoundsZoom(e,!1,o.add(r));a="number"==typeof t.maxZoom?b(t.maxZoom,a):a;var i=r.subtract(o).divideBy(2),n=this.project(e.getSouthWest(),a),s=this.project(e.getNorthEast(),a),l=this.unproject(n.add(s).divideBy(2).add(i),a);return{center:l,zoom:a}},fitBounds:function(e,t){if(e=h.latLngBounds(e),!e.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(e,t);return this.setView(o.center,o.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=h.point(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new h.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){h.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,o,t.duration||0.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,a,t){function i(e){var t=e?-1:1,o=e?O:x,r=(O*O-x*x+t*P*P*w*w)/(2*o*P*w),a=l(r*r+1)-r,i=1e-9>a?-18:u(a);return i}function r(e){return(y(e)-y(-e))/2}function p(e){return(y(e)+y(-e))/2}function n(e){return r(e)/p(e)}function c(e){return x*(p(C)/p(C+T*e))}function d(e){return x*(p(C)*n(C+T*e)-r(C))/P}function b(e){return 1-_(1-e,1.5)}function m(){var o=(Date.now()-E)/S,t=b(o)*k;1>=o?(this._flyToFrame=h.Util.requestAnimFrame(m,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(d(t)/w)),v),this.getScaleZoom(x/c(t),v),{flyTo:!0})):this._move(e,a)._moveEnd(!0)}if(t=t||{},!1===t.animate||!h.Browser.any3d)return this.setView(e,a,t);this._stop();var f=this.project(this.getCenter()),g=this.project(e),s=this.getSize(),v=this._zoom;e=h.latLng(e),a=void 0===a?v:a;var x=o(s.x,s.y),O=x*this.getZoomScale(v,a),w=g.distanceTo(f)||1,T=1.42,P=T*T,C=i(0),E=Date.now(),k=(i(1)-C)/T,S=t.duration?1e3*t.duration:0.8*(1e3*k);return this._moveStart(!0),m.call(this),this},flyToBounds:function(e,t){var o=this._getBoundsCenterZoom(e,t);return this.flyTo(o.center,o.zoom,t)},setMaxBounds:function(e){return(e=h.latLngBounds(e),!e.isValid())?(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds)):(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){return this.options.minZoom=e,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(e):this},setMaxZoom:function(e){return this.options.maxZoom=e,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var o=this.getCenter(),r=this._limitCenter(o,this._zoom,h.latLngBounds(e));return o.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=h.extend({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=t.divideBy(2).round(),a=o.divideBy(2).round(),i=r.subtract(a);return i.x||i.y?(e.animate&&e.pan?this.panBy(i):(e.pan&&this._rawPanBy(i),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=h.extend({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=h.bind(this._handleGeolocationResponse,this),o=h.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,o,e):navigator.geolocation.getCurrentPosition(t,o,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,o=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+o+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,o=e.coords.longitude,r=new h.LatLng(t,o),a=r.toBounds(e.coords.accuracy),n=this._locateOptions;if(n.setView){var s=this.getBoundsZoom(a);this.setView(r,n.maxZoom?b(s,n.maxZoom):s)}var l={latlng:r,bounds:a,timestamp:e.timestamp};for(var p in e.coords)"number"==typeof e.coords[p]&&(l[p]=e.coords[p]);this.fire("locationfound",l)},addHandler:function(e,t){if(!t)return this;var o=this[e]=new t(this);return this._handlers.push(o),this.options[e]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(var e in h.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();return this},createPane:function(e,t){var o="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),r=h.DomUtil.create("div",o,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),o=this.unproject(e.getTopRight());return new h.LatLngBounds(t,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,r){e=h.latLngBounds(e),r=h.point(r||[0,0]);var a=this.getZoom()||0,n=this.getMinZoom(),s=this.getMaxZoom(),l=e.getNorthWest(),c=e.getSouthEast(),d=this.getSize().subtract(r),u=h.bounds(this.project(c,a),this.project(l,a)).getSize(),y=h.Browser.any3d?this.options.zoomSnap:1,_=b(d.x/u.x,d.y/u.y);return a=this.getScaleZoom(_,a),y&&(a=i(a/(y/100))*(y/100),a=t?p(a/y)*y:m(a/y)*y),o(n,b(s,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new h.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var o=this._getTopLeftPoint(e,t);return new h.Bounds(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var o=this.options.crs;return t=void 0===t?this._zoom:t,o.scale(e)/o.scale(t)},getScaleZoom:function(e,t){var o=this.options.crs;t=t===void 0?this._zoom:t;var r=o.zoom(e*o.scale(t));return isNaN(r)?Infinity:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(h.latLng(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(h.point(e),t)},layerPointToLatLng:function(e){var t=h.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(h.latLng(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(h.latLng(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(h.latLngBounds(e))},distance:function(e,t){return this.options.crs.distance(h.latLng(e),h.latLng(t))},containerPointToLayerPoint:function(e){return h.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return h.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(h.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(h.latLng(e)))},mouseEventToContainerPoint:function(t){return h.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(e){var t=this._container=h.DomUtil.get(e);if(!t)throw new Error("Map container not found.");else if(t._leaflet_id)throw new Error("Map container is already initialized.");h.DomEvent.addListener(t,"scroll",this._onScroll,this),this._containerId=h.Util.stamp(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&h.Browser.any3d,h.DomUtil.addClass(e,"leaflet-container"+(h.Browser.touch?" leaflet-touch":"")+(h.Browser.retina?" leaflet-retina":"")+(h.Browser.ielt9?" leaflet-oldie":"")+(h.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=h.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),h.DomUtil.setPosition(this._mapPane,new h.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(h.DomUtil.addClass(e.markerPane,"leaflet-zoom-hide"),h.DomUtil.addClass(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){h.DomUtil.setPosition(this._mapPane,new h.Point(0,0));var o=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r)._move(e,t)._moveEnd(r),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(e){return e&&this.fire("zoomstart"),this.fire("movestart")},_move:function(e,t,o){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(r||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return h.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){h.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(h.DomEvent){this._targets={},this._targets[h.stamp(this._container)]=this;var t=e?"off":"on";h.DomEvent[t](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&h.DomEvent[t](f,"resize",this._onResize,this),h.Browser.any3d&&this.options.transform3DLimit&&this[t]("moveend",this._onMoveEnd)}},_onResize:function(){h.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=h.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();o(d(e.x),d(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],r="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,i=!1,n;a;){if(n=this._targets[h.stamp(a)],n&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){i=!0;break}if(n&&n.listens(e,!0)){if(r&&!h.DomEvent._isExternalTarget(a,t))break;if(o.push(n),r)break}if(a===this._container)break;a=a.parentNode}return o.length||i||r||!h.DomEvent._isExternalTarget(a,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!h.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&h.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,o,r){if("click"===t.type){var a=h.Util.extend({},t);a.type="preclick",this._fireDOMEvent(a,a.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,o)),!!r.length)){var n=r[0];"contextmenu"===o&&n.listens(o,!0)&&h.DomEvent.preventDefault(t);var s={originalEvent:t};if("keypress"!==t.type){var l=n instanceof h.Marker;s.containerPoint=l?this.latLngToContainerPoint(n.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=l?n.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var p=0;p<r.length;p++)if(r[p].fire(o,s,!0),s.originalEvent._stopped||r[p].options.nonBubblingEvents&&-1!==h.Util.indexOf(r[p].options.nonBubblingEvents,o))return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return h.DomUtil.getPosition(this._mapPane)||new h.Point(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var o=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var o=this.getSize()._divideBy(2);return this.project(e,t)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,o){var r=this._getNewPixelOrigin(o,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,o){var r=this._getNewPixelOrigin(o,t);return h.bounds([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,o){if(!o)return e;var r=this.project(e,t),a=this.getSize().divideBy(2),i=new h.Bounds(r.subtract(a),r.add(a)),n=this._getBoundsOffset(i,o,t);return n.round().equals([0,0])?e:this.unproject(r.add(n),t)},_limitOffset:function(e,t){if(!t)return e;var o=this.getPixelBounds(),r=new h.Bounds(o.min.add(e),o.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,o){var r=h.bounds(this.project(t.getNorthEast(),o),this.project(t.getSouthWest(),o)),a=r.min.subtract(e.min),i=r.max.subtract(e.max),n=this._rebound(a.x,-i.x),s=this._rebound(a.y,-i.y);return new h.Point(n,s)},_rebound:function(e,t){return 0<e+t?i(e-t)/2:o(0,p(e))-o(0,m(t))},_limitZoom:function(e){var t=this.getMinZoom(),r=this.getMaxZoom(),a=h.Browser.any3d?this.options.zoomSnap:1;return a&&(e=i(e/a)*a),o(t,b(r,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){h.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var o=this._getCenterOffset(e)._floor();return(!0===(t&&t.animate)||this.getSize().contains(o))&&(this.panBy(o,t),!0)},_createAnimProxy:function(){var t=this._proxy=h.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var e=h.DomUtil.TRANSFORM,r=t.style[e];h.DomUtil.setTransform(t,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),r===t.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),o=this.getZoom();h.DomUtil.setTransform(t,this.project(e,o),this.getZoomScale(o,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||!1===o.animate||this._nothingToAnimate()||d(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),a=this._getCenterOffset(e)._divideBy(1-1/r);return(!0===o.animate||this.getSize().contains(a))&&(h.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,o,r){o&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,h.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),setTimeout(h.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(h.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),h.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),h.map=function(e,t){return new h.Map(e,t)},h.Layer=h.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[h.stamp(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[h.stamp(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),h.Map.include({addLayer:function(e){var t=h.stamp(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=h.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&h.stamp(e)in this._layers},eachLayer:function(e,t){for(var o in this._layers)e.call(t,this._layers[o]);return this},_addLayers:function(e){e=e?h.Util.isArray(e)?e:[e]:[];for(var t=0,o=e.length;t<o;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[h.stamp(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=h.stamp(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=Infinity,t=-Infinity,r=this._getZoomSpan();for(var a in this._zoomBoundLayers){var i=this._zoomBoundLayers[a].options;e=i.minZoom===void 0?e:b(e,i.minZoom),t=i.maxZoom===void 0?t:o(t,i.maxZoom)}this._layersMaxZoom=t===-Infinity?void 0:t,this._layersMinZoom=e===Infinity?void 0:e,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var x="_leaflet_events";h.DomEvent={on:function(e,t,o,r){if("object"==typeof t)for(var a in t)this._on(e,a,t[a],o);else{t=h.Util.splitWords(t);for(var n=0,i=t.length;n<i;n++)this._on(e,t[n],o,r)}return this},off:function(e,t,o,r){if("object"==typeof t)for(var a in t)this._off(e,a,t[a],o);else{t=h.Util.splitWords(t);for(var n=0,i=t.length;n<i;n++)this._off(e,t[n],o,r)}return this},_on:function(t,e,o,r){var a=e+h.stamp(o)+(r?"_"+h.stamp(r):"");if(t[x]&&t[x][a])return this;var i=function(a){return o.call(r||t,a||f.event)},n=i;return h.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,i,a):h.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&!(h.Browser.pointer&&h.Browser.chrome)?this.addDoubleTapListener(t,i,a):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",i,!1):"mouseenter"===e||"mouseleave"===e?(i=function(o){o=o||f.event,h.DomEvent._isExternalTarget(t,o)&&n(o)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",i,!1)):("click"===e&&h.Browser.android&&(i=function(t){return h.DomEvent._filterClick(t,n)}),t.addEventListener(e,i,!1)):"attachEvent"in t&&t.attachEvent("on"+e,i),t[x]=t[x]||{},t[x][a]=i,this},_off:function(e,t,o,r){var a=t+h.stamp(o)+(r?"_"+h.stamp(r):""),i=e[x]&&e[x][a];return i?(h.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,a):h.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,a):"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",i,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,i,!1):"detachEvent"in e&&e.detachEvent("on"+t,i),e[x][a]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,h.DomEvent._skipped(t),this},disableScrollPropagation:function(e){return h.DomEvent.on(e,"mousewheel",h.DomEvent.stopPropagation)},disableClickPropagation:function(e){var t=h.DomEvent.stopPropagation;return h.DomEvent.on(e,h.Draggable.START.join(" "),t),h.DomEvent.on(e,{click:h.DomEvent._fakeStop,dblclick:t})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return h.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new h.Point(t.clientX,t.clientY);var o=e.getBoundingClientRect();return new h.Point(t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop)},_wheelPxFactor:h.Browser.win&&h.Browser.chrome?2:h.Browser.gecko?f.devicePixelRatio:1,getWheelDelta:function(t){return h.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/h.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>d(t.detail)?20*-t.detail:t.detail?60*(t.detail/-32765):0},_skipEvents:{},_fakeStop:function(t){h.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,o){var e=o.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(e){return!1}return e!==t},_filterClick:function(t,e){var o=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=h.DomEvent._lastClick&&o-h.DomEvent._lastClick;return r&&100<r&&500>r||t.target._simulatedClick&&!t._simulated?void h.DomEvent.stop(t):void(h.DomEvent._lastClick=o,e(t))}},h.DomEvent.addListener=h.DomEvent.on,h.DomEvent.removeListener=h.DomEvent.off,h.PosAnimation=h.Evented.extend({run:function(e,t,r,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=r||0.25,this._easeOutPower=1/o(a||0.5,0.2),this._startPos=h.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=h.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,o=1e3*this._duration;t<o?this._runFrame(this._easeOut(t/o),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var o=this._startPos.add(this._offset.multiplyBy(e));t&&o._round(),h.DomUtil.setPosition(this._el,o),this.fire("step")},_complete:function(){h.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-_(1-e,this._easeOutPower)}}),h.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:h.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var a=n/180,i=this.R,p=t.lat*a,c=this.R_MINOR/i,d=l(1-c*c),e=d*s(p),b=Math.tan(n/4-p/2)/_((1-e)/(1+e),d/2);return p=-i*u(o(b,1e-10)),new h.Point(t.lng*a*i,p)},unproject:function(t){for(var o=180/n,p=this.R,r=this.R_MINOR/p,c=l(1-r*r),e=y(-t.y/p),u=n/2-2*a(e),b=0,i=0.1,m;15>b&&1e-7<d(i);b++)m=c*s(u),m=_((1-m)/(1+m),c/2),i=n/2-2*a(e*m)-u,u+=i;return new h.LatLng(u*o,t.x*o/p)}},h.CRS.EPSG3395=h.extend({},h.CRS.Earth,{code:"EPSG:3395",projection:h.Projection.Mercator,transformation:function(){var e=0.5/(n*h.Projection.Mercator.R);return new h.Transformation(e,0.5,-e,0.5)}()}),h.GridLayer=h.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:h.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){h.setOptions(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),h.DomUtil.remove(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(h.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(h.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(!this._onMove&&(this._onMove=h.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return g.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof h.Point?e:new h.Point(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,o=-e(-Infinity,Infinity),r=0,a=t.length,i;r<a;r++)i=t[r].style.zIndex,t[r]!==this._container&&i&&(o=e(o,+i));isFinite(o)&&(this.options.zIndex=o+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!h.Browser.ielt9){h.DomUtil.setOpacity(this._container,this.options.opacity);var e=+new Date,t=!1,o=!1;for(var r in this._tiles){var a=this._tiles[r];if(a.current&&a.loaded){var i=b(1,(e-a.loaded)/200);h.DomUtil.setOpacity(a.el,i),1>i?t=!0:(a.active&&(o=!0),a.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),t&&(h.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=h.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=h.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var o in this._levels)this._levels[o].el.children.length||o===e?this._levels[o].el.style.zIndex=t-d(e-o):(h.DomUtil.remove(this._levels[o].el),this._removeTilesAtZoom(o),delete this._levels[o]);var r=this._levels[e],a=this._map;return r||(r=this._levels[e]={},r.el=h.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=a.project(a.unproject(a.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,a.getCenter(),a.getZoom()),h.Util.falseFn(r.el.offsetWidth)),this._level=r,r}},_pruneTiles:function(){if(this._map){var e=this._map.getZoom(),t,o;if(e>this.options.maxZoom||e<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var r=o.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)h.DomUtil.remove(this._levels[e].el),delete this._levels[e];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(e,t,o,r){var a=m(e/2),i=m(t/2),n=o-1,s=new h.Point(+a,+i);s.z=+n;var l=this._tileCoordsToKey(s),p=this._tiles[l];return p&&p.active?(p.retain=!0,!0):(p&&p.loaded&&(p.retain=!0),!!(n>r)&&this._retainParent(a,i,n,r))},_retainChildren:function(e,t,o,r){for(var a=2*e;a<2*e+2;a++)for(var i=2*t,n;i<2*t+2;i++){n=new h.Point(a,i),n.z=o+1;var s=this._tileCoordsToKey(n),l=this._tiles[s];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);o+1<r&&this._retainChildren(a,i,o+1,r)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(e,t,o,r){var a=i(t);(this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom)&&(a=void 0);var n=this.options.updateWhenZooming&&a!==this._tileZoom;(!r||n)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(e),!o&&this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var o in this._levels)this._setZoomTransform(this._levels[o],e,t)},_setZoomTransform:function(e,t,o){var r=this._map.getZoomScale(o,e.zoom),a=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,o)).round();h.Browser.any3d?h.DomUtil.setTransform(e.el,a,r):h.DomUtil.setPosition(e.el,a)},_resetGrid:function(){var e=this._map,t=e.options.crs,o=this._tileSize=this.getTileSize(),r=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[m(e.project([0,t.wrapLng[0]],r).x/o.x),p(e.project([0,t.wrapLng[1]],r).x/o.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[m(e.project([t.wrapLat[0],0],r).y/o.x),p(e.project([t.wrapLat[1],0],r).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,r=t._animatingZoom?o(t._animateToZoom,t.getZoom()):t.getZoom(),a=t.getZoomScale(r,this._tileZoom),i=t.project(e,this._tileZoom).floor(),n=t.getSize().divideBy(2*a);return new h.Bounds(i.subtract(n),i.add(n))},_update:function(e){var t=this._map;if(t){var o=t.getZoom();if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),a=this._pxBoundsToTileRange(r),n=a.getCenter(),s=[],l=this.options.keepBuffer,p=new h.Bounds(a.getBottomLeft().subtract([l,-l]),a.getTopRight().add([l,-l]));for(var u in this._tiles){var b=this._tiles[u].coords;b.z===this._tileZoom&&p.contains(h.point(b.x,b.y))||(this._tiles[u].current=!1)}if(1<d(o-this._tileZoom))return void this._setView(e,o);for(var c=a.min.y;c<=a.max.y;c++)for(var m=a.min.x,i;m<=a.max.x;m++)if(i=new h.Point(m,c),i.z=this._tileZoom,!!this._isValidTile(i)){var y=this._tiles[this._tileCoordsToKey(i)];y?y.current=!0:s.push(i)}if(s.sort(function(e,t){return e.distanceTo(n)-t.distanceTo(n)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var _=g.createDocumentFragment();for(m=0;m<s.length;m++)this._addTile(s[m],_);this._level.el.appendChild(_)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var o=this._globalTileRange;if(!t.wrapLng&&(e.x<o.min.x||e.x>o.max.x)||!t.wrapLat&&(e.y<o.min.y||e.y>o.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return h.latLngBounds(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToBounds:function(e){var t=this._map,o=this.getTileSize(),r=e.scaleBy(o),a=r.add(o),i=t.unproject(r,e.z),n=t.unproject(a,e.z),s=new h.LatLngBounds(i,n);return this.options.noWrap||t.wrapLatLngBounds(s),s},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),o=new h.Point(+t[0],+t[1]);return o.z=+t[2],o},_removeTile:function(e){var t=this._tiles[e];t&&(h.DomUtil.remove(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){h.DomUtil.addClass(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=h.Util.falseFn,e.onmousemove=h.Util.falseFn,h.Browser.ielt9&&1>this.options.opacity&&h.DomUtil.setOpacity(e,this.options.opacity),h.Browser.android&&!h.Browser.android23&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var o=this._getTilePos(e),r=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),h.bind(this._tileReady,this,e));this._initTile(a),2>this.createTile.length&&h.Util.requestAnimFrame(h.bind(this._tileReady,this,e,null,a)),h.DomUtil.setPosition(a,o),this._tiles[r]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,o){if(this._map){t&&this.fire("tileerror",{error:t,tile:o,coords:e});var r=this._tileCoordsToKey(e);o=this._tiles[r],o&&(o.loaded=+new Date,this._map._fadeAnimated?(h.DomUtil.setOpacity(o.el,0),h.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=h.Util.requestAnimFrame(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),!t&&(h.DomUtil.addClass(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),h.Browser.ielt9||!this._map._fadeAnimated?h.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(h.bind(this._pruneTiles,this),250)))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new h.Point(this._wrapX?h.Util.wrapNum(e.x,this._wrapX):e.x,this._wrapY?h.Util.wrapNum(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new h.Bounds(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),h.gridLayer=function(e){return new h.GridLayer(e)},h.TileLayer=h.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=h.setOptions(this,t),t.detectRetina&&h.Browser.retina&&0<t.maxZoom&&(t.tileSize=m(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=o(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),h.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var o=g.createElement("img");return h.DomEvent.on(o,"load",h.bind(this._tileOnLoad,this,t,o)),h.DomEvent.on(o,"error",h.bind(this._tileOnError,this,t,o)),this.options.crossOrigin&&(o.crossOrigin=""),o.alt="",o.setAttribute("role","presentation"),o.src=this.getTileUrl(e),o},getTileUrl:function(e){var t={r:h.Browser.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=o),t["-y"]=o}return h.Util.template(this._url,h.extend(t,this.options))},_tileOnLoad:function(e,t){h.Browser.ielt9?setTimeout(h.bind(e,this,null,t),0):e(null,t)},_tileOnError:function(t,o,r){var e=this.options.errorTileUrl;e&&o.src!==e&&(o.src=e),t(r,o)},getTileSize:function(){var e=this._map,t=h.GridLayer.prototype.getTileSize.call(this),o=this._tileZoom+this.options.zoomOffset,r=this.options.minNativeZoom,a=this.options.maxNativeZoom;return null!==r&&o<r?t.divideBy(e.getZoomScale(r,o)).round():null!==a&&o>a?t.divideBy(e.getZoomScale(a,o)).round():t},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,o=this.options.zoomReverse,r=this.options.zoomOffset,a=this.options.minNativeZoom,i=this.options.maxNativeZoom;return o&&(e=t-e),e+=r,null!==a&&e<a?a:null!==i&&e>i?i:e},_getSubdomain:function(e){var t=d(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=h.Util.falseFn,t.onerror=h.Util.falseFn,t.complete||(t.src=h.Util.emptyImageUrl,h.DomUtil.remove(t)))}}),h.tileLayer=function(e,t){return new h.TileLayer(e,t)},h.TileLayer.WMS=h.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var o=h.extend({},this.defaultWmsParams);for(var r in t)r in this.options||(o[r]=t[r]);t=h.setOptions(this,t),o.width=o.height=t.tileSize*(t.detectRetina&&h.Browser.retina?2:1),this.wmsParams=o},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,h.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToBounds(e),o=this._crs.project(t.getNorthWest()),r=this._crs.project(t.getSouthEast()),a=(1.3<=this._wmsVersion&&this._crs===h.CRS.EPSG4326?[r.y,o.x,o.y,r.x]:[o.x,r.y,r.x,o.y]).join(","),i=h.TileLayer.prototype.getTileUrl.call(this,e);return i+h.Util.getParamString(this.wmsParams,i,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return h.extend(this.wmsParams,e),t||this.redraw(),this}}),h.tileLayer.wms=function(e,t){return new h.TileLayer.WMS(e,t)},h.ImageOverlay=h.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(e,t,o){this._url=e,this._bounds=h.latLngBounds(t),h.setOptions(this,o)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity()),this.options.interactive&&(h.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){h.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&h.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&h.DomUtil.toBack(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=e,this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._image=h.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));e.onselectstart=h.Util.falseFn,e.onmousemove=h.Util.falseFn,e.onload=h.bind(this.fire,this,"load"),this.options.crossOrigin&&(e.crossOrigin=""),e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;h.DomUtil.setTransform(this._image,o,e)},_reset:function(){var e=this._image,t=new h.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=t.getSize();h.DomUtil.setPosition(e,t.min),e.style.width=o.x+"px",e.style.height=o.y+"px"},_updateOpacity:function(){h.DomUtil.setOpacity(this._image,this.options.opacity)}}),h.imageOverlay=function(e,t,o){return new h.ImageOverlay(e,t,o)},h.Icon=h.Class.extend({initialize:function(e){h.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var o=this._getIconUrl(e);if(!o){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(o,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),r},_setIconStyles:function(e,t){var o=this.options,r=o[t+"Size"];"number"==typeof r&&(r=[r,r]);var a=h.point(r),i=h.point("shadow"===t&&o.shadowAnchor||o.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(o.className||""),i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return t=t||g.createElement("img"),t.src=e,t},_getIconUrl:function(e){return h.Browser.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),h.icon=function(e){return new h.Icon(e)},h.Icon.Default=h.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return h.Icon.Default.imagePath||(h.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||h.Icon.Default.imagePath)+h.Icon.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=h.DomUtil.create("div","leaflet-default-icon-path",g.body),t=h.DomUtil.getStyle(e,"background-image")||h.DomUtil.getStyle(e,"backgroundImage");return g.body.removeChild(e),0===t.indexOf("url")?t.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),h.Marker=h.Layer.extend({options:{icon:new h.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(e,t){h.setOptions(this,t),this._latlng=h.latLng(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=h.latLng(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=e.icon.createIcon(this._icon),r=!1;o!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(o.title=e.title),e.alt&&(o.alt=e.alt)),h.DomUtil.addClass(o,t),e.keyboard&&(o.tabIndex="0"),this._icon=o,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var a=e.icon.createShadow(this._shadow),i=!1;a!==this._shadow&&(this._removeShadow(),i=!0),a&&(h.DomUtil.addClass(a,t),a.alt=""),this._shadow=a,1>e.opacity&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&i&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),h.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&h.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(e){h.DomUtil.setPosition(this._icon,e),this._shadow&&h.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(h.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),h.Handler.MarkerDrag)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new h.Handler.MarkerDrag(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;h.DomUtil.setOpacity(this._icon,e),this._shadow&&h.DomUtil.setOpacity(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),h.marker=function(e,t){return new h.Marker(e,t)},h.DivIcon=h.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:g.createElement("div"),o=this.options;if(t.innerHTML=!1===o.html?"":o.html,o.bgPos){var r=h.point(o.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),h.divIcon=function(e){return new h.DivIcon(e)},h.DivOverlay=h.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){h.setOptions(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&h.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&h.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(h.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(h.bind(h.DomUtil.remove,h.DomUtil,this._container),200)):h.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=h.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&h.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&h.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=h.point(this.options.offset),o=this._getAnchor();this._zoomAnimated?h.DomUtil.setPosition(this._container,e.add(o)):t=t.add(e).add(o);var r=this._containerBottom=-t.y,a=this._containerLeft=-i(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}}),h.Popup=h.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){h.DivOverlay.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof h.Path)&&this._source.on("preclick",h.DomEvent.stopPropagation))},onRemove:function(e){h.DivOverlay.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),!(this._source instanceof h.Path)&&this._source.off("preclick",h.DomEvent.stopPropagation))},getEvents:function(){var e=h.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=h.DomUtil.create("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var o=this._closeButton=h.DomUtil.create("a",e+"-close-button",t);o.href="#close",o.innerHTML="&#215;",h.DomEvent.on(o,"click",this._onCloseButtonClick,this)}var r=this._wrapper=h.DomUtil.create("div",e+"-content-wrapper",t);this._contentNode=h.DomUtil.create("div",e+"-content",r),h.DomEvent.disableClickPropagation(r).disableScrollPropagation(this._contentNode).on(r,"contextmenu",h.DomEvent.stopPropagation),this._tipContainer=h.DomUtil.create("div",e+"-tip-container",t),this._tip=h.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var r=e.offsetWidth;r=b(r,this.options.maxWidth),r=o(r,this.options.minWidth),t.width=r+1+"px",t.whiteSpace="",t.height="";var a=e.offsetHeight,i=this.options.maxHeight,n="leaflet-popup-scrolled";i&&a>i?(t.height=i+"px",h.DomUtil.addClass(e,n)):h.DomUtil.removeClass(e,n),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();h.DomUtil.setPosition(this._container,e.add(o))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,t=parseInt(h.DomUtil.getStyle(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+t,r=this._containerWidth,a=new h.Point(this._containerLeft,-o-this._containerBottom);a._add(h.DomUtil.getPosition(this._container));var i=e.layerPointToContainerPoint(a),n=h.point(this.options.autoPanPadding),s=h.point(this.options.autoPanPaddingTopLeft||n),l=h.point(this.options.autoPanPaddingBottomRight||n),p=e.getSize(),c=0,d=0;i.x+r+l.x>p.x&&(c=i.x+r-p.x+l.x),0>i.x-c-s.x&&(c=i.x-s.x),i.y+o+l.y>p.y&&(d=i.y+o-p.y+l.y),0>i.y-d-s.y&&(d=i.y-s.y),(c||d)&&e.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),h.DomEvent.stop(t)},_getAnchor:function(){return h.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),h.popup=function(e,t){return new h.Popup(e,t)},h.Map.mergeOptions({closePopupOnClick:!0}),h.Map.include({openPopup:function(e,t,o){return(e instanceof h.Popup||(e=new h.Popup(o).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e))?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),h.Layer.include({bindPopup:function(e,t){return e instanceof h.Popup?(h.setOptions(e,t),this._popup=e,e._source=this):((!this._popup||t)&&(this._popup=new h.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof h.Layer||(t=e,e=this),e instanceof h.FeatureGroup)for(var o in this._layers){e=this._layers[o];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup)return this._map?(h.DomEvent.stop(t),e instanceof h.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))):void 0},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),h.Tooltip=h.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(e){h.DivOverlay.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){h.DivOverlay.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=h.DivOverlay.prototype.getEvents.call(this);return h.Browser.touch&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip"+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=h.DomUtil.create("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,o=this._container,r=t.latLngToContainerPoint(t.getCenter()),a=t.layerPointToContainerPoint(e),i=this.options.direction,n=o.offsetWidth,s=o.offsetHeight,l=h.point(this.options.offset),p=this._getAnchor();"top"===i?e=e.add(h.point(-n/2+l.x,-s+l.y+p.y,!0)):"bottom"===i?e=e.subtract(h.point(n/2-l.x,-l.y,!0)):"center"===i?e=e.subtract(h.point(n/2+l.x,s/2-p.y+l.y,!0)):"right"===i||"auto"===i&&a.x<r.x?(i="right",e=e.add(h.point(l.x+p.x,p.y-s/2+l.y,!0))):(i="left",e=e.subtract(h.point(n+p.x-l.x,s/2-p.y-l.y,!0))),h.DomUtil.removeClass(o,"leaflet-tooltip-right"),h.DomUtil.removeClass(o,"leaflet-tooltip-left"),h.DomUtil.removeClass(o,"leaflet-tooltip-top"),h.DomUtil.removeClass(o,"leaflet-tooltip-bottom"),h.DomUtil.addClass(o,"leaflet-tooltip-"+i),h.DomUtil.setPosition(o,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&h.DomUtil.setOpacity(this._container,e)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return h.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),h.tooltip=function(e,t){return new h.Tooltip(e,t)},h.Map.include({openTooltip:function(e,t,o){return e instanceof h.Tooltip||(e=new h.Tooltip(o).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),h.Layer.include({bindTooltip:function(e,t){return e instanceof h.Tooltip?(h.setOptions(e,t),this._tooltip=e,e._source=this):((!this._tooltip||t)&&(this._tooltip=h.tooltip(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),h.Browser.touch&&(o.click=this._openTooltip)),this[t](o),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){if(e instanceof h.Layer||(t=e,e=this),e instanceof h.FeatureGroup)for(var o in this._layers){e=this._layers[o];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(h.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(h.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng,o,r;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(e)}}),h.LayerGroup=h.Layer.extend({initialize:function(e){this._layers={};var t,o;if(e)for(t=0,o=e.length;t<o;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){for(var e in this._layers)this.removeLayer(this._layers[e]);return this},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),o,r;for(o in this._layers)r=this._layers[o],r[e]&&r[e].apply(r,t);return this},onAdd:function(e){for(var t in this._layers)e.addLayer(this._layers[t])},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t])},eachLayer:function(e,t){for(var o in this._layers)e.call(t,this._layers[o]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return h.stamp(e)}}),h.layerGroup=function(e){return new h.LayerGroup(e)},h.FeatureGroup=h.LayerGroup.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),h.LayerGroup.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),h.LayerGroup.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new h.LatLngBounds;for(var t in this._layers){var o=this._layers[t];e.extend(o.getBounds?o.getBounds():o.getLatLng())}return e}}),h.featureGroup=function(e){return new h.FeatureGroup(e)},h.Renderer=h.Layer.extend({options:{padding:0.1},initialize:function(e){h.setOptions(this,e),h.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&h.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){h.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var o=this._map.getZoomScale(t,this._zoom),r=h.DomUtil.getPosition(this._container),a=this._map.getSize().multiplyBy(0.5+this.options.padding),i=this._map.project(this._center,t),n=this._map.project(e,t),s=n.subtract(i),l=a.multiplyBy(-o).add(r).add(a).subtract(s);h.Browser.any3d?h.DomUtil.setTransform(this._container,l,o):h.DomUtil.setPosition(this._container,l)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),o=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new h.Bounds(o,o.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),h.Map.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this.options.preferCanvas&&h.canvas()||h.svg()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=h.SVG&&h.svg({pane:e})||h.Canvas&&h.canvas({pane:e}),this._paneRenderers[e]=t),t}}),h.Path=h.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return h.setOptions(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(h.Browser.touch?10:0)}}),h.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var o=t*t;return e=this._reducePoints(e,o),e=this._simplifyDP(e,o),e},pointToSegmentDistance:function(e,t,o){return l(this._sqClosestPointOnSegment(e,t,o,!0))},closestPointOnSegment:function(e,t,o){return this._sqClosestPointOnSegment(e,t,o)},_simplifyDP:function(e,t){var o=e.length,r=typeof Uint8Array==void 0+""?Array:Uint8Array,a=new r(o);a[0]=a[o-1]=1,this._simplifyDPStep(e,a,t,0,o-1);var n=[],s;for(s=0;s<o;s++)a[s]&&n.push(e[s]);return n},_simplifyDPStep:function(e,t,o,r,a){var n=0,s,l,i;for(l=r+1;l<=a-1;l++)i=this._sqClosestPointOnSegment(e[l],e[r],e[a],!0),i>n&&(s=l,n=i);n>o&&(t[s]=1,this._simplifyDPStep(e,t,o,r,s),this._simplifyDPStep(e,t,o,s,a))},_reducePoints:function(e,t){for(var o=[e[0]],r=1,a=0,i=e.length;r<i;r++)this._sqDist(e[r],e[a])>t&&(o.push(e[r]),a=r);return a<i-1&&o.push(e[i-1]),o},clipSegment:function(e,t,o,r,a){var i=r?this._lastCode:this._getBitCode(e,o),n=this._getBitCode(t,o),s,l,p;for(this._lastCode=n;;){if(!(i|n))return[e,t];if(i&n)return!1;s=i||n,l=this._getEdgeIntersection(e,t,s,o,a),p=this._getBitCode(l,o),s===i?(e=l,i=p):(t=l,n=p)}},_getEdgeIntersection:function(e,t,o,r,a){var i=t.x-e.x,n=t.y-e.y,s=r.min,l=r.max,p,c;return 8&o?(p=e.x+i*(l.y-e.y)/n,c=l.y):4&o?(p=e.x+i*(s.y-e.y)/n,c=s.y):2&o?(p=l.x,c=e.y+n*(l.x-e.x)/i):1&o&&(p=s.x,c=e.y+n*(s.x-e.x)/i),new h.Point(p,c,a)},_getBitCode:function(e,t){var o=0;return e.x<t.min.x?o|=1:e.x>t.max.x&&(o|=2),e.y<t.min.y?o|=4:e.y>t.max.y&&(o|=8),o},_sqDist:function(e,t){var o=t.x-e.x,r=t.y-e.y;return o*o+r*r},_sqClosestPointOnSegment:function(e,o,r,a){var i=o.x,n=o.y,s=r.x-i,l=r.y-n,p=s*s+l*l,c;return 0<p&&(c=((e.x-i)*s+(e.y-n)*l)/p,1<c?(i=r.x,n=r.y):0<c&&(i+=s*c,n+=l*c)),s=e.x-i,l=e.y-n,a?s*s+l*l:new h.Point(i,n)}},h.Polyline=h.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){h.setOptions(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=Infinity,o=null,r=h.LineUtil._sqClosestPointOnSegment,a=0,n=this._parts.length,s,p,c;a<n;a++){c=this._parts[a];for(var d=1,i=c.length;d<i;d++){s=c[d-1],p=c[d];var u=r(e,s,p,!0);u<t&&(t=u,o=r(e,s,p))}}return o&&(o.distance=l(t)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,o,r,a,i,n,s,l;if(!t)return null;for(o=0,r=0;o<t-1;o++)r+=e[o].distanceTo(e[o+1])/2;if(0===r)return this._map.layerPointToLatLng(e[0]);for(o=0,i=0;o<t-1;o++)if(n=e[o],s=e[o+1],a=n.distanceTo(s),i+=a,i>r)return l=(i-r)/a,this._map.layerPointToLatLng([s.x-l*(s.x-n.x),s.y-l*(s.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=h.latLng(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new h.LatLngBounds,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return h.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],o=h.Polyline._flat(e),r=0,a=e.length;r<a;r++)o?(t[r]=h.latLng(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new h.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),o=new h.Point(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(o),e.max._add(o),this._pxBounds=e)},_projectLatlngs:function(e,t,o){var r=e[0]instanceof h.LatLng,a=e.length,n,i;if(r){for(i=[],n=0;n<a;n++)i[n]=this._map.latLngToLayerPoint(e[n]),o.extend(i[n]);t.push(i)}else for(n=0;n<a;n++)this._projectLatlngs(e[n],t,o)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);var t=this._parts,o,r,a,i,n,s,l;for(o=0,a=0,i=this._rings.length;o<i;o++)for(l=this._rings[o],r=0,n=l.length;r<n-1;r++)(s=h.LineUtil.clipSegment(l[r],l[r+1],e,r,!0),!!s)&&(t[a]=t[a]||[],t[a].push(s[0]),(s[1]!==l[r+1]||r===n-2)&&(t[a].push(s[1]),a++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,o=0,r=e.length;o<r;o++)e[o]=h.LineUtil.simplify(e[o],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),h.polyline=function(e,t){return new h.Polyline(e,t)},h.Polyline._flat=function(e){return!h.Util.isArray(e[0])||"object"!=typeof e[0][0]&&"undefined"!=typeof e[0][0]},h.PolyUtil={},h.PolyUtil.clipPolygon=function(e,t,o){var r=[1,4,2,8],n=h.LineUtil,s,l,i,c,d,a,u,b,m;for(l=0,u=e.length;l<u;l++)e[l]._code=n._getBitCode(e[l],t);for(c=0;4>c;c++){for(b=r[c],s=[],(l=0,u=e.length,i=u-1);l<u;i=l++)d=e[l],a=e[i],d._code&b?!(a._code&b)&&(m=n._getEdgeIntersection(a,d,b,t,o),m._code=n._getBitCode(m,t),s.push(m)):(a._code&b&&(m=n._getEdgeIntersection(a,d,b,t,o),m._code=n._getBitCode(m,t),s.push(m)),s.push(d));e=s}return e},h.Polygon=h.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e=this._rings[0],t=e.length,o,r,a,i,n,s,l,p,c;if(!t)return null;for(s=l=p=0,o=0,r=t-1;o<t;r=o++)a=e[o],i=e[r],n=a.y*i.x-i.y*a.x,l+=(a.x+i.x)*n,p+=(a.y+i.y)*n,s+=3*n;return c=0===s?e[0]:[l/s,p/s],this._map.layerPointToLatLng(c)},_convertLatLngs:function(e){var t=h.Polyline.prototype._convertLatLngs.call(this,e),o=t.length;return 2<=o&&t[0]instanceof h.LatLng&&t[0].equals(t[o-1])&&t.pop(),t},_setLatLngs:function(e){h.Polyline.prototype._setLatLngs.call(this,e),h.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,o=new h.Point(t,t);if(e=new h.Bounds(e.min.subtract(o),e.max.add(o)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);for(var r=0,a=this._rings.length,i;r<a;r++)i=h.PolyUtil.clipPolygon(this._rings[r],e,!0),i.length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),h.polygon=function(e,t){return new h.Polygon(e,t)},h.Rectangle=h.Polygon.extend({initialize:function(e,t){h.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=h.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),h.rectangle=function(e,t){return new h.Rectangle(e,t)},h.CircleMarker=h.Path.extend({options:{fill:!0,radius:10},initialize:function(e,t){h.setOptions(this,t),this._latlng=h.latLng(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=h.latLng(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return h.Path.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,o=this._clickTolerance(),r=[e+o,t+o];this._pxBounds=new h.Bounds(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),h.circleMarker=function(e,t){return new h.CircleMarker(e,t)},h.Circle=h.CircleMarker.extend({initialize:function(e,t,o){if("number"==typeof t&&(t=h.extend({},o,{radius:t})),h.setOptions(this,t),this._latlng=h.latLng(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new h.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:h.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,a=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===h.CRS.Earth.distance){var u=n/180,d=this._mRadius/h.CRS.Earth.R/u,b=l.project([a+d,t]),m=l.project([a-d,t]),y=b.add(m).divideBy(2),p=l.unproject(y).lat,_=e((r(d*u)-s(a*u)*s(p*u))/(r(a*u)*r(p*u)))/u;(isNaN(_)||0==_)&&(_=d/r(n/180*a)),this._point=y.subtract(l.getPixelOrigin()),this._radius=isNaN(_)?0:o(i(y.x-l.project([p,t-_]).x),1),this._radiusY=o(i(y.y-b.y),1)}else{var f=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(f).x}this._updateBounds()}}),h.circle=function(e,t,o){return new h.Circle(e,t,o)},h.SVG=h.Renderer.extend({getEvents:function(){var e=h.Renderer.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=h.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=h.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){h.Renderer.prototype._update.call(this);var e=this._bounds,t=e.getSize(),o=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,o.setAttribute("width",t.x),o.setAttribute("height",t.y)),h.DomUtil.setPosition(o,e.min),o.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=h.SVG.create("path");e.options.className&&h.DomUtil.addClass(t,e.options.className),e.options.interactive&&h.DomUtil.addClass(t,"leaflet-interactive"),this._updateStyle(e),this._layers[h.stamp(e)]=e},_addPath:function(e){this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){h.DomUtil.remove(e._path),e.removeInteractiveTarget(e._path),delete this._layers[h.stamp(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,o=e.options;t&&(o.stroke?(t.setAttribute("stroke",o.color),t.setAttribute("stroke-opacity",o.opacity),t.setAttribute("stroke-width",o.weight),t.setAttribute("stroke-linecap",o.lineCap),t.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?t.setAttribute("stroke-dasharray",o.dashArray):t.removeAttribute("stroke-dasharray"),o.dashOffset?t.setAttribute("stroke-dashoffset",o.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),o.fill?(t.setAttribute("fill",o.fillColor||o.color),t.setAttribute("fill-opacity",o.fillOpacity),t.setAttribute("fill-rule",o.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,h.SVG.pointsToPath(e._parts,t))},_updateCircle:function(e){var t=e._point,o=e._radius,a=e._radiusY||o,i="a"+o+","+a+" 0 1,0 ",n=e._empty()?"M0 0":"M"+(t.x-o)+","+t.y+i+2*o+",0 "+i+2*-o+",0 ";this._setPath(e,n)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){h.DomUtil.toFront(e._path)},_bringToBack:function(e){h.DomUtil.toBack(e._path)}}),h.extend(h.SVG,{create:function(e){return g.createElementNS("http://www.w3.org/2000/svg",e)},pointsToPath:function(e,t){var o="",r,a,i,n,s,l;for(r=0,i=e.length;r<i;r++){for(s=e[r],a=0,n=s.length;a<n;a++)l=s[a],o+=(a?"L":"M")+l.x+" "+l.y;o+=t?h.Browser.svg?"z":"x":""}return o||"M0 0"}}),h.Browser.svg=!!(g.createElementNS&&h.SVG.create("svg").createSVGRect),h.svg=function(e){return h.Browser.svg||h.Browser.vml?new h.SVG(e):null},h.Browser.vml=!h.Browser.svg&&function(){try{var e=g.createElement("div");e.innerHTML="<v:shape adj=\"1\"/>";var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(t){return!1}}(),h.SVG.include(h.Browser.vml?{_initContainer:function(){this._container=h.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(h.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=h.SVG.create("shape");h.DomUtil.addClass(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=h.SVG.create("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[h.stamp(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;h.DomUtil.remove(t),e.removeInteractiveTarget(t),delete this._layers[h.stamp(e)]},_updateStyle:function(e){var t=e._stroke,o=e._fill,r=e.options,a=e._container;a.stroked=!!r.stroke,a.filled=!!r.fill,r.stroke?(!t&&(t=e._stroke=h.SVG.create("stroke")),a.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,t.dashStyle=r.dashArray?h.Util.isArray(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):"",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(a.removeChild(t),e._stroke=null),r.fill?(!o&&(o=e._fill=h.SVG.create("fill")),a.appendChild(o),o.color=r.fillColor||r.color,o.opacity=r.fillOpacity):o&&(a.removeChild(o),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),o=i(e._radius),r=i(e._radiusY||o);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+o+","+r+" 0,"+23592600)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){h.DomUtil.toFront(e._container)},_bringToBack:function(e){h.DomUtil.toBack(e._container)}}:{}),h.Browser.vml&&(h.SVG.create=function(){try{return g.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return g.createElement("<lvml:"+e+" class=\"lvml\">")}}catch(t){return function(e){return g.createElement("<"+e+" xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">")}}}()),h.Canvas=h.Renderer.extend({getEvents:function(){var e=h.Renderer.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){h.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=g.createElement("canvas");h.DomEvent.on(e,"mousemove",h.Util.throttle(this._onMouseMove,32,this),this).on(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){this._drawnLayers={},h.Renderer.prototype._update.call(this);var e=this._bounds,t=this._container,o=e.getSize(),r=h.Browser.retina?2:1;h.DomUtil.setPosition(t,e.min),t.width=r*o.x,t.height=r*o.y,t.style.width=o.x+"px",t.style.height=o.y+"px",h.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){h.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[h.stamp(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,o=t.next,r=t.prev;o?o.prev=r:this._drawLast=r,r?r.next=o:this._drawFirst=o,delete e._order,delete this._layers[h.stamp(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(e.options.dashArray){var t=e.options.dashArray.split(","),o=[],r;for(r=0;r<t.length;r++)o.push(+t[r]);e.options._dashArray=o}},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||h.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(e){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new h.Bounds,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e=this._redrawBounds,t;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var o=e._parts,r=o.length,a=this._ctx,n,i,s,l;if(r){for(this._drawnLayers[e._leaflet_id]=e,a.beginPath(),a.setLineDash&&a.setLineDash(e.options&&e.options._dashArray||[]),n=0;n<r;n++){for(i=0,s=o[n].length;i<s;i++)l=o[n][i],a[i?"lineTo":"moveTo"](l.x,l.y);t&&a.closePath()}this._fillStroke(a,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,o=this._ctx,a=e._radius,r=(e._radiusY||a)/a;this._drawnLayers[e._leaflet_id]=e,1!=r&&(o.save(),o.scale(1,r)),o.beginPath(),o.arc(t.x,t.y/r,a,0,2*n,!1),1!=r&&o.restore(),this._fillStroke(o,e)}},_fillStroke:function(e,t){var o=t.options;o.fill&&(e.globalAlpha=o.fillOpacity,e.fillStyle=o.fillColor||o.color,e.fill(o.fillRule||"evenodd")),o.stroke&&0!==o.weight&&(e.globalAlpha=o.opacity,e.lineWidth=o.weight,e.strokeStyle=o.color,e.lineCap=o.lineCap,e.lineJoin=o.lineJoin,e.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o=this._drawFirst,r,a;o;o=o.next)r=o.layer,r.options.interactive&&r._containsPoint(e)&&!this._map._draggableMoved(r)&&(a=r);a&&(h.DomEvent._fakeStop(t),this._fireEvent([a],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(h.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var o=this._drawFirst,r,a;o;o=o.next)r=o.layer,r.options.interactive&&r._containsPoint(e)&&(a=r);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(h.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,o,e){this._map._fireDOMEvent(o,e||o.type,t)},_bringToFront:function(e){var t=e._order,o=t.next,r=t.prev;if(o)o.prev=r;else return;r?r.next=o:o&&(this._drawFirst=o),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)},_bringToBack:function(e){var t=e._order,o=t.next,r=t.prev;if(r)r.next=o;else return;o?o.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}),h.Browser.canvas=function(){return!!g.createElement("canvas").getContext}(),h.canvas=function(e){return h.Browser.canvas?new h.Canvas(e):null},h.Polyline.prototype._containsPoint=function(e,t){var o=this._clickTolerance(),r,a,i,n,s,l;if(!this._pxBounds.contains(e))return!1;for(r=0,n=this._parts.length;r<n;r++)for(l=this._parts[r],a=0,s=l.length,i=s-1;a<s;i=a++)if((t||0!==a)&&h.LineUtil.pointToSegmentDistance(e,l[i],l[a])<=o)return!0;return!1},h.Polygon.prototype._containsPoint=function(e){var t=!1,o,r,a,n,i,s,l,p;if(!this._pxBounds.contains(e))return!1;for(n=0,l=this._parts.length;n<l;n++)for(o=this._parts[n],i=0,p=o.length,s=p-1;i<p;s=i++)r=o[i],a=o[s],r.y>e.y!=a.y>e.y&&e.x<(a.x-r.x)*(e.y-r.y)/(a.y-r.y)+r.x&&(t=!t);return t||h.Polyline.prototype._containsPoint.call(this,e,!0)},h.CircleMarker.prototype._containsPoint=function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()},h.GeoJSON=h.FeatureGroup.extend({initialize:function(e,t){h.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=h.Util.isArray(e)?e:e.features,o,r,a;if(t){for(o=0,r=t.length;o<r;o++)a=t[o],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var i=this.options;if(i.filter&&!i.filter(e))return this;var n=h.GeoJSON.geometryToLayer(e,i);return n?(n.feature=h.GeoJSON.asFeature(e),n.defaultOptions=n.options,this.resetStyle(n),i.onEachFeature&&i.onEachFeature(e,n),this.addLayer(n)):this},resetStyle:function(e){return e.options=h.Util.extend({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),h.extend(h.GeoJSON,{geometryToLayer:function(e,t){var o="Feature"===e.type?e.geometry:e,r=o?o.coordinates:null,a=[],n=t&&t.pointToLayer,s=t&&t.coordsToLatLng||this.coordsToLatLng,l,p,c,i;if(!r&&!o)return null;switch(o.type){case"Point":return l=s(r),n?n(e,l):new h.Marker(l);case"MultiPoint":for(c=0,i=r.length;c<i;c++)l=s(r[c]),a.push(n?n(e,l):new h.Marker(l));return new h.FeatureGroup(a);case"LineString":case"MultiLineString":return p=this.coordsToLatLngs(r,"LineString"===o.type?0:1,s),new h.Polyline(p,t);case"Polygon":case"MultiPolygon":return p=this.coordsToLatLngs(r,"Polygon"===o.type?1:2,s),new h.Polygon(p,t);case"GeometryCollection":for(c=0,i=o.geometries.length;c<i;c++){var d=this.geometryToLayer({geometry:o.geometries[c],type:"Feature",properties:e.properties},t);d&&a.push(d)}return new h.FeatureGroup(a);default:throw new Error("Invalid GeoJSON object.");}},coordsToLatLng:function(e){return new h.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,o){for(var r=[],a=0,i=e.length,n;a<i;a++)n=t?this.coordsToLatLngs(e[a],t-1,o):(o||this.coordsToLatLng)(e[a]),r.push(n);return r},latLngToCoords:function(e){return e.alt===void 0?[e.lng,e.lat]:[e.lng,e.lat,e.alt]},latLngsToCoords:function(e,t,o){for(var r=[],a=0,i=e.length;a<i;a++)r.push(t?h.GeoJSON.latLngsToCoords(e[a],t-1,o):h.GeoJSON.latLngToCoords(e[a]));return!t&&o&&r.push(r[0]),r},getFeature:function(e,t){return e.feature?h.extend({},e.feature,{geometry:t}):h.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var S={toGeoJSON:function(){return h.GeoJSON.getFeature(this,{type:"Point",coordinates:h.GeoJSON.latLngToCoords(this.getLatLng())})}};h.Marker.include(S),h.Circle.include(S),h.CircleMarker.include(S),h.Polyline.prototype.toGeoJSON=function(){var e=!h.Polyline._flat(this._latlngs),t=h.GeoJSON.latLngsToCoords(this._latlngs,e?1:0);return h.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"LineString",coordinates:t})},h.Polygon.prototype.toGeoJSON=function(){var e=!h.Polyline._flat(this._latlngs),t=e&&!h.Polyline._flat(this._latlngs[0]),o=h.GeoJSON.latLngsToCoords(this._latlngs,t?2:e?1:0,!0);return e||(o=[o]),h.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"Polygon",coordinates:o})},h.LayerGroup.include({toMultiPoint:function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),h.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint();var t="GeometryCollection"===e,o=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON();o.push(t?r.geometry:h.GeoJSON.asFeature(r))}}),t?h.GeoJSON.getFeature(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}}),h.geoJSON=function(e,t){return new h.GeoJSON(e,t)},h.geoJson=h.geoJSON,h.Draggable=h.Evented.extend({options:{clickTolerance:3},statics:{START:h.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t,o){this._element=e,this._dragStartTarget=t||e,this._preventOutline=o},enable:function(){this._enabled||(h.DomEvent.on(this._dragStartTarget,h.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(h.Draggable._dragging===this&&this.finishDrag(),h.DomEvent.off(this._dragStartTarget,h.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!h.DomUtil.hasClass(this._element,"leaflet-zoom-anim"))&&!(h.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(h.Draggable._dragging=this,this._preventOutline&&h.DomUtil.preventOutline(this._element),h.DomUtil.disableImageDrag(),h.DomUtil.disableTextSelection(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new h.Point(e.clientX,e.clientY),h.DomEvent.on(g,h.Draggable.MOVE[t.type],this._onMove,this).on(g,h.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&1<t.touches.length)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,o=new h.Point(e.clientX,e.clientY),r=o.subtract(this._startPoint);(r.x||r.y)&&!(d(r.x)+d(r.y)<this.options.clickTolerance)&&(h.DomEvent.preventDefault(t),!this._moved&&(this.fire("dragstart"),this._moved=!0,this._startPos=h.DomUtil.getPosition(this._element).subtract(r),h.DomUtil.addClass(g.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,f.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),h.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,h.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=h.Util.requestAnimFrame(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),h.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var e in h.DomUtil.removeClass(g.body,"leaflet-dragging"),this._lastTarget&&(h.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),h.Draggable.MOVE)h.DomEvent.off(g,h.Draggable.MOVE[e],this._onMove,this).off(g,h.Draggable.END[e],this._onUp,this);h.DomUtil.enableImageDrag(),h.DomUtil.enableTextSelection(),this._moved&&this._moving&&(h.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,h.Draggable._dragging=!1}}),h.Handler=h.Class.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),h.Map.mergeOptions({dragging:!0,inertia:!h.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0}),h.Map.Drag=h.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new h.Draggable(e._mapPane,e._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}h.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){h.DomUtil.removeClass(this._map._container,"leaflet-grab"),h.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var e=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=h.latLngBounds(this._map.options.maxBounds);this._offsetLimit=h.bounds(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=b(1,o(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),50<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=i(e/2),o=this._initialWorldOffset,r=this._draggable._newPos.x,a=(r-t+o)%e+t-o,n=(r+t+o)%e-t-o,s=d(a+o)<d(n+o)?a:n;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,o=e.options,r=!o.inertia||2>this._times.length;if(e.fire("dragend",t),r)e.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),i=(this._lastTime-this._times[0])/1e3,n=o.easeLinearity,s=a.multiplyBy(n/i),l=s.distanceTo([0,0]),p=b(o.inertiaMaxSpeed,l),c=s.multiplyBy(p/l),d=p/(o.inertiaDeceleration*n),u=c.multiplyBy(-d/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),h.Util.requestAnimFrame(function(){e.panBy(u,{duration:d,easeLinearity:n,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),h.Map.addInitHook("addHandler","dragging",h.Map.Drag),h.Map.mergeOptions({doubleClickZoom:!0}),h.Map.DoubleClickZoom=h.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),r=e.options.zoomDelta,a=t.originalEvent.shiftKey?o-r:o+r;"center"===e.options.doubleClickZoom?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}}),h.Map.addInitHook("addHandler","doubleClickZoom",h.Map.DoubleClickZoom),h.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),h.Map.ScrollWheelZoom=h.Handler.extend({addHooks:function(){h.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){h.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=h.DomEvent.getWheelDelta(t),r=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=o(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h.bind(this._performZoom,this),a),h.DomEvent.stop(t)},_performZoom:function(){var e=this._map,t=e.getZoom(),o=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),a=4*u(2/(1+y(-d(r))))/c,i=o?p(a/o)*o:a,n=e._limitZoom(t+(0<this._delta?i:-i))-t;this._delta=0,this._startTime=null;n&&("center"===e.options.scrollWheelZoom?e.setZoom(t+n):e.setZoomAround(this._lastMousePos,t+n))}}),h.Map.addInitHook("addHandler","scrollWheelZoom",h.Map.ScrollWheelZoom),h.extend(h.DomEvent,{_touchstart:h.Browser.msPointer?"MSPointerDown":h.Browser.pointer?"pointerdown":"touchstart",_touchend:h.Browser.msPointer?"MSPointerUp":h.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,t,o){function r(t){var e;if(h.Browser.pointer){if(!h.Browser.edge||"mouse"===t.pointerType)return;e=h.DomEvent._pointersCount}else e=t.touches.length;if(!(1<e)){var o=Date.now(),r=o-(c||o);d=t.touches?t.touches[0]:t,n=0<r&&r<=i,c=o}}function a(o){if(n&&!d.cancelBubble){if(h.Browser.pointer){if(!h.Browser.edge||"mouse"===o.pointerType)return;var e={},r,a;for(a in d)r=d[a],e[a]=r&&r.bind?r.bind(d):r;d=e}d.type="dblclick",t(d),c=null}}var n=!1,i=250,s="_leaflet_",l=this._touchstart,p=this._touchend,c,d;return e[s+l+o]=r,e[s+p+o]=a,e[s+"dblclick"+o]=t,e.addEventListener(l,r,!1),e.addEventListener(p,a,!1),e.addEventListener("dblclick",t,!1),this},removeDoubleTapListener:function(e,t){var o="_leaflet_",r=e[o+this._touchstart+t],a=e[o+this._touchend+t],i=e[o+"dblclick"+t];return e.removeEventListener(this._touchstart,r,!1),e.removeEventListener(this._touchend,a,!1),h.Browser.edge||e.removeEventListener("dblclick",i,!1),this}}),h.extend(h.DomEvent,{POINTER_DOWN:h.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:h.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:h.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:h.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(e,t,o,r){return"touchstart"===t?this._addPointerStart(e,o,r):"touchmove"===t?this._addPointerMove(e,o,r):"touchend"===t&&this._addPointerEnd(e,o,r),this},removePointerListener:function(e,t,o){var r=e["_leaflet_"+t+o];return"touchstart"===t?e.removeEventListener(this.POINTER_DOWN,r,!1):"touchmove"===t?e.removeEventListener(this.POINTER_MOVE,r,!1):"touchend"===t&&(e.removeEventListener(this.POINTER_UP,r,!1),e.removeEventListener(this.POINTER_CANCEL,r,!1)),this},_addPointerStart:function(e,t,o){var r=h.bind(function(o){if("mouse"!==o.pointerType&&o.MSPOINTER_TYPE_MOUSE&&o.pointerType!==o.MSPOINTER_TYPE_MOUSE)if(0>this.TAG_WHITE_LIST.indexOf(o.target.tagName))h.DomEvent.preventDefault(o);else return;this._handlePointer(o,t)},this);if(e["_leaflet_touchstart"+o]=r,e.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocListener){var a=h.bind(this._globalPointerUp,this);g.documentElement.addEventListener(this.POINTER_DOWN,h.bind(this._globalPointerDown,this),!0),g.documentElement.addEventListener(this.POINTER_MOVE,h.bind(this._globalPointerMove,this),!0),g.documentElement.addEventListener(this.POINTER_UP,a,!0),g.documentElement.addEventListener(this.POINTER_CANCEL,a,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){for(var o in t.touches=[],this._pointers)t.touches.push(this._pointers[o]);t.changedTouches=[t],e(t)},_addPointerMove:function(e,t,o){var r=h.bind(function(o){(o.pointerType===o.MSPOINTER_TYPE_MOUSE||"mouse"===o.pointerType)&&0===o.buttons||this._handlePointer(o,t)},this);e["_leaflet_touchmove"+o]=r,e.addEventListener(this.POINTER_MOVE,r,!1)},_addPointerEnd:function(e,t,o){var r=h.bind(function(o){this._handlePointer(o,t)},this);e["_leaflet_touchend"+o]=r,e.addEventListener(this.POINTER_UP,r,!1),e.addEventListener(this.POINTER_CANCEL,r,!1)}}),h.Map.mergeOptions({touchZoom:h.Browser.touch&&!h.Browser.android23,bounceAtZoomLimits:!0}),h.Map.TouchZoom=h.Handler.extend({addHooks:function(){h.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),h.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){h.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),h.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||2!==t.touches.length||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(r)._divideBy(2))),this._startDist=o.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),h.DomEvent.on(g,"touchmove",this._onTouchMove,this).on(g,"touchend",this._onTouchEnd,this),h.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),a=o.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>a||this._zoom>e.getMaxZoom()&&1<a)&&(this._zoom=e._limitZoom(this._zoom)),"center"!==e.options.touchZoom){var i=o._add(r)._divideBy(2)._subtract(this._centerPoint);if(1==a&&0===i.x&&0===i.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}else if(this._center=this._startLatLng,1==a)return;this._moved||(e._moveStart(!0),this._moved=!0),h.Util.cancelAnimFrame(this._animRequest);var n=h.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=h.Util.requestAnimFrame(n,this,!0),h.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?void(this._zooming=!1,h.Util.cancelAnimFrame(this._animRequest),h.DomEvent.off(g,"touchmove",this._onTouchMove).off(g,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):void(this._zooming=!1)}}),h.Map.addInitHook("addHandler","touchZoom",h.Map.TouchZoom),h.Map.mergeOptions({tap:!0,tapTolerance:15}),h.Map.Tap=h.Handler.extend({addHooks:function(){h.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){h.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(h.DomEvent.preventDefault(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],o=e.target;this._startPos=this._newPos=new h.Point(e.clientX,e.clientY),o.tagName&&"a"===o.tagName.toLowerCase()&&h.DomUtil.addClass(o,"leaflet-active"),this._holdTimeout=setTimeout(h.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),h.DomEvent.on(g,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),h.DomEvent.off(g,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],o=e.target;o&&o.tagName&&"a"===o.tagName.toLowerCase()&&h.DomUtil.removeClass(o,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new h.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,o){var e=g.createEvent("MouseEvents");e._simulated=!0,o.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,f,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(e)}}),h.Browser.touch&&!h.Browser.pointer&&h.Map.addInitHook("addHandler","tap",h.Map.Tap),h.Map.mergeOptions({boxZoom:!0}),h.Map.BoxZoom=h.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){h.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){h.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return t.shiftKey&&(1===t.which||1===t.button)&&void(this._resetState(),h.DomUtil.disableTextSelection(),h.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),h.DomEvent.on(g,{contextmenu:h.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=h.DomUtil.create("div","leaflet-zoom-box",this._container),h.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new h.Bounds(this._point,this._startPoint),o=e.getSize();h.DomUtil.setPosition(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(h.DomUtil.remove(this._box),h.DomUtil.removeClass(this._container,"leaflet-crosshair")),h.DomUtil.enableTextSelection(),h.DomUtil.enableImageDrag(),h.DomEvent.off(g,{contextmenu:h.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),!!this._moved)){setTimeout(h.bind(this._resetState,this),0);var e=new h.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),h.Map.addInitHook("addHandler","boxZoom",h.Map.BoxZoom),h.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),h.Map.Keyboard=h.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;0>=e.tabIndex&&(e.tabIndex="0"),h.DomEvent.on(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),h.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=g.body,t=g.documentElement,o=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),f.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},o=this.keyCodes,r,a;for(r=0,a=o.left.length;r<a;r++)t[o.left[r]]=[-1*e,0];for(r=0,a=o.right.length;r<a;r++)t[o.right[r]]=[e,0];for(r=0,a=o.down.length;r<a;r++)t[o.down[r]]=[0,e];for(r=0,a=o.up.length;r<a;r++)t[o.up[r]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},o=this.keyCodes,r,a;for(r=0,a=o.zoomIn.length;r<a;r++)t[o.zoomIn[r]]=e;for(r=0,a=o.zoomOut.length;r<a;r++)t[o.zoomOut[r]]=-e},_addHooks:function(){h.DomEvent.on(g,"keydown",this._onKeyDown,this)},_removeHooks:function(){h.DomEvent.off(g,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,r;if(e in this._panKeys){if(o._panAnim&&o._panAnim._inProgress)return;r=this._panKeys[e],t.shiftKey&&(r=h.point(r).multiplyBy(3)),o.panBy(r),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(27===e)o.closePopup();else return;h.DomEvent.stop(t)}}}),h.Map.addInitHook("addHandler","keyboard",h.Map.Keyboard),h.Handler.MarkerDrag=h.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new h.Draggable(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),h.DomUtil.addClass(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&h.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,o=e._shadow,r=h.DomUtil.getPosition(e._icon),a=e._map.layerPointToLatLng(r);o&&h.DomUtil.setPosition(o,r),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),h.Control=h.Class.extend({options:{position:"topright"},initialize:function(e){h.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),o=this.getPosition(),r=e._controlCorners[o];return h.DomUtil.addClass(t,"leaflet-control"),-1===o.indexOf("bottom")?r.appendChild(t):r.insertBefore(t,r.firstChild),this},remove:function(){return this._map?(h.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),h.control=function(e){return new h.Control(e)},h.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,a){t[e+a]=h.DomUtil.create("div",o+e+" "+o+a,r)}var t=this._controlCorners={},o="leaflet-",r=this._controlContainer=h.DomUtil.create("div",o+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){h.DomUtil.remove(this._controlContainer)}}),h.Control.Zoom=h.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",o=h.DomUtil.create("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",o,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(e,t,o,r,a){var i=h.DomUtil.create("a",o,r);return i.innerHTML=e,i.href="#",i.title=t,i.setAttribute("role","button"),i.setAttribute("aria-label",t),h.DomEvent.on(i,"mousedown dblclick",h.DomEvent.stopPropagation).on(i,"click",h.DomEvent.stop).on(i,"click",a,this).on(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";h.DomUtil.removeClass(this._zoomInButton,t),h.DomUtil.removeClass(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&h.DomUtil.addClass(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&h.DomUtil.addClass(this._zoomInButton,t)}}),h.Map.mergeOptions({zoomControl:!0}),h.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new h.Control.Zoom,this.addControl(this.zoomControl))}),h.control.zoom=function(e){return new h.Control.Zoom(e)},h.Control.Attribution=h.Control.extend({options:{position:"bottomright",prefix:"<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>"},initialize:function(e){h.setOptions(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=h.DomUtil.create("div","leaflet-control-attribution"),h.DomEvent&&h.DomEvent.disableClickPropagation(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var o=[];this.options.prefix&&o.push(this.options.prefix),e.length&&o.push(e.join(", ")),this._container.innerHTML=o.join(" | ")}}}),h.Map.mergeOptions({attributionControl:!0}),h.Map.addInitHook(function(){this.options.attributionControl&&new h.Control.Attribution().addTo(this)}),h.control.attribution=function(e){return new h.Control.Attribution(e)},h.Control.Scale=h.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",o=h.DomUtil.create("div",t),r=this.options;return this._addScales(r,t+"-line",o),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),o},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,o){e.metric&&(this._mScale=h.DomUtil.create("div",t,o)),e.imperial&&(this._iScale=h.DomUtil.create("div",t,o))},_update:function(){var e=this._map,t=e.getSize().y/2,o=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(o)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),o=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,o,t/e)},_updateImperial:function(e){var t=3.2808399*e,o,r,a;5280<t?(o=t/5280,r=this._getRoundNum(o),this._updateScale(this._iScale,r+" mi",r/o)):(a=this._getRoundNum(t),this._updateScale(this._iScale,a+" ft",a/t))},_updateScale:function(e,t,o){e.style.width=i(this.options.maxWidth*o)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=_(10,(m(e)+"").length-1),o=e/t;return o=10<=o?10:5<=o?5:3<=o?3:2<=o?2:1,t*o}}),h.control.scale=function(e){return new h.Control.Scale(e)},h.Control.Layers=h.Control.extend({options:{collapsed:!0,position:"topright",// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,o,r){return o<r?-1:r<o?1:0}},initialize:function(e,t,o){for(var r in h.setOptions(this,o),this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){return this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(h.stamp(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){h.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._form.clientHeight?(h.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):h.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return h.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=h.DomUtil.create("div",e),o=this.options.collapsed;t.setAttribute("aria-haspopup",!0),h.DomEvent.disableClickPropagation(t),h.Browser.touch||h.DomEvent.disableScrollPropagation(t);var r=this._form=h.DomUtil.create("form",e+"-list");o&&(this._map.on("click",this.collapse,this),!h.Browser.android&&h.DomEvent.on(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var a=this._layersLink=h.DomUtil.create("a",e+"-toggle",t);a.href="#",a.title="Layers",h.Browser.touch?h.DomEvent.on(a,"click",h.DomEvent.stop).on(a,"click",this.expand,this):h.DomEvent.on(a,"focus",this.expand,this),h.DomEvent.on(r,"click",function(){setTimeout(h.bind(this._onInputClick,this),0)},this),o||this.expand(),this._baseLayersList=h.DomUtil.create("div",e+"-base",r),this._separator=h.DomUtil.create("div",e+"-separator",r),this._overlaysList=h.DomUtil.create("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&h.stamp(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,o){e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:o}),this.options.sortLayers&&this._layers.sort(h.bind(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;h.DomUtil.empty(this._baseLayersList),h.DomUtil.empty(this._overlaysList);var e=0,t,o,r,a;for(r=0;r<this._layers.length;r++)a=this._layers[r],this._addItem(a),o=o||a.overlay,t=t||!a.overlay,e+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<e,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(h.stamp(t.target)),o=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(e,t){var o="<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\""+e+"\""+(t?" checked=\"checked\"":"")+"/>",r=g.createElement("div");return r.innerHTML=o,r.firstChild},_addItem:function(e){var t=g.createElement("label"),o=this._map.hasLayer(e.layer),r;e.overlay?(r=g.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=o):r=this._createRadioElement("leaflet-base-layers",o),r.layerId=h.stamp(e.layer),h.DomEvent.on(r,"click",this._onInputClick,this);var a=g.createElement("span");a.innerHTML=" "+e.name;var i=g.createElement("div");t.appendChild(i),i.appendChild(r),i.appendChild(a);var n=e.overlay?this._overlaysList:this._baseLayersList;return n.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){var e=this._form.getElementsByTagName("input"),t=[],o=[],r,a,n;this._handlingClick=!0;for(var s=e.length-1;0<=s;s--)r=e[s],a=this._getLayer(r.layerId).layer,n=this._map.hasLayer(a),r.checked&&!n?t.push(a):!r.checked&&n&&o.push(a);for(s=0;s<o.length;s++)this._map.removeLayer(o[s]);for(s=0;s<t.length;s++)this._map.addLayer(t[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e=this._form.getElementsByTagName("input"),t=this._map.getZoom(),o=e.length-1,r,a;0<=o;o--)r=e[o],a=this._getLayer(r.layerId).layer,r.disabled=void 0!==a.options.minZoom&&t<a.options.minZoom||void 0!==a.options.maxZoom&&t>a.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),h.control.layers=function(e,t,o){return new h.Control.Layers(e,t,o)}})(window,document)},{}],15:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./Subject"),i=e("./Subscription"),n=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return r(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),i.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),i.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(a.Subject);o.AsyncSubject=n},{"./Subject":25,"./Subscription":28}],16:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./Subject"),i=e("./util/ObjectUnsubscribedError"),n=function(e){function t(t){e.call(this),this._value=t}return r(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var o=e.prototype._subscribe.call(this,t);return o&&!o.closed&&t.next(this._value),o},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;else if(this.closed)throw new i.ObjectUnsubscribedError;else return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(a.Subject);o.BehaviorSubject=n},{"./Subject":25,"./util/ObjectUnsubscribedError":339}],17:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./Subscriber"),i=function(e){function t(t,o,r){e.call(this),this.parent=t,this.outerValue=o,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(a.Subscriber);o.InnerSubscriber=i},{"./Subscriber":27}],18:[function(e,t,o){"use strict";var r=e("./Observable"),a=function(){function e(e,t,o){this.kind=e,this.value=t,this.error=o,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete();}},e.prototype.do=function(e,t,o){var r=this.kind;return"N"===r?e&&e(this.value):"E"===r?t&&t(this.error):"C"===r?o&&o():void 0},e.prototype.accept=function(e,t,o){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,o)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty();}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"==typeof t?e.undefinedValueNotification:new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();o.Notification=a},{"./Observable":19}],19:[function(e,t,o){"use strict";var r=e("./util/root"),a=e("./util/toSubscriber"),i=e("./symbol/observable"),n=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var o=new e;return o.source=this,o.operator=t,o},e.prototype.subscribe=function(e,t,o){var r=this.operator,i=a.toSubscriber(e,t,o);if(r?r.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var o=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var a=o.subscribe(function(t){if(a)try{e(t)}catch(e){r(e),a.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[i.observable]=function(){return this},e.create=function(t){return new e(t)},e}();o.Observable=n},{"./symbol/observable":325,"./util/root":356,"./util/toSubscriber":358}],20:[function(e,t,o){"use strict";o.empty={closed:!0,next:function(){},error:function(e){throw e},complete:function(){}}},{}],21:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./Subscriber"),i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(a.Subscriber);o.OuterSubscriber=i},{"./Subscriber":27}],22:[function(e,t,o){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("./Subject"),n=e("./scheduler/queue"),s=e("./Subscription"),l=e("./operator/observeOn"),p=e("./util/ObjectUnsubscribedError"),c=e("./SubjectSubscription"),d=function(e){function t(t,o,a){void 0===t&&(t=r),void 0===o&&(o=r),e.call(this),this.scheduler=a,this._events=[],this._bufferSize=1>t?1:t,this._windowTime=1>o?1:o}return a(t,e),t.prototype.next=function(t){var o=this._getNow();this._events.push(new u(o,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._trimBufferThenGetEvents(),o=this.scheduler,r;if(this.closed)throw new p.ObjectUnsubscribedError;else this.hasError?r=s.Subscription.EMPTY:this.isStopped?r=s.Subscription.EMPTY:(this.observers.push(e),r=new c.SubjectSubscription(this,e));o&&e.add(e=new l.ObserveOnSubscriber(e,o));for(var a=t.length,n=0;n<a&&!e.closed;n++)e.next(t[n].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r},t.prototype._getNow=function(){return(this.scheduler||n.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,o=this._windowTime,r=this._events,a=r.length,i=0;i<a&&!(e-r[i].time<o);)i++;return a>t&&(i=Math.max(i,a-t)),0<i&&r.splice(0,i),r},t}(i.Subject);o.ReplaySubject=d;var u=function(){return function(e,t){this.time=e,this.value=t}}()},{"./Subject":25,"./SubjectSubscription":26,"./Subscription":28,"./operator/observeOn":259,"./scheduler/queue":323,"./util/ObjectUnsubscribedError":339}],23:[function(e,t,o){"use strict";var r=e("./Subject");o.Subject=r.Subject,o.AnonymousSubject=r.AnonymousSubject;var a=e("./Observable");o.Observable=a.Observable,e("./add/observable/bindCallback"),e("./add/observable/bindNodeCallback"),e("./add/observable/combineLatest"),e("./add/observable/concat"),e("./add/observable/defer"),e("./add/observable/empty"),e("./add/observable/forkJoin"),e("./add/observable/from"),e("./add/observable/fromEvent"),e("./add/observable/fromEventPattern"),e("./add/observable/fromPromise"),e("./add/observable/generate"),e("./add/observable/if"),e("./add/observable/interval"),e("./add/observable/merge"),e("./add/observable/race"),e("./add/observable/never"),e("./add/observable/of"),e("./add/observable/onErrorResumeNext"),e("./add/observable/pairs"),e("./add/observable/range"),e("./add/observable/using"),e("./add/observable/throw"),e("./add/observable/timer"),e("./add/observable/zip"),e("./add/observable/dom/ajax"),e("./add/observable/dom/webSocket"),e("./add/operator/buffer"),e("./add/operator/bufferCount"),e("./add/operator/bufferTime"),e("./add/operator/bufferToggle"),e("./add/operator/bufferWhen"),e("./add/operator/catch"),e("./add/operator/combineAll"),e("./add/operator/combineLatest"),e("./add/operator/concat"),e("./add/operator/concatAll"),e("./add/operator/concatMap"),e("./add/operator/concatMapTo"),e("./add/operator/count"),e("./add/operator/dematerialize"),e("./add/operator/debounce"),e("./add/operator/debounceTime"),e("./add/operator/defaultIfEmpty"),e("./add/operator/delay"),e("./add/operator/delayWhen"),e("./add/operator/distinct"),e("./add/operator/distinctUntilChanged"),e("./add/operator/distinctUntilKeyChanged"),e("./add/operator/do"),e("./add/operator/exhaust"),e("./add/operator/exhaustMap"),e("./add/operator/expand"),e("./add/operator/elementAt"),e("./add/operator/filter"),e("./add/operator/finally"),e("./add/operator/find"),e("./add/operator/findIndex"),e("./add/operator/first"),e("./add/operator/groupBy"),e("./add/operator/ignoreElements"),e("./add/operator/isEmpty"),e("./add/operator/audit"),e("./add/operator/auditTime"),e("./add/operator/last"),e("./add/operator/let"),e("./add/operator/every"),e("./add/operator/map"),e("./add/operator/mapTo"),e("./add/operator/materialize"),e("./add/operator/max"),e("./add/operator/merge"),e("./add/operator/mergeAll"),e("./add/operator/mergeMap"),e("./add/operator/mergeMapTo"),e("./add/operator/mergeScan"),e("./add/operator/min"),e("./add/operator/multicast"),e("./add/operator/observeOn"),e("./add/operator/onErrorResumeNext"),e("./add/operator/pairwise"),e("./add/operator/partition"),e("./add/operator/pluck"),e("./add/operator/publish"),e("./add/operator/publishBehavior"),e("./add/operator/publishReplay"),e("./add/operator/publishLast"),e("./add/operator/race"),e("./add/operator/reduce"),e("./add/operator/repeat"),e("./add/operator/repeatWhen"),e("./add/operator/retry"),e("./add/operator/retryWhen"),e("./add/operator/sample"),e("./add/operator/sampleTime"),e("./add/operator/scan"),e("./add/operator/sequenceEqual"),e("./add/operator/share"),e("./add/operator/shareReplay"),e("./add/operator/single"),e("./add/operator/skip"),e("./add/operator/skipLast"),e("./add/operator/skipUntil"),e("./add/operator/skipWhile"),e("./add/operator/startWith"),e("./add/operator/subscribeOn"),e("./add/operator/switch"),e("./add/operator/switchMap"),e("./add/operator/switchMapTo"),e("./add/operator/take"),e("./add/operator/takeLast"),e("./add/operator/takeUntil"),e("./add/operator/takeWhile"),e("./add/operator/throttle"),e("./add/operator/throttleTime"),e("./add/operator/timeInterval"),e("./add/operator/timeout"),e("./add/operator/timeoutWith"),e("./add/operator/timestamp"),e("./add/operator/toArray"),e("./add/operator/toPromise"),e("./add/operator/window"),e("./add/operator/windowCount"),e("./add/operator/windowTime"),e("./add/operator/windowToggle"),e("./add/operator/windowWhen"),e("./add/operator/withLatestFrom"),e("./add/operator/zip"),e("./add/operator/zipAll");var i=e("./Subscription");o.Subscription=i.Subscription;var n=e("./Subscriber");o.Subscriber=n.Subscriber;var s=e("./AsyncSubject");o.AsyncSubject=s.AsyncSubject;var l=e("./ReplaySubject");o.ReplaySubject=l.ReplaySubject;var p=e("./BehaviorSubject");o.BehaviorSubject=p.BehaviorSubject;var c=e("./observable/ConnectableObservable");o.ConnectableObservable=c.ConnectableObservable;var d=e("./Notification");o.Notification=d.Notification;var u=e("./util/EmptyError");o.EmptyError=u.EmptyError;var b=e("./util/ArgumentOutOfRangeError");o.ArgumentOutOfRangeError=b.ArgumentOutOfRangeError;var m=e("./util/ObjectUnsubscribedError");o.ObjectUnsubscribedError=m.ObjectUnsubscribedError;var y=e("./util/TimeoutError");o.TimeoutError=y.TimeoutError;var _=e("./util/UnsubscriptionError");o.UnsubscriptionError=_.UnsubscriptionError;var f=e("./operator/timeInterval");o.TimeInterval=f.TimeInterval;var g=e("./operator/timestamp");o.Timestamp=g.Timestamp;var h=e("./testing/TestScheduler");o.TestScheduler=h.TestScheduler;var v=e("./scheduler/VirtualTimeScheduler");o.VirtualTimeScheduler=v.VirtualTimeScheduler;var x=e("./observable/dom/AjaxObservable");o.AjaxResponse=x.AjaxResponse,o.AjaxError=x.AjaxError,o.AjaxTimeoutError=x.AjaxTimeoutError;var S=e("./scheduler/asap"),O=e("./scheduler/async"),w=e("./scheduler/queue"),T=e("./scheduler/animationFrame"),P=e("./symbol/rxSubscriber"),C=e("./symbol/iterator"),E=e("./symbol/observable"),k={asap:S.asap,queue:w.queue,animationFrame:T.animationFrame,async:O.async};o.Scheduler=k;var A={rxSubscriber:P.rxSubscriber,observable:E.observable,iterator:C.iterator};o.Symbol=A},{"./AsyncSubject":15,"./BehaviorSubject":16,"./Notification":18,"./Observable":19,"./ReplaySubject":22,"./Subject":25,"./Subscriber":27,"./Subscription":28,"./add/observable/bindCallback":29,"./add/observable/bindNodeCallback":30,"./add/observable/combineLatest":31,"./add/observable/concat":32,"./add/observable/defer":33,"./add/observable/dom/ajax":34,"./add/observable/dom/webSocket":35,"./add/observable/empty":36,"./add/observable/forkJoin":37,"./add/observable/from":38,"./add/observable/fromEvent":39,"./add/observable/fromEventPattern":40,"./add/observable/fromPromise":41,"./add/observable/generate":42,"./add/observable/if":43,"./add/observable/interval":44,"./add/observable/merge":45,"./add/observable/never":46,"./add/observable/of":47,"./add/observable/onErrorResumeNext":48,"./add/observable/pairs":49,"./add/observable/race":50,"./add/observable/range":51,"./add/observable/throw":52,"./add/observable/timer":53,"./add/observable/using":54,"./add/observable/zip":55,"./add/operator/audit":56,"./add/operator/auditTime":57,"./add/operator/buffer":58,"./add/operator/bufferCount":59,"./add/operator/bufferTime":60,"./add/operator/bufferToggle":61,"./add/operator/bufferWhen":62,"./add/operator/catch":63,"./add/operator/combineAll":64,"./add/operator/combineLatest":65,"./add/operator/concat":66,"./add/operator/concatAll":67,"./add/operator/concatMap":68,"./add/operator/concatMapTo":69,"./add/operator/count":70,"./add/operator/debounce":71,"./add/operator/debounceTime":72,"./add/operator/defaultIfEmpty":73,"./add/operator/delay":74,"./add/operator/delayWhen":75,"./add/operator/dematerialize":76,"./add/operator/distinct":77,"./add/operator/distinctUntilChanged":78,"./add/operator/distinctUntilKeyChanged":79,"./add/operator/do":80,"./add/operator/elementAt":81,"./add/operator/every":82,"./add/operator/exhaust":83,"./add/operator/exhaustMap":84,"./add/operator/expand":85,"./add/operator/filter":86,"./add/operator/finally":87,"./add/operator/find":88,"./add/operator/findIndex":89,"./add/operator/first":90,"./add/operator/groupBy":91,"./add/operator/ignoreElements":92,"./add/operator/isEmpty":93,"./add/operator/last":94,"./add/operator/let":95,"./add/operator/map":96,"./add/operator/mapTo":97,"./add/operator/materialize":98,"./add/operator/max":99,"./add/operator/merge":100,"./add/operator/mergeAll":101,"./add/operator/mergeMap":102,"./add/operator/mergeMapTo":103,"./add/operator/mergeScan":104,"./add/operator/min":105,"./add/operator/multicast":106,"./add/operator/observeOn":107,"./add/operator/onErrorResumeNext":108,"./add/operator/pairwise":109,"./add/operator/partition":110,"./add/operator/pluck":111,"./add/operator/publish":112,"./add/operator/publishBehavior":113,"./add/operator/publishLast":114,"./add/operator/publishReplay":115,"./add/operator/race":116,"./add/operator/reduce":117,"./add/operator/repeat":118,"./add/operator/repeatWhen":119,"./add/operator/retry":120,"./add/operator/retryWhen":121,"./add/operator/sample":122,"./add/operator/sampleTime":123,"./add/operator/scan":124,"./add/operator/sequenceEqual":125,"./add/operator/share":126,"./add/operator/shareReplay":127,"./add/operator/single":128,"./add/operator/skip":129,"./add/operator/skipLast":130,"./add/operator/skipUntil":131,"./add/operator/skipWhile":132,"./add/operator/startWith":133,"./add/operator/subscribeOn":134,"./add/operator/switch":135,"./add/operator/switchMap":136,"./add/operator/switchMapTo":137,"./add/operator/take":138,"./add/operator/takeLast":139,"./add/operator/takeUntil":140,"./add/operator/takeWhile":141,"./add/operator/throttle":142,"./add/operator/throttleTime":143,"./add/operator/timeInterval":144,"./add/operator/timeout":145,"./add/operator/timeoutWith":146,"./add/operator/timestamp":147,"./add/operator/toArray":148,"./add/operator/toPromise":149,"./add/operator/window":150,"./add/operator/windowCount":151,"./add/operator/windowTime":152,"./add/operator/windowToggle":153,"./add/operator/windowWhen":154,"./add/operator/withLatestFrom":155,"./add/operator/zip":156,"./add/operator/zipAll":157,"./observable/ConnectableObservable":162,"./observable/dom/AjaxObservable":187,"./operator/timeInterval":296,"./operator/timestamp":299,"./scheduler/VirtualTimeScheduler":319,"./scheduler/animationFrame":320,"./scheduler/asap":321,"./scheduler/async":322,"./scheduler/queue":323,"./symbol/iterator":324,"./symbol/observable":325,"./symbol/rxSubscriber":326,"./testing/TestScheduler":331,"./util/ArgumentOutOfRangeError":333,"./util/EmptyError":334,"./util/ObjectUnsubscribedError":339,"./util/TimeoutError":341,"./util/UnsubscriptionError":342}],24:[function(e,t,o){"use strict";var r=function(){function e(t,o){void 0===o&&(o=e.now),this.SchedulerAction=t,this.now=o}return e.prototype.schedule=function(e,t,o){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(o,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();o.Scheduler=r},{}],25:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./Observable"),i=e("./Subscriber"),n=e("./Subscription"),s=e("./util/ObjectUnsubscribedError"),l=e("./SubjectSubscription"),p=e("./symbol/rxSubscriber"),c=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(i.Subscriber);o.SubjectSubscriber=c;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[p.rxSubscriber]=function(){return new c(this)},t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,o=t.length,r=t.slice(),a=0;a<o;a++)r[a].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,o=t.length,r=t.slice(),a=0;a<o;a++)r[a].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,o=e.slice(),r=0;r<t;r++)o[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;else return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;else return this.hasError?(e.error(this.thrownError),n.Subscription.EMPTY):this.isStopped?(e.complete(),n.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new a.Observable;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(a.Observable);o.Subject=d;var u=function(e){function t(t,o){e.call(this),this.destination=t,this.source=o}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):n.Subscription.EMPTY},t}(d);o.AnonymousSubject=u},{"./Observable":19,"./SubjectSubscription":26,"./Subscriber":27,"./Subscription":28,"./symbol/rxSubscriber":326,"./util/ObjectUnsubscribedError":339}],26:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./Subscription"),i=function(e){function t(t,o){e.call(this),this.subject=t,this.subscriber=o,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,!(!t||0===t.length||e.isStopped||e.closed)){var o=t.indexOf(this.subscriber);-1!==o&&t.splice(o,1)}}},t}(a.Subscription);o.SubjectSubscription=i},{"./Subscription":28}],27:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./util/isFunction"),i=e("./Subscription"),n=e("./Observer"),s=e("./symbol/rxSubscriber"),l=function(e){function t(o,r,a){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=n.empty;break;case 1:if(!o){this.destination=n.empty;break}if("object"==typeof o){o instanceof t?(this.destination=o,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,o));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,o,r,a);}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,o,r){var a=new t(e,o,r);return a.syncErrorThrowable=!1,a},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,o=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=o,this},t}(i.Subscription);o.Subscriber=l;var p=function(e){function t(t,o,r,i){e.call(this),this._parentSubscriber=t;var s=this,l;a.isFunction(o)?l=o:o&&(l=o.next,r=o.error,i=o.complete,o!==n.empty&&(s=Object.create(o),a.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=l,this._error=r,this._complete=i}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(!t.syncErrorThrowable)throw this.unsubscribe(),e;else t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var o=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,o),this.unsubscribe()):(this.__tryOrUnsub(o),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,o){try{t.call(this._context,o)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)},{"./Observer":20,"./Subscription":28,"./symbol/rxSubscriber":326,"./util/isFunction":349}],28:[function(e,t,o){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof p.UnsubscriptionError?t.errors:t)},[])}var a=e("./util/isArray"),i=e("./util/isObject"),n=e("./util/isFunction"),s=e("./util/tryCatch"),l=e("./util/errorObject"),p=e("./util/UnsubscriptionError"),c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var o=this,c=o._parent,d=o._parents,u=o._unsubscribe,b=o._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var m=-1,y=d?d.length:0;c;)c.remove(this),c=++m<y&&d[m]||null;if(n.isFunction(u)){var _=s.tryCatch(u).call(this);_===l.errorObject&&(e=!0,t=t||(l.errorObject.e instanceof p.UnsubscriptionError?r(l.errorObject.e.errors):[l.errorObject.e]))}if(a.isArray(b))for(m=-1,y=b.length;++m<y;){var f=b[m];if(i.isObject(f)){var _=s.tryCatch(f.unsubscribe).call(f);if(_===l.errorObject){e=!0,t=t||[];var g=l.errorObject.e;g instanceof p.UnsubscriptionError?t=t.concat(r(g.errors)):t.push(g)}}}if(e)throw new p.UnsubscriptionError(t)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var o=t;switch(typeof t){case"function":o=new e(t);case"object":if(o.closed||"function"!=typeof o.unsubscribe)return o;if(this.closed)return o.unsubscribe(),o;if("function"!=typeof o._addParent){var r=o;o=new e,o._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.");}var a=this._subscriptions||(this._subscriptions=[]);return a.push(o),o._addParent(this),o},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var o=t.indexOf(e);-1!==o&&t.splice(o,1)}},e.prototype._addParent=function(e){var t=this,o=t._parent,r=t._parents;o&&o!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();o.Subscription=c},{"./util/UnsubscriptionError":342,"./util/errorObject":345,"./util/isArray":346,"./util/isFunction":349,"./util/isObject":351,"./util/tryCatch":359}],29:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/bindCallback");t.Observable.bindCallback=o.bindCallback},{"../../Observable":19,"../../observable/bindCallback":182}],30:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/bindNodeCallback");t.Observable.bindNodeCallback=o.bindNodeCallback},{"../../Observable":19,"../../observable/bindNodeCallback":183}],31:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/combineLatest");t.Observable.combineLatest=o.combineLatest},{"../../Observable":19,"../../observable/combineLatest":184}],32:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/concat");t.Observable.concat=o.concat},{"../../Observable":19,"../../observable/concat":185}],33:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/defer");t.Observable.defer=o.defer},{"../../Observable":19,"../../observable/defer":186}],34:[function(e){"use strict";var t=e("../../../Observable"),o=e("../../../observable/dom/ajax");t.Observable.ajax=o.ajax},{"../../../Observable":19,"../../../observable/dom/ajax":189}],35:[function(e){"use strict";var t=e("../../../Observable"),o=e("../../../observable/dom/webSocket");t.Observable.webSocket=o.webSocket},{"../../../Observable":19,"../../../observable/dom/webSocket":190}],36:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/empty");t.Observable.empty=o.empty},{"../../Observable":19,"../../observable/empty":191}],37:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/forkJoin");t.Observable.forkJoin=o.forkJoin},{"../../Observable":19,"../../observable/forkJoin":192}],38:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/from");t.Observable.from=o.from},{"../../Observable":19,"../../observable/from":193}],39:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/fromEvent");t.Observable.fromEvent=o.fromEvent},{"../../Observable":19,"../../observable/fromEvent":194}],40:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/fromEventPattern");t.Observable.fromEventPattern=o.fromEventPattern},{"../../Observable":19,"../../observable/fromEventPattern":195}],41:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/fromPromise");t.Observable.fromPromise=o.fromPromise},{"../../Observable":19,"../../observable/fromPromise":196}],42:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/GenerateObservable");t.Observable.generate=o.GenerateObservable.create},{"../../Observable":19,"../../observable/GenerateObservable":170}],43:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/if");t.Observable.if=o._if},{"../../Observable":19,"../../observable/if":197}],44:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/interval");t.Observable.interval=o.interval},{"../../Observable":19,"../../observable/interval":198}],45:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/merge");t.Observable.merge=o.merge},{"../../Observable":19,"../../observable/merge":199}],46:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/never");t.Observable.never=o.never},{"../../Observable":19,"../../observable/never":200}],47:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/of");t.Observable.of=o.of},{"../../Observable":19,"../../observable/of":201}],48:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/onErrorResumeNext");t.Observable.onErrorResumeNext=o.onErrorResumeNextStatic},{"../../Observable":19,"../../operator/onErrorResumeNext":260}],49:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/pairs");t.Observable.pairs=o.pairs},{"../../Observable":19,"../../observable/pairs":202}],50:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/race");t.Observable.race=o.raceStatic},{"../../Observable":19,"../../operator/race":268}],51:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/range");t.Observable.range=o.range},{"../../Observable":19,"../../observable/range":203}],52:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/throw");t.Observable.throw=o._throw},{"../../Observable":19,"../../observable/throw":204}],53:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/timer");t.Observable.timer=o.timer},{"../../Observable":19,"../../observable/timer":205}],54:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/using");t.Observable.using=o.using},{"../../Observable":19,"../../observable/using":206}],55:[function(e){"use strict";var t=e("../../Observable"),o=e("../../observable/zip");t.Observable.zip=o.zip},{"../../Observable":19,"../../observable/zip":207}],56:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/audit");t.Observable.prototype.audit=o.audit},{"../../Observable":19,"../../operator/audit":208}],57:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/auditTime");t.Observable.prototype.auditTime=o.auditTime},{"../../Observable":19,"../../operator/auditTime":209}],58:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/buffer");t.Observable.prototype.buffer=o.buffer},{"../../Observable":19,"../../operator/buffer":210}],59:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/bufferCount");t.Observable.prototype.bufferCount=o.bufferCount},{"../../Observable":19,"../../operator/bufferCount":211}],60:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/bufferTime");t.Observable.prototype.bufferTime=o.bufferTime},{"../../Observable":19,"../../operator/bufferTime":212}],61:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/bufferToggle");t.Observable.prototype.bufferToggle=o.bufferToggle},{"../../Observable":19,"../../operator/bufferToggle":213}],62:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/bufferWhen");t.Observable.prototype.bufferWhen=o.bufferWhen},{"../../Observable":19,"../../operator/bufferWhen":214}],63:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/catch");t.Observable.prototype.catch=o._catch,t.Observable.prototype._catch=o._catch},{"../../Observable":19,"../../operator/catch":215}],64:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/combineAll");t.Observable.prototype.combineAll=o.combineAll},{"../../Observable":19,"../../operator/combineAll":216}],65:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/combineLatest");t.Observable.prototype.combineLatest=o.combineLatest},{"../../Observable":19,"../../operator/combineLatest":217}],66:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/concat");t.Observable.prototype.concat=o.concat},{"../../Observable":19,"../../operator/concat":218}],67:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/concatAll");t.Observable.prototype.concatAll=o.concatAll},{"../../Observable":19,"../../operator/concatAll":219}],68:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/concatMap");t.Observable.prototype.concatMap=o.concatMap},{"../../Observable":19,"../../operator/concatMap":220}],69:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/concatMapTo");t.Observable.prototype.concatMapTo=o.concatMapTo},{"../../Observable":19,"../../operator/concatMapTo":221}],70:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/count");t.Observable.prototype.count=o.count},{"../../Observable":19,"../../operator/count":222}],71:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/debounce");t.Observable.prototype.debounce=o.debounce},{"../../Observable":19,"../../operator/debounce":223}],72:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/debounceTime");t.Observable.prototype.debounceTime=o.debounceTime},{"../../Observable":19,"../../operator/debounceTime":224}],73:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/defaultIfEmpty");t.Observable.prototype.defaultIfEmpty=o.defaultIfEmpty},{"../../Observable":19,"../../operator/defaultIfEmpty":225}],74:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/delay");t.Observable.prototype.delay=o.delay},{"../../Observable":19,"../../operator/delay":226}],75:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/delayWhen");t.Observable.prototype.delayWhen=o.delayWhen},{"../../Observable":19,"../../operator/delayWhen":227}],76:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/dematerialize");t.Observable.prototype.dematerialize=o.dematerialize},{"../../Observable":19,"../../operator/dematerialize":228}],77:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/distinct");t.Observable.prototype.distinct=o.distinct},{"../../Observable":19,"../../operator/distinct":229}],78:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/distinctUntilChanged");t.Observable.prototype.distinctUntilChanged=o.distinctUntilChanged},{"../../Observable":19,"../../operator/distinctUntilChanged":230}],79:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/distinctUntilKeyChanged");t.Observable.prototype.distinctUntilKeyChanged=o.distinctUntilKeyChanged},{"../../Observable":19,"../../operator/distinctUntilKeyChanged":231}],80:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/do");t.Observable.prototype.do=o._do,t.Observable.prototype._do=o._do},{"../../Observable":19,"../../operator/do":232}],81:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/elementAt");t.Observable.prototype.elementAt=o.elementAt},{"../../Observable":19,"../../operator/elementAt":233}],82:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/every");t.Observable.prototype.every=o.every},{"../../Observable":19,"../../operator/every":234}],83:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/exhaust");t.Observable.prototype.exhaust=o.exhaust},{"../../Observable":19,"../../operator/exhaust":235}],84:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/exhaustMap");t.Observable.prototype.exhaustMap=o.exhaustMap},{"../../Observable":19,"../../operator/exhaustMap":236}],85:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/expand");t.Observable.prototype.expand=o.expand},{"../../Observable":19,"../../operator/expand":237}],86:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/filter");t.Observable.prototype.filter=o.filter},{"../../Observable":19,"../../operator/filter":238}],87:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/finally");t.Observable.prototype.finally=o._finally,t.Observable.prototype._finally=o._finally},{"../../Observable":19,"../../operator/finally":239}],88:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/find");t.Observable.prototype.find=o.find},{"../../Observable":19,"../../operator/find":240}],89:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/findIndex");t.Observable.prototype.findIndex=o.findIndex},{"../../Observable":19,"../../operator/findIndex":241}],90:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/first");t.Observable.prototype.first=o.first},{"../../Observable":19,"../../operator/first":242}],91:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/groupBy");t.Observable.prototype.groupBy=o.groupBy},{"../../Observable":19,"../../operator/groupBy":243}],92:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/ignoreElements");t.Observable.prototype.ignoreElements=o.ignoreElements},{"../../Observable":19,"../../operator/ignoreElements":244}],93:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/isEmpty");t.Observable.prototype.isEmpty=o.isEmpty},{"../../Observable":19,"../../operator/isEmpty":245}],94:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/last");t.Observable.prototype.last=o.last},{"../../Observable":19,"../../operator/last":246}],95:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/let");t.Observable.prototype.let=o.letProto,t.Observable.prototype.letBind=o.letProto},{"../../Observable":19,"../../operator/let":247}],96:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/map");t.Observable.prototype.map=o.map},{"../../Observable":19,"../../operator/map":248}],97:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/mapTo");t.Observable.prototype.mapTo=o.mapTo},{"../../Observable":19,"../../operator/mapTo":249}],98:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/materialize");t.Observable.prototype.materialize=o.materialize},{"../../Observable":19,"../../operator/materialize":250}],99:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/max");t.Observable.prototype.max=o.max},{"../../Observable":19,"../../operator/max":251}],100:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/merge");t.Observable.prototype.merge=o.merge},{"../../Observable":19,"../../operator/merge":252}],101:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/mergeAll");t.Observable.prototype.mergeAll=o.mergeAll},{"../../Observable":19,"../../operator/mergeAll":253}],102:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/mergeMap");t.Observable.prototype.mergeMap=o.mergeMap,t.Observable.prototype.flatMap=o.mergeMap},{"../../Observable":19,"../../operator/mergeMap":254}],103:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/mergeMapTo");t.Observable.prototype.flatMapTo=o.mergeMapTo,t.Observable.prototype.mergeMapTo=o.mergeMapTo},{"../../Observable":19,"../../operator/mergeMapTo":255}],104:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/mergeScan");t.Observable.prototype.mergeScan=o.mergeScan},{"../../Observable":19,"../../operator/mergeScan":256}],105:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/min");t.Observable.prototype.min=o.min},{"../../Observable":19,"../../operator/min":257}],106:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/multicast");t.Observable.prototype.multicast=o.multicast},{"../../Observable":19,"../../operator/multicast":258}],107:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/observeOn");t.Observable.prototype.observeOn=o.observeOn},{"../../Observable":19,"../../operator/observeOn":259}],108:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/onErrorResumeNext");t.Observable.prototype.onErrorResumeNext=o.onErrorResumeNext},{"../../Observable":19,"../../operator/onErrorResumeNext":260}],109:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/pairwise");t.Observable.prototype.pairwise=o.pairwise},{"../../Observable":19,"../../operator/pairwise":261}],110:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/partition");t.Observable.prototype.partition=o.partition},{"../../Observable":19,"../../operator/partition":262}],111:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/pluck");t.Observable.prototype.pluck=o.pluck},{"../../Observable":19,"../../operator/pluck":263}],112:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/publish");t.Observable.prototype.publish=o.publish},{"../../Observable":19,"../../operator/publish":264}],113:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/publishBehavior");t.Observable.prototype.publishBehavior=o.publishBehavior},{"../../Observable":19,"../../operator/publishBehavior":265}],114:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/publishLast");t.Observable.prototype.publishLast=o.publishLast},{"../../Observable":19,"../../operator/publishLast":266}],115:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/publishReplay");t.Observable.prototype.publishReplay=o.publishReplay},{"../../Observable":19,"../../operator/publishReplay":267}],116:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/race");t.Observable.prototype.race=o.race},{"../../Observable":19,"../../operator/race":268}],117:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/reduce");t.Observable.prototype.reduce=o.reduce},{"../../Observable":19,"../../operator/reduce":269}],118:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/repeat");t.Observable.prototype.repeat=o.repeat},{"../../Observable":19,"../../operator/repeat":270}],119:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/repeatWhen");t.Observable.prototype.repeatWhen=o.repeatWhen},{"../../Observable":19,"../../operator/repeatWhen":271}],120:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/retry");t.Observable.prototype.retry=o.retry},{"../../Observable":19,"../../operator/retry":272}],121:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/retryWhen");t.Observable.prototype.retryWhen=o.retryWhen},{"../../Observable":19,"../../operator/retryWhen":273}],122:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/sample");t.Observable.prototype.sample=o.sample},{"../../Observable":19,"../../operator/sample":274}],123:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/sampleTime");t.Observable.prototype.sampleTime=o.sampleTime},{"../../Observable":19,"../../operator/sampleTime":275}],124:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/scan");t.Observable.prototype.scan=o.scan},{"../../Observable":19,"../../operator/scan":276}],125:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/sequenceEqual");t.Observable.prototype.sequenceEqual=o.sequenceEqual},{"../../Observable":19,"../../operator/sequenceEqual":277}],126:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/share");t.Observable.prototype.share=o.share},{"../../Observable":19,"../../operator/share":278}],127:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/shareReplay");t.Observable.prototype.shareReplay=o.shareReplay},{"../../Observable":19,"../../operator/shareReplay":279}],128:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/single");t.Observable.prototype.single=o.single},{"../../Observable":19,"../../operator/single":280}],129:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/skip");t.Observable.prototype.skip=o.skip},{"../../Observable":19,"../../operator/skip":281}],130:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/skipLast");t.Observable.prototype.skipLast=o.skipLast},{"../../Observable":19,"../../operator/skipLast":282}],131:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/skipUntil");t.Observable.prototype.skipUntil=o.skipUntil},{"../../Observable":19,"../../operator/skipUntil":283}],132:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/skipWhile");t.Observable.prototype.skipWhile=o.skipWhile},{"../../Observable":19,"../../operator/skipWhile":284}],133:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/startWith");t.Observable.prototype.startWith=o.startWith},{"../../Observable":19,"../../operator/startWith":285}],134:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/subscribeOn");t.Observable.prototype.subscribeOn=o.subscribeOn},{"../../Observable":19,"../../operator/subscribeOn":286}],135:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/switch");t.Observable.prototype.switch=o._switch,t.Observable.prototype._switch=o._switch},{"../../Observable":19,"../../operator/switch":287}],136:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/switchMap");t.Observable.prototype.switchMap=o.switchMap},{"../../Observable":19,"../../operator/switchMap":288}],137:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/switchMapTo");t.Observable.prototype.switchMapTo=o.switchMapTo},{"../../Observable":19,"../../operator/switchMapTo":289}],138:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/take");t.Observable.prototype.take=o.take},{"../../Observable":19,"../../operator/take":290}],139:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/takeLast");t.Observable.prototype.takeLast=o.takeLast},{"../../Observable":19,"../../operator/takeLast":291}],140:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/takeUntil");t.Observable.prototype.takeUntil=o.takeUntil},{"../../Observable":19,"../../operator/takeUntil":292}],141:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/takeWhile");t.Observable.prototype.takeWhile=o.takeWhile},{"../../Observable":19,"../../operator/takeWhile":293}],142:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/throttle");t.Observable.prototype.throttle=o.throttle},{"../../Observable":19,"../../operator/throttle":294}],143:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/throttleTime");t.Observable.prototype.throttleTime=o.throttleTime},{"../../Observable":19,"../../operator/throttleTime":295}],144:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/timeInterval");t.Observable.prototype.timeInterval=o.timeInterval},{"../../Observable":19,"../../operator/timeInterval":296}],145:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/timeout");t.Observable.prototype.timeout=o.timeout},{"../../Observable":19,"../../operator/timeout":297}],146:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/timeoutWith");t.Observable.prototype.timeoutWith=o.timeoutWith},{"../../Observable":19,"../../operator/timeoutWith":298}],147:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/timestamp");t.Observable.prototype.timestamp=o.timestamp},{"../../Observable":19,"../../operator/timestamp":299}],148:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/toArray");t.Observable.prototype.toArray=o.toArray},{"../../Observable":19,"../../operator/toArray":300}],149:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/toPromise");t.Observable.prototype.toPromise=o.toPromise},{"../../Observable":19,"../../operator/toPromise":301}],150:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/window");t.Observable.prototype.window=o.window},{"../../Observable":19,"../../operator/window":302}],151:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/windowCount");t.Observable.prototype.windowCount=o.windowCount},{"../../Observable":19,"../../operator/windowCount":303}],152:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/windowTime");t.Observable.prototype.windowTime=o.windowTime},{"../../Observable":19,"../../operator/windowTime":304}],153:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/windowToggle");t.Observable.prototype.windowToggle=o.windowToggle},{"../../Observable":19,"../../operator/windowToggle":305}],154:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/windowWhen");t.Observable.prototype.windowWhen=o.windowWhen},{"../../Observable":19,"../../operator/windowWhen":306}],155:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/withLatestFrom");t.Observable.prototype.withLatestFrom=o.withLatestFrom},{"../../Observable":19,"../../operator/withLatestFrom":307}],156:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/zip");t.Observable.prototype.zip=o.zipProto},{"../../Observable":19,"../../operator/zip":308}],157:[function(e){"use strict";var t=e("../../Observable"),o=e("../../operator/zipAll");t.Observable.prototype.zipAll=o.zipAll},{"../../Observable":19,"../../operator/zipAll":309}],158:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("./ScalarObservable"),n=e("./EmptyObservable"),s=function(e){function t(t,o){e.call(this),this.arrayLike=t,this.scheduler=o,o||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,o){var r=e.length;return 0===r?new n.EmptyObservable:1===r?new i.ScalarObservable(e[0],o):new t(e,o)},t.dispatch=function(e){var t=e.arrayLike,o=e.index,r=e.length,a=e.subscriber;return a.closed?void 0:o>=r?void a.complete():void(a.next(t[o]),e.index=o+1,this.schedule(e))},t.prototype._subscribe=function(e){var o=this,r=o.arrayLike,a=o.scheduler,n=r.length;if(a)return a.schedule(t.dispatch,0,{arrayLike:r,index:0,length:n,subscriber:e});for(var s=0;s<n&&!e.closed;s++)e.next(r[s]);e.complete()},t}(a.Observable);o.ArrayLikeObservable=s},{"../Observable":19,"./EmptyObservable":164,"./ScalarObservable":178}],159:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("./ScalarObservable"),n=e("./EmptyObservable"),s=e("../util/isScheduler"),l=function(e){function t(t,o){e.call(this),this.array=t,this.scheduler=o,o||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,o){return new t(e,o)},t.of=function(){for(var e=[],o=0;o<arguments.length;o++)e[o-0]=arguments[o];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var a=e.length;return 1<a?new t(e,r):1===a?new i.ScalarObservable(e[0],r):new n.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,o=e.index,r=e.count,a=e.subscriber;return o>=r?void a.complete():void(a.next(t[o]),a.closed||(e.index=o+1,this.schedule(e)))},t.prototype._subscribe=function(e){var o=this.array,r=o.length,a=this.scheduler;if(a)return a.schedule(t.dispatch,0,{array:o,index:0,count:r,subscriber:e});for(var n=0;n<r&&!e.closed;n++)e.next(o[n]);e.complete()},t}(a.Observable);o.ArrayObservable=l},{"../Observable":19,"../util/isScheduler":353,"./EmptyObservable":164,"./ScalarObservable":178}],160:[function(e,t,o){"use strict";function r(e){var t=e.value,o=e.subject;o.next(t),o.complete()}function a(e){var t=e.err,o=e.subject;o.error(t)}var i=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=e("../Observable"),s=e("../util/tryCatch"),l=e("../util/errorObject"),p=e("../AsyncSubject"),c=function(e){function t(t,o,r,a,i){e.call(this),this.callbackFunc=t,this.selector=o,this.args=r,this.context=a,this.scheduler=i}/**
     * Converts a callback API to a function that returns an Observable.
     *
     * <span class="informal">Give it a function `f` of type `f(x, callback)` and
     * it will return a function `g` that when called as `g(x)` will output an
     * Observable.</span>
     *
     * `bindCallback` is not an operator because its input and output are not
     * Observables. The input is a function `func` with some parameters, but the
     * last parameter must be a callback function that `func` calls when it is
     * done.
     *
     * The output of `bindCallback` is a function that takes the same parameters
     * as `func`, except the last one (the callback). When the output function
     * is called with arguments, it will return an Observable. If `func` function
     * calls its callback with one argument, the Observable will emit that value.
     * If on the other hand callback is called with multiple values, resulting
     * Observable will emit an array with these arguments.
     *
     * It is very important to remember, that input function `func` is not called
     * when output function is, but rather when Observable returned by output
     * function is subscribed. This means if `func` makes AJAX request, that request
     * will be made every time someone subscribes to resulting Observable, but not before.
     *
     * Optionally, selector function can be passed to `bindObservable`. That function
     * takes the same arguments as callback, and returns value
     * that will be emitted by Observable instead of callback parameters themselves.
     * Even though by default multiple arguments passed to callback appear in the stream as array,
     * selector function will be called with arguments directly, just as callback would.
     * This means you can imagine default selector (when one is not provided explicitly)
     * as function that aggregates all its arguments into array, or simply returns first argument,
     * if there is only one.
     *
     * Last optional parameter - {@link Scheduler} - can be used to control when call
     * to `func` happens after someone subscribes to Observable, as well as when results
     * passed to callback will be emitted. By default subscription to Observable calls `func`
     * synchronously, but using `Scheduler.async` as last parameter will defer call to input function,
     * just like wrapping that call in `setTimeout` with time `0` would. So if you use async Scheduler
     * and call `subscribe` on output Observable, all function calls that are currently executing,
     * will end before `func` is invoked.
     *
     * When it comes to emitting results passed to callback, by default they are emitted
     * immediately after `func` invokes callback. In particular, if callback is called synchronously,
     * then subscription to resulting Observable will call `next` function synchronously as well.
     * If you want to defer that call, using `Scheduler.async` will, again, do the job.
     * This means that by using `Scheduler.async` you can, in a sense, ensure that `func`
     * always calls its callback asynchronously, thus avoiding terrifying Zalgo.
     *
     * Note that Observable created by output function will always emit only one value
     * and then complete right after. Even if `func` calls callback multiple times, values from
     * second and following calls will never appear in the stream. If you need to
     * listen for multiple calls, you probably want to use {@link fromEvent} or
     * {@link fromEventPattern} instead.
     *
     * If `func` depends on some context (`this` property), that context will be set
     * to the same context that output function has at call time. In particular, if `func`
     * is called as method of some object, in order to preserve proper behaviour,
     * it is recommended to set context of output function to that object as well,
     * provided `func` is not already bound.
     *
     * If input function calls its callback in "node style" (i.e. first argument to callback is
     * optional error parameter signaling whether call failed or not), {@link bindNodeCallback}
     * provides convenient error handling and probably is a better choice.
     * `bindCallback` will treat such functions without any difference and error parameter
     * (whether passed or not) will always be interpreted as regular callback argument.
     *
     *
     * @example <caption>Convert jQuery's getJSON to an Observable API</caption>
     * // Suppose we have jQuery.getJSON('/my/url', callback)
     * var getJSONAsObservable = Rx.Observable.bindCallback(jQuery.getJSON);
     * var result = getJSONAsObservable('/my/url');
     * result.subscribe(x => console.log(x), e => console.error(e));
     *
     *
     * @example <caption>Receive array of arguments passed to callback</caption>
     * someFunction((a, b, c) => {
     *   console.log(a); // 5
     *   console.log(b); // 'some string'
     *   console.log(c); // {someProperty: 'someValue'}
     * });
     *
     * const boundSomeFunction = Rx.Observable.bindCallback(someFunction);
     * boundSomeFunction().subscribe(values => {
     *   console.log(values) // [5, 'some string', {someProperty: 'someValue'}]
     * });
     *
     *
     * @example <caption>Use bindCallback with selector function</caption>
     * someFunction((a, b, c) => {
     *   console.log(a); // 'a'
     *   console.log(b); // 'b'
     *   console.log(c); // 'c'
     * });
     *
     * const boundSomeFunction = Rx.Observable.bindCallback(someFunction, (a, b, c) => a + b + c);
     * boundSomeFunction().subscribe(value => {
     *   console.log(value) // 'abc'
     * });
     *
     *
     * @example <caption>Compare behaviour with and without async Scheduler</caption>
     * function iCallMyCallbackSynchronously(cb) {
     *   cb();
     * }
     *
     * const boundSyncFn = Rx.Observable.bindCallback(iCallMyCallbackSynchronously);
     * const boundAsyncFn = Rx.Observable.bindCallback(iCallMyCallbackSynchronously, null, Rx.Scheduler.async);
     *
     * boundSyncFn().subscribe(() => console.log('I was sync!'));
     * boundAsyncFn().subscribe(() => console.log('I was async!'));
     * console.log('This happened...');
     *
     * // Logs:
     * // I was sync!
     * // This happened...
     * // I was async!
     *
     *
     * @example <caption>Use bindCallback on object method</caption>
     * const boundMethod = Rx.Observable.bindCallback(someObject.methodWithCallback);
     * boundMethod.call(someObject) // make sure methodWithCallback has access to someObject
     * .subscribe(subscriber);
     *
     *
     * @see {@link bindNodeCallback}
     * @see {@link from}
     * @see {@link fromPromise}
     *
     * @param {function} func Function with a callback as the last parameter.
     * @param {function} [selector] A function which takes the arguments from the
     * callback and maps those to a value to emit on the output Observable.
     * @param {Scheduler} [scheduler] The scheduler on which to schedule the
     * callbacks.
     * @return {function(...params: *): Observable} A function which returns the
     * Observable that delivers the same values the callback would deliver.
     * @static true
     * @name bindCallback
     * @owner Observable
     */return i(t,e),t.create=function(e,o,r){return void 0===o&&(o=void 0),function(){for(var a=[],i=0;i<arguments.length;i++)a[i-0]=arguments[i];return new t(e,o,a,this,r)}},t.prototype._subscribe=function(e){var o=this.callbackFunc,r=this.args,a=this.scheduler,i=this.subject;if(!a){if(!i){i=this.subject=new p.AsyncSubject;var n=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o-0]=arguments[o];var r=e.source,a=r.selector,i=r.subject;if(a){var n=s.tryCatch(a).apply(this,t);n===l.errorObject?i.error(l.errorObject.e):(i.next(n),i.complete())}else i.next(1>=t.length?t[0]:t),i.complete()};n.source=this;var c=s.tryCatch(o).apply(this.context,r.concat(n));c===l.errorObject&&i.error(l.errorObject.e)}return i.subscribe(e)}return a.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context})},t.dispatch=function(e){var t=this,o=e.source,i=e.subscriber,n=e.context,c=o.callbackFunc,d=o.args,u=o.scheduler,b=o.subject;if(!b){b=o.subject=new p.AsyncSubject;var m=function e(){for(var o=[],i=0;i<arguments.length;i++)o[i-0]=arguments[i];var n=e.source,p=n.selector,c=n.subject;if(p){var d=s.tryCatch(p).apply(this,o);d===l.errorObject?t.add(u.schedule(a,0,{err:l.errorObject.e,subject:c})):t.add(u.schedule(r,0,{value:d,subject:c}))}else{var b=1>=o.length?o[0]:o;t.add(u.schedule(r,0,{value:b,subject:c}))}};m.source=o;var y=s.tryCatch(c).apply(n,d.concat(m));y===l.errorObject&&b.error(l.errorObject.e)}t.add(b.subscribe(i))},t}(n.Observable);o.BoundCallbackObservable=c},{"../AsyncSubject":15,"../Observable":19,"../util/errorObject":345,"../util/tryCatch":359}],161:[function(e,t,o){"use strict";function r(e){var t=this,o=e.source,r=e.subscriber,n=e.context,s=o,d=s.callbackFunc,u=s.args,b=s.scheduler,m=o.subject;if(!m){m=o.subject=new c.AsyncSubject;var y=function e(){for(var o=[],r=0;r<arguments.length;r++)o[r-0]=arguments[r];var n=e.source,s=n.selector,c=n.subject,d=o.shift();if(d)t.add(b.schedule(i,0,{err:d,subject:c}));else if(s){var u=l.tryCatch(s).apply(this,o);u===p.errorObject?t.add(b.schedule(i,0,{err:p.errorObject.e,subject:c})):t.add(b.schedule(a,0,{value:u,subject:c}))}else{var m=1>=o.length?o[0]:o;t.add(b.schedule(a,0,{value:m,subject:c}))}};y.source=o;var _=l.tryCatch(d).apply(n,u.concat(y));_===p.errorObject&&t.add(b.schedule(i,0,{err:p.errorObject.e,subject:m}))}t.add(m.subscribe(r))}function a(e){var t=e.value,o=e.subject;o.next(t),o.complete()}function i(e){var t=e.err,o=e.subject;o.error(t)}var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},s=e("../Observable"),l=e("../util/tryCatch"),p=e("../util/errorObject"),c=e("../AsyncSubject"),d=function(e){function t(t,o,r,a,i){e.call(this),this.callbackFunc=t,this.selector=o,this.args=r,this.context=a,this.scheduler=i}return n(t,e),t.create=function(e,o,r){return void 0===o&&(o=void 0),function(){for(var a=[],i=0;i<arguments.length;i++)a[i-0]=arguments[i];return new t(e,o,a,this,r)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,o=this.args,a=this.scheduler,i=this.subject;if(!a){if(!i){i=this.subject=new c.AsyncSubject;var n=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o-0]=arguments[o];var r=e.source,a=r.selector,i=r.subject,n=t.shift();if(n)i.error(n);else if(a){var s=l.tryCatch(a).apply(this,t);s===p.errorObject?i.error(p.errorObject.e):(i.next(s),i.complete())}else i.next(1>=t.length?t[0]:t),i.complete()};n.source=this;var s=l.tryCatch(t).apply(this.context,o.concat(n));s===p.errorObject&&i.error(p.errorObject.e)}return i.subscribe(e)}return a.schedule(r,0,{source:this,subscriber:e,context:this.context})},t}(s.Observable);o.BoundNodeCallbackObservable=d},{"../AsyncSubject":15,"../Observable":19,"../util/errorObject":345,"../util/tryCatch":359}],162:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../Observable"),n=e("../Subscriber"),s=e("../Subscription"),l=function(e){function t(t,o){e.call(this),this.source=t,this.subjectFactory=o,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new d(this))},t}(i.Observable);o.ConnectableObservable=l;var p=l.prototype;o.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:p._subscribe},_isComplete:{value:p._isComplete,writable:!0},getSubject:{value:p.getSubject},connect:{value:p.connect},refCount:{value:p.refCount}};var c=function(e){function t(t,o){e.call(this,t),this.connectable=o}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(a.SubjectSubscriber),d=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var o=this.connectable;o._refCount++;var r=new u(e,o),a=t.subscribe(r);return r.closed||(r.connection=o.connect()),a},e}(),u=function(e){function t(t,o){e.call(this,t),this.connectable=o}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(0>=t)return void(this.connection=null);if(e._refCount=t-1,1<t)return void(this.connection=null);var o=this.connection,r=e._connection;this.connection=null,r&&(!o||r===o)&&r.unsubscribe()},t}(n.Subscriber)},{"../Observable":19,"../Subject":25,"../Subscriber":27,"../Subscription":28}],163:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../util/subscribeToResult"),n=e("../OuterSubscriber"),s=function(e){function t(t){e.call(this),this.observableFactory=t}return r(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new l(e,this.observableFactory)},t}(a.Observable);o.DeferObservable=s;var l=function(e){function t(t,o){e.call(this,t),this.factory=o,this.tryDefer()}return r(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(i.subscribeToResult(this,e))},t}(n.OuterSubscriber)},{"../Observable":19,"../OuterSubscriber":21,"../util/subscribeToResult":357}],164:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var o=this.scheduler;return o?o.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(a.Observable);o.EmptyObservable=i},{"../Observable":19}],165:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=function(e){function t(t,o){e.call(this),this.error=t,this.scheduler=o}return r(t,e),t.create=function(e,o){return new t(e,o)},t.dispatch=function(e){var t=e.error,o=e.subscriber;o.error(t)},t.prototype._subscribe=function(e){var o=this.error,r=this.scheduler;return e.syncErrorThrowable=!0,r?r.schedule(t.dispatch,0,{error:o,subscriber:e}):void e.error(o)},t}(a.Observable);o.ErrorObservable=i},{"../Observable":19}],166:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("./EmptyObservable"),n=e("../util/isArray"),s=e("../util/subscribeToResult"),l=e("../OuterSubscriber"),p=function(e){function t(t,o){e.call(this),this.sources=t,this.resultSelector=o}return r(t,e),t.create=function(){for(var e=[],o=0;o<arguments.length;o++)e[o-0]=arguments[o];if(null===e||0===arguments.length)return new i.EmptyObservable;var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&n.isArray(e[0])&&(e=e[0]),0===e.length?new i.EmptyObservable:new t(e,r)},t.prototype._subscribe=function(e){return new c(e,this.sources,this.resultSelector)},t}(a.Observable);o.ForkJoinObservable=p;var c=function(e){function t(t,o,r){e.call(this,t),this.sources=o,this.resultSelector=r,this.completed=0,this.haveValues=0;var a=o.length;this.total=a,this.values=Array(a);for(var n=0;n<a;n++){var i=o[n],l=s.subscribeToResult(this,i,null,n);l&&(l.outerIndex=n,this.add(l))}}return r(t,e),t.prototype.notifyNext=function(e,t,o,r,a){this.values[o]=t,a._hasValue||(a._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,o=this,r=o.haveValues,a=o.resultSelector,i=o.values,n=i.length;if(!e._hasValue)return void t.complete();if(this.completed++,this.completed===n){if(r===n){var s=a?a.apply(this,i):i;t.next(s)}t.complete()}},t}(l.OuterSubscriber)},{"../Observable":19,"../OuterSubscriber":21,"../util/isArray":346,"../util/subscribeToResult":357,"./EmptyObservable":164}],167:[function(e,t,o){"use strict";function r(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function a(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function n(e){return!!e&&"[object NodeList]"===m.call(e)}function s(e){return!!e&&"[object HTMLCollection]"===m.call(e)}function l(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var i=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},p=e("../Observable"),c=e("../util/tryCatch"),d=e("../util/isFunction"),u=e("../util/errorObject"),b=e("../Subscription"),m=Object.prototype.toString,y=function(e){function t(t,o,r,a){e.call(this),this.sourceObj=t,this.eventName=o,this.selector=r,this.options=a}return i(t,e),t.create=function(e,o,r,a){return d.isFunction(r)&&(a=r,r=void 0),new t(e,o,a,r)},t.setupSubscription=function(e,o,p,c,d){var u;if(n(e)||s(e))for(var m=0,i=e.length;m<i;m++)t.setupSubscription(e[m],o,p,c,d);else if(l(e)){e.addEventListener(o,p,d),u=function(){return e.removeEventListener(o,p)}}else if(a(e)){e.on(o,p),u=function(){return e.off(o,p)}}else if(r(e)){e.addListener(o,p),u=function(){return e.removeListener(o,p)}}else throw new TypeError("Invalid event target");c.add(new b.Subscription(u))},t.prototype._subscribe=function(o){var e=this.sourceObj,r=this.eventName,a=this.options,i=this.selector,n=i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=c.tryCatch(i).apply(void 0,e);r===u.errorObject?o.error(u.errorObject.e):o.next(r)}:function(t){return o.next(t)};t.setupSubscription(e,r,n,o,a)},t}(p.Observable);o.FromEventObservable=y},{"../Observable":19,"../Subscription":28,"../util/errorObject":345,"../util/isFunction":349,"../util/tryCatch":359}],168:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/isFunction"),i=e("../Observable"),n=e("../Subscription"),s=function(e){function t(t,o,r){e.call(this),this.addHandler=t,this.removeHandler=o,this.selector=r}return r(t,e),t.create=function(e,o,r){return new t(e,o,r)},t.prototype._subscribe=function(t){var e=this,o=this.removeHandler,r=this.selector?function(){for(var o=[],r=0;r<arguments.length;r++)o[r-0]=arguments[r];e._callSelector(t,o)}:function(o){t.next(o)},i=this._callAddHandler(r,t);a.isFunction(o)&&t.add(new n.Subscription(function(){o(r,i)}))},t.prototype._callSelector=function(t,e){try{var o=this.selector.apply(this,e);t.next(o)}catch(o){t.error(o)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(o){t.error(o)}},t}(i.Observable);o.FromEventPatternObservable=s},{"../Observable":19,"../Subscription":28,"../util/isFunction":349}],169:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/isArray"),i=e("../util/isArrayLike"),n=e("../util/isPromise"),s=e("./PromiseObservable"),l=e("./IteratorObservable"),p=e("./ArrayObservable"),c=e("./ArrayLikeObservable"),d=e("../symbol/iterator"),u=e("../Observable"),b=e("../operator/observeOn"),m=e("../symbol/observable"),y=function(e){function t(t,o){e.call(this,null),this.ish=t,this.scheduler=o}return r(t,e),t.create=function(e,o){if(null!=e){if("function"==typeof e[m.observable])return e instanceof u.Observable&&!o?e:new t(e,o);if(a.isArray(e))return new p.ArrayObservable(e,o);if(n.isPromise(e))return new s.PromiseObservable(e,o);if("function"==typeof e[d.iterator]||"string"==typeof e)return new l.IteratorObservable(e,o);if(i.isArrayLike(e))return new c.ArrayLikeObservable(e,o)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,o=this.scheduler;return null==o?t[m.observable]().subscribe(e):t[m.observable]().subscribe(new b.ObserveOnSubscriber(e,o,0))},t}(u.Observable);o.FromObservable=y},{"../Observable":19,"../operator/observeOn":259,"../symbol/iterator":324,"../symbol/observable":325,"../util/isArray":346,"../util/isArrayLike":347,"../util/isPromise":352,"./ArrayLikeObservable":158,"./ArrayObservable":159,"./IteratorObservable":173,"./PromiseObservable":176}],170:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../util/isScheduler"),n=function(e){return e},s=function(e){function t(t,o,r,a,i){e.call(this),this.initialState=t,this.condition=o,this.iterate=r,this.resultSelector=a,this.scheduler=i}return r(t,e),t.create=function(e,o,r,a,s){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||n,e.scheduler):void 0===a||i.isScheduler(a)?new t(e,o,r,n,a):new t(e,o,r,a,s)},t.prototype._subscribe=function(e){var o=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:o});var r=this,a=r.condition,i=r.resultSelector,n=r.iterate;do{if(a){var s=void 0;try{s=a(o)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var l=void 0;try{l=i(o)}catch(t){return void e.error(t)}if(e.next(l),e.closed)break;try{o=n(o)}catch(t){return void e.error(t)}}while(!0)},t.dispatch=function(e){var t=e.subscriber,o=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(o){var r;try{r=o(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var a;try{a=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed)return t.next(a),t.closed?void 0:this.schedule(e)}},t}(a.Observable);o.GenerateObservable=s},{"../Observable":19,"../util/isScheduler":353}],171:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../util/subscribeToResult"),n=e("../OuterSubscriber"),s=function(e){function t(t,o,r){e.call(this),this.condition=t,this.thenSource=o,this.elseSource=r}return r(t,e),t.create=function(e,o,r){return new t(e,o,r)},t.prototype._subscribe=function(e){var t=this,o=t.condition,r=t.thenSource,a=t.elseSource;return new l(e,o,r,a)},t}(a.Observable);o.IfObservable=s;var l=function(e){function t(t,o,r,a){e.call(this,t),this.condition=o,this.thenSource=r,this.elseSource=a,this.tryIf()}return r(t,e),t.prototype.tryIf=function(){var e=this,t=e.condition,o=e.thenSource,r=e.elseSource,a;try{a=t();var n=a?o:r;n?this.add(i.subscribeToResult(this,n)):this._complete()}catch(e){this._error(e)}},t}(n.OuterSubscriber)},{"../Observable":19,"../OuterSubscriber":21,"../util/subscribeToResult":357}],172:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/isNumeric"),i=e("../Observable"),n=e("../scheduler/async"),s=function(e){function t(t,o){void 0===t&&(t=0),void 0===o&&(o=n.async),e.call(this),this.period=t,this.scheduler=o,(!a.isNumeric(t)||0>t)&&(this.period=0),o&&"function"==typeof o.schedule||(this.scheduler=n.async)}return r(t,e),t.create=function(e,o){return void 0===e&&(e=0),void 0===o&&(o=n.async),new t(e,o)},t.dispatch=function(e){var t=e.index,o=e.subscriber,r=e.period;o.next(t),o.closed||(e.index+=1,this.schedule(e,r))},t.prototype._subscribe=function(e){var o=this.period,r=this.scheduler;e.add(r.schedule(t.dispatch,o,{index:0,subscriber:e,period:o}))},t}(i.Observable);o.IntervalObservable=s},{"../Observable":19,"../scheduler/async":322,"../util/isNumeric":350}],173:[function(e,t,o){"use strict";function r(e){var t=e[c.iterator];if(!t&&"string"==typeof e)return new u(e);if(!t&&void 0!==e.length)return new b(e);if(!t)throw new TypeError("object is not iterable");return e[c.iterator]()}function a(e){var t=+e.length;return isNaN(t)?0:0!=t&&i(t)?(t=n(t)*Math.floor(Math.abs(t)),0>=t?0:t>m?m:t):t}function i(e){return"number"==typeof e&&l.root.isFinite(e)}function n(e){var t=+e;return 0==t?t:isNaN(t)?t:0>t?-1:1}var s=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},l=e("../util/root"),p=e("../Observable"),c=e("../symbol/iterator"),d=function(e){function t(t,o){if(e.call(this),this.scheduler=o,null==t)throw new Error("iterator cannot be null.");this.iterator=r(t)}return s(t,e),t.create=function(e,o){return new t(e,o)},t.dispatch=function(e){var t=e.index,o=e.hasError,r=e.iterator,a=e.subscriber;if(o)return void a.error(e.error);var i=r.next();return i.done?void a.complete():(a.next(i.value),e.index=t+1,a.closed?void("function"==typeof r.return&&r.return()):void this.schedule(e))},t.prototype._subscribe=function(e){var o=this,r=o.iterator,a=o.scheduler;if(a)return a.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});do{var i=r.next();if(i.done){e.complete();break}else e.next(i.value);if(e.closed){"function"==typeof r.return&&r.return();break}}while(!0)},t}(p.Observable);o.IteratorObservable=d;var u=function(){function e(e,t,o){void 0===t&&(t=0),void 0===o&&(o=e.length),this.str=e,this.idx=t,this.len=o}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),b=function(){function e(e,t,o){void 0===t&&(t=0),void 0===o&&(o=a(e)),this.arr=e,this.idx=t,this.len=o}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),m=9007199254740991},{"../Observable":19,"../symbol/iterator":324,"../util/root":356}],174:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../util/noop"),n=function(e){function t(){e.call(this)}return r(t,e),t.create=function(){return new t},t.prototype._subscribe=function(){i.noop()},t}(a.Observable);o.NeverObservable=n},{"../Observable":19,"../util/noop":354}],175:[function(e,t,o){"use strict";function r(e){var t=e.obj,o=e.keys,r=e.length,a=e.index,i=e.subscriber;if(a===r)return void i.complete();var n=o[a];i.next([n,t[n]]),e.index=a+1,this.schedule(e)}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../Observable"),n=function(e){function t(t,o){e.call(this),this.obj=t,this.scheduler=o,this.keys=Object.keys(t)}return a(t,e),t.create=function(e,o){return new t(e,o)},t.prototype._subscribe=function(e){var t=this,o=t.keys,a=t.scheduler,i=o.length;if(a)return a.schedule(r,0,{obj:this.obj,keys:o,length:i,index:0,subscriber:e});for(var n=0,s;n<i;n++)s=o[n],e.next([s,this.obj[s]]);e.complete()},t}(i.Observable);o.PairsObservable=n},{"../Observable":19}],176:[function(e,t,o){"use strict";function r(e){var t=e.value,o=e.subscriber;o.closed||(o.next(t),o.complete())}function a(e){var t=e.err,o=e.subscriber;o.closed||o.error(t)}var i=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=e("../util/root"),s=e("../Observable"),l=function(e){function t(t,o){e.call(this),this.promise=t,this.scheduler=o}return i(t,e),t.create=function(e,o){return new t(e,o)},t.prototype._subscribe=function(e){var t=this,o=this.promise,i=this.scheduler;if(null==i)this._isScalar?!e.closed&&(e.next(this.value),e.complete()):o.then(function(o){t.value=o,t._isScalar=!0,e.closed||(e.next(o),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){n.root.setTimeout(function(){throw e})});else if(!this._isScalar)o.then(function(o){t.value=o,t._isScalar=!0,e.closed||e.add(i.schedule(r,0,{value:o,subscriber:e}))},function(t){e.closed||e.add(i.schedule(a,0,{err:t,subscriber:e}))}).then(null,function(e){n.root.setTimeout(function(){throw e})});else if(!e.closed)return i.schedule(r,0,{value:this.value,subscriber:e})},t}(s.Observable);o.PromiseObservable=l},{"../Observable":19,"../util/root":356}],177:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=function(e){function t(t,o,r){e.call(this),this.start=t,this._count=o,this.scheduler=r}return r(t,e),t.create=function(e,o,r){return void 0===e&&(e=0),void 0===o&&(o=0),new t(e,o,r)},t.dispatch=function(e){var t=e.start,o=e.index,r=e.count,a=e.subscriber;return o>=r?void a.complete():void(a.next(t),a.closed||(e.index=o+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var o=0,r=this.start,a=this._count,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{index:o,count:a,start:r,subscriber:e});do{if(o++>=a){e.complete();break}if(e.next(r++),e.closed)break}while(!0)},t}(a.Observable);o.RangeObservable=i},{"../Observable":19}],178:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=function(e){function t(t,o){e.call(this),this.value=t,this.scheduler=o,this._isScalar=!0,o&&(this._isScalar=!1)}return r(t,e),t.create=function(e,o){return new t(e,o)},t.dispatch=function(e){var t=e.done,o=e.value,r=e.subscriber;return t?void r.complete():void(r.next(o),r.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var o=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:o,subscriber:e}):void(e.next(o),e.closed||e.complete())},t}(a.Observable);o.ScalarObservable=i},{"../Observable":19}],179:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../scheduler/asap"),n=e("../util/isNumeric"),s=function(e){function t(t,o,r){void 0===o&&(o=0),void 0===r&&(r=i.asap),e.call(this),this.source=t,this.delayTime=o,this.scheduler=r,(!n.isNumeric(o)||0>o)&&(this.delayTime=0),r&&"function"==typeof r.schedule||(this.scheduler=i.asap)}return r(t,e),t.create=function(e,o,r){return void 0===o&&(o=0),void 0===r&&(r=i.asap),new t(e,o,r)},t.dispatch=function(e){var t=e.source,o=e.subscriber;return this.add(t.subscribe(o))},t.prototype._subscribe=function(e){var o=this.delayTime,r=this.source,a=this.scheduler;return a.schedule(t.dispatch,o,{source:r,subscriber:e})},t}(a.Observable);o.SubscribeOnObservable=s},{"../Observable":19,"../scheduler/asap":321,"../util/isNumeric":350}],180:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/isNumeric"),i=e("../Observable"),n=e("../scheduler/async"),s=e("../util/isScheduler"),l=e("../util/isDate"),p=function(e){function t(t,o,r){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,a.isNumeric(o)?this.period=1>+o&&1||+o:s.isScheduler(o)&&(r=o),s.isScheduler(r)||(r=n.async),this.scheduler=r,this.dueTime=l.isDate(t)?+t-this.scheduler.now():t}return r(t,e),t.create=function(e,o,r){return void 0===e&&(e=0),new t(e,o,r)},t.dispatch=function(e){var t=e.index,o=e.period,r=e.subscriber,a=this;if(r.next(t),!r.closed)return-1===o?r.complete():void(e.index=t+1,a.schedule(e,o))},t.prototype._subscribe=function(e){var o=this,r=o.period,a=o.dueTime,i=o.scheduler;return i.schedule(t.dispatch,a,{index:0,period:r,subscriber:e})},t}(i.Observable);o.TimerObservable=p},{"../Observable":19,"../scheduler/async":322,"../util/isDate":348,"../util/isNumeric":350,"../util/isScheduler":353}],181:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../util/subscribeToResult"),n=e("../OuterSubscriber"),s=function(e){function t(t,o){e.call(this),this.resourceFactory=t,this.observableFactory=o}return r(t,e),t.create=function(e,o){return new t(e,o)},t.prototype._subscribe=function(e){var t=this,o=t.resourceFactory,r=t.observableFactory,a;try{return a=o(),new l(e,a,r)}catch(t){e.error(t)}},t}(a.Observable);o.UsingObservable=s;var l=function(e){function t(t,o,r){e.call(this,t),this.resource=o,this.observableFactory=r,t.add(o),this.tryUse()}return r(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(i.subscribeToResult(this,e))}catch(e){this._error(e)}},t}(n.OuterSubscriber)},{"../Observable":19,"../OuterSubscriber":21,"../util/subscribeToResult":357}],182:[function(e,t,o){"use strict";var r=e("./BoundCallbackObservable");o.bindCallback=r.BoundCallbackObservable.create},{"./BoundCallbackObservable":160}],183:[function(e,t,o){"use strict";var r=e("./BoundNodeCallbackObservable");o.bindNodeCallback=r.BoundNodeCallbackObservable.create},{"./BoundNodeCallbackObservable":161}],184:[function(e,t,o){"use strict";var r=e("../util/isScheduler"),a=e("../util/isArray"),i=e("./ArrayObservable"),n=e("../operator/combineLatest");o.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=null,s=null;return r.isScheduler(e[e.length-1])&&(s=e.pop()),"function"==typeof e[e.length-1]&&(o=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),new i.ArrayObservable(e,s).lift(new n.CombineLatestOperator(o))}},{"../operator/combineLatest":217,"../util/isArray":346,"../util/isScheduler":353,"./ArrayObservable":159}],185:[function(e,t,o){"use strict";var r=e("../operator/concat");o.concat=r.concatStatic},{"../operator/concat":218}],186:[function(e,t,o){"use strict";var r=e("./DeferObservable");o.defer=r.DeferObservable.create},{"./DeferObservable":163}],187:[function(e,t,o){"use strict";function r(){if(u.root.XMLHttpRequest)return new u.root.XMLHttpRequest;if(!!u.root.XDomainRequest)return new u.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function a(){if(u.root.XMLHttpRequest)return new u.root.XMLHttpRequest;var e;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=0;3>o;o++)try{if(e=t[o],new u.root.ActiveXObject(e))break}catch(t){}return new u.root.ActiveXObject(e)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}function i(e,t){return void 0===t&&(t=null),new g({method:"GET",url:e,headers:t})}function n(e,t,o){return new g({method:"POST",url:e,body:t,headers:o})}function s(e,t){return new g({method:"DELETE",url:e,headers:t})}function l(e,t,o){return new g({method:"PUT",url:e,body:t,headers:o})}function p(e,t,o){return new g({method:"PATCH",url:e,body:t,headers:o})}function c(e,t){return new g({method:"GET",url:e,responseType:"json",headers:t}).lift(new f.MapOperator(function(e){return e.response},null))}var d=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},u=e("../../util/root"),b=e("../../util/tryCatch"),m=e("../../util/errorObject"),y=e("../../Observable"),_=e("../../Subscriber"),f=e("../../operator/map");o.ajaxGet=i;o.ajaxPost=n;o.ajaxDelete=s;o.ajaxPut=l;o.ajaxPatch=p;o.ajaxGetJSON=c;var g=function(e){function t(t){e.call(this);var o={async:!0,createXHR:function(){return this.crossDomain?r.call(this):a()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)o.url=t;else for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);this.request=o}return d(t,e),t.prototype._subscribe=function(e){return new h(e,this.request)},t.create=function(){var e=function(e){return new t(e)};return e.get=i,e.post=n,e.delete=s,e.put=l,e.patch=p,e.getJSON=c,e}(),t}(y.Observable);o.AjaxObservable=g;var h=function(e){function t(t,o){e.call(this,t),this.request=o,this.done=!1;var r=o.headers=o.headers||{};o.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||u.root.FormData&&o.body instanceof u.root.FormData||"undefined"==typeof o.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),o.body=this.serializeBody(o.body,o.headers["Content-Type"]),this.send()}return d(t,e),t.prototype.next=function(t){this.done=!0;var e=this,o=e.xhr,r=e.request,a=e.destination,i=new v(t,o,r);a.next(i)},t.prototype.send=function(){var e=this,t=e.request,o=e.request,r=o.user,a=o.method,i=o.url,n=o.async,s=o.password,l=o.headers,p=o.body,c=t.createXHR,d=b.tryCatch(c).call(t);if(d===m.errorObject)this.error(m.errorObject.e);else{this.xhr=d,this.setupEvents(d,t);var u;if(u=r?b.tryCatch(d.open).call(d,a,i,n,r,s):b.tryCatch(d.open).call(d,a,i,n),u===m.errorObject)return this.error(m.errorObject.e),null;if(n&&(d.timeout=t.timeout,d.responseType=t.responseType),"withCredentials"in d&&(d.withCredentials=!!t.withCredentials),this.setHeaders(d,l),u=p?b.tryCatch(d.send).call(d,p):b.tryCatch(d.send).call(d),u===m.errorObject)return this.error(m.errorObject.e),null}return d},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(u.root.FormData&&e instanceof u.root.FormData)return e;if(t){var o=t.indexOf(";");-1!==o&&(t=t.substring(0,o))}return"application/x-www-form-urlencoded"===t?Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&"):"application/json"===t?JSON.stringify(e):e},t.prototype.setHeaders=function(e,t){for(var o in t)t.hasOwnProperty(o)&&e.setRequestHeader(o,t[o])},t.prototype.setupEvents=function(e,t){function o(t){var e=o,r=e.subscriber,a=e.progressSubscriber,i=e.request;a&&a.error(t),r.error(new S(this,i))}function r(t){var e=r,o=e.subscriber,a=e.progressSubscriber,i=e.request;if(4===this.readyState){var n=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===n&&(n=s?200:0),200<=n&&300>n?(a&&a.complete(),o.next(t),o.complete()):(a&&a.error(t),o.error(new x("ajax error "+n,this,i)))}}var a=t.progressSubscriber;if(e.ontimeout=o,o.request=t,o.subscriber=this,o.progressSubscriber=a,e.upload&&"withCredentials"in e){if(a){var i;i=function(t){var e=i.progressSubscriber;e.next(t)},u.root.XDomainRequest?e.onprogress=i:e.upload.onprogress=i,i.progressSubscriber=a}var n;n=function(t){var e=n,o=e.progressSubscriber,r=e.subscriber,a=e.request;o&&o.error(t),r.error(new x("ajax error",this,a))},e.onerror=n,n.request=t,n.subscriber=this,n.progressSubscriber=a}e.onreadystatechange=r,r.subscriber=this,r.progressSubscriber=a,r.request=t},t.prototype.unsubscribe=function(){var t=this,o=t.done,r=t.xhr;!o&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(_.Subscriber);o.AjaxSubscriber=h;var v=function(){return function(e,t,o){switch(this.originalEvent=e,this.xhr=t,this.request=o,this.status=t.status,this.responseType=t.responseType||o.responseType,this.responseType){case"json":this.response="response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");break;case"xml":this.response=t.responseXML;break;case"text":default:this.response="response"in t?t.response:t.responseText;}}}();o.AjaxResponse=v;var x=function(e){function t(t,o,r){e.call(this,t),this.message=t,this.xhr=o,this.request=r,this.status=o.status}return d(t,e),t}(Error);o.AjaxError=x;var S=function(e){function t(t,o){e.call(this,"ajax timeout",t,o)}return d(t,e),t}(x);o.AjaxTimeoutError=S},{"../../Observable":19,"../../Subscriber":27,"../../operator/map":248,"../../util/errorObject":345,"../../util/root":356,"../../util/tryCatch":359}],188:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../../Subject"),i=e("../../Subscriber"),n=e("../../Observable"),s=e("../../Subscription"),l=e("../../util/root"),p=e("../../ReplaySubject"),c=e("../../util/tryCatch"),d=e("../../util/errorObject"),u=e("../../util/assign"),b=function(e){function t(t,o){if(t instanceof n.Observable)e.call(this,o,t);else{if(e.call(this),this.WebSocketCtor=l.root.WebSocket,this._output=new a.Subject,"string"==typeof t?this.url=t:u.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new p.ReplaySubject}}return r(t,e),t.prototype.resultSelector=function(t){return JSON.parse(t.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var o=new t(this,this.destination);return o.operator=e,o},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new p.ReplaySubject),this._output=new a.Subject},t.prototype.multiplex=function(e,t,o){var r=this;return new n.Observable(function(a){var i=c.tryCatch(e)();i===d.errorObject?a.error(d.errorObject.e):r.next(i);var n=r.subscribe(function(e){var t=c.tryCatch(o)(e);t===d.errorObject?a.error(d.errorObject.e):t&&a.next(e)},function(e){return a.error(e)},function(){return a.complete()});return function(){var e=c.tryCatch(t)();e===d.errorObject?a.error(d.errorObject.e):r.next(e),n.unsubscribe()}})},t.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,o=this._output,r=null;try{r=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=r,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(t){return void o.error(t)}var a=new s.Subscription(function(){t.socket=null,r&&1===r.readyState&&r.close()});r.onopen=function(n){var e=t.openObserver;e&&e.next(n);var s=t.destination;t.destination=i.Subscriber.create(function(e){return 1===r.readyState&&r.send(e)},function(a){var e=t.closingObserver;e&&e.next(void 0),a&&a.code?r.close(a.code,a.reason):o.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()},function(){var e=t.closingObserver;e&&e.next(void 0),r.close(),t._resetState()}),s&&s instanceof p.ReplaySubject&&a.add(s.subscribe(t.destination))},r.onerror=function(r){t._resetState(),o.error(r)},r.onclose=function(r){t._resetState();var e=t.closeObserver;e&&e.next(r),r.wasClean?o.complete():o.error(r)},r.onmessage=function(r){var e=c.tryCatch(t.resultSelector)(r);e===d.errorObject?o.error(d.errorObject.e):o.next(e)}},t.prototype._subscribe=function(e){var t=this,o=this.source;if(o)return o.subscribe(e);this.socket||this._connectSocket();var r=new s.Subscription;return r.add(this._output.subscribe(e)),r.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),r},t.prototype.unsubscribe=function(){var t=this,o=t.source,r=t.socket;r&&1===r.readyState&&(r.close(),this._resetState()),e.prototype.unsubscribe.call(this),o||(this.destination=new p.ReplaySubject)},t}(a.AnonymousSubject);o.WebSocketSubject=b},{"../../Observable":19,"../../ReplaySubject":22,"../../Subject":25,"../../Subscriber":27,"../../Subscription":28,"../../util/assign":344,"../../util/errorObject":345,"../../util/root":356,"../../util/tryCatch":359}],189:[function(e,t,o){"use strict";var r=e("./AjaxObservable");o.ajax=r.AjaxObservable.create},{"./AjaxObservable":187}],190:[function(e,t,o){"use strict";var r=e("./WebSocketSubject");o.webSocket=r.WebSocketSubject.create},{"./WebSocketSubject":188}],191:[function(e,t,o){"use strict";var r=e("./EmptyObservable");o.empty=r.EmptyObservable.create},{"./EmptyObservable":164}],192:[function(e,t,o){"use strict";var r=e("./ForkJoinObservable");o.forkJoin=r.ForkJoinObservable.create},{"./ForkJoinObservable":166}],193:[function(e,t,o){"use strict";var r=e("./FromObservable");o.from=r.FromObservable.create},{"./FromObservable":169}],194:[function(e,t,o){"use strict";var r=e("./FromEventObservable");o.fromEvent=r.FromEventObservable.create},{"./FromEventObservable":167}],195:[function(e,t,o){"use strict";var r=e("./FromEventPatternObservable");o.fromEventPattern=r.FromEventPatternObservable.create},{"./FromEventPatternObservable":168}],196:[function(e,t,o){"use strict";var r=e("./PromiseObservable");o.fromPromise=r.PromiseObservable.create},{"./PromiseObservable":176}],197:[function(e,t,o){"use strict";var r=e("./IfObservable");o._if=r.IfObservable.create},{"./IfObservable":171}],198:[function(e,t,o){"use strict";var r=e("./IntervalObservable");o.interval=r.IntervalObservable.create},{"./IntervalObservable":172}],199:[function(e,t,o){"use strict";var r=e("../operator/merge");o.merge=r.mergeStatic},{"../operator/merge":252}],200:[function(e,t,o){"use strict";var r=e("./NeverObservable");o.never=r.NeverObservable.create},{"./NeverObservable":174}],201:[function(e,t,o){"use strict";var r=e("./ArrayObservable");o.of=r.ArrayObservable.of},{"./ArrayObservable":159}],202:[function(e,t,o){"use strict";var r=e("./PairsObservable");o.pairs=r.PairsObservable.create},{"./PairsObservable":175}],203:[function(e,t,o){"use strict";var r=e("./RangeObservable");o.range=r.RangeObservable.create},{"./RangeObservable":177}],204:[function(e,t,o){"use strict";var r=e("./ErrorObservable");o._throw=r.ErrorObservable.create},{"./ErrorObservable":165}],205:[function(e,t,o){"use strict";var r=e("./TimerObservable");o.timer=r.TimerObservable.create},{"./TimerObservable":180}],206:[function(e,t,o){"use strict";var r=e("./UsingObservable");o.using=r.UsingObservable.create},{"./UsingObservable":181}],207:[function(e,t,o){"use strict";var r=e("../operator/zip");o.zip=r.zipStatic},{"../operator/zip":308}],208:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/tryCatch"),i=e("../util/errorObject"),n=e("../OuterSubscriber"),s=e("../util/subscribeToResult");o.audit=function(e){return this.lift(new l(e))};var l=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.durationSelector))},e}(),p=function(e){function t(t,o){e.call(this,t),this.durationSelector=o,this.hasValue=!1}return r(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=a.tryCatch(this.durationSelector)(e);if(t===i.errorObject)this.destination.error(i.errorObject.e);else{var o=s.subscribeToResult(this,t);o.closed?this.clearThrottle():this.add(this.throttled=o)}}},t.prototype.clearThrottle=function(){var e=this,t=e.value,o=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),o&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(n.OuterSubscriber)},{"../OuterSubscriber":21,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],209:[function(e,t,o){"use strict";function r(e){e.clearThrottle()}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../scheduler/async"),n=e("../Subscriber");o.auditTime=function(e,t){return void 0===t&&(t=i.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.duration,this.scheduler))},e}(),l=function(e){function t(t,o,r){e.call(this,t),this.duration=o,this.scheduler=r,this.hasValue=!1}return a(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(r,this.duration,this))},t.prototype.clearThrottle=function(){var e=this,t=e.value,o=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),o&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t}(n.Subscriber)},{"../Subscriber":27,"../scheduler/async":322}],210:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.buffer=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.closingNotifier))},e}(),s=function(e){function t(t,o){e.call(this,t),this.buffer=[],this.add(i.subscribeToResult(this,o))}return r(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],211:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.bufferCount=function(e,t){return void 0===t&&(t=null),this.lift(new i(e,t))};var i=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?s:n}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),n=function(e){function t(t,o){e.call(this,t),this.bufferSize=o,this.buffer=[]}return r(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),e.prototype._complete.call(this)},t}(a.Subscriber),s=function(e){function t(t,o,r){e.call(this,t),this.bufferSize=o,this.startBufferEvery=r,this.buffers=[],this.count=0}return r(t,e),t.prototype._next=function(e){var t=this,o=t.bufferSize,r=t.startBufferEvery,a=t.buffers,n=t.count;this.count++,0==n%r&&a.push([]);for(var s=a.length,i;s--;)i=a[s],i.push(e),i.length===o&&(a.splice(s,1),this.destination.next(i))},t.prototype._complete=function(){for(var t=this,o=t.buffers,r=t.destination,a;0<o.length;)a=o.shift(),0<a.length&&r.next(a);e.prototype._complete.call(this)},t}(a.Subscriber)},{"../Subscriber":27}],212:[function(e,t,o){"use strict";function r(e){var t=e.subscriber,o=e.context;o&&t.closeContext(o),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function a(e){var t=e.bufferCreationInterval,o=e.bufferTimeSpan,r=e.subscriber,a=e.scheduler,n=r.openContext(),s=this;r.closed||(r.add(n.closeAction=a.schedule(i,o,{subscriber:r,context:n})),s.schedule(e,t))}function i(e){var t=e.subscriber,o=e.context;t.closeContext(o)}var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},s=e("../scheduler/async"),l=e("../Subscriber"),p=e("../util/isScheduler");o.bufferTime=function(e){var t=arguments.length,o=s.async;p.isScheduler(arguments[arguments.length-1])&&(o=arguments[arguments.length-1],t--);var r=null;2<=t&&(r=arguments[1]);var a=Number.POSITIVE_INFINITY;return 3<=t&&(a=arguments[2]),this.lift(new c(e,r,a,o))};var c=function(){function e(e,t,o,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=o,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),d=function(){return function(){this.buffer=[]}}(),u=function(e){function t(t,o,n,s,l){e.call(this,t),this.bufferTimeSpan=o,this.bufferCreationInterval=n,this.maxBufferSize=s,this.scheduler=l,this.contexts=[];var p=this.openContext();if(this.timespanOnly=null==n||0>n,this.timespanOnly){var c={subscriber:this,context:p,bufferTimeSpan:o};this.add(p.closeAction=l.schedule(r,o,c))}else{var d={subscriber:this,context:p},u={bufferTimeSpan:o,bufferCreationInterval:n,subscriber:this,scheduler:l};this.add(p.closeAction=l.schedule(i,o,d)),this.add(l.schedule(a,n,u))}}return n(t,e),t.prototype._next=function(e){for(var t=this.contexts,o=t.length,r=0,a;r<o;r++){var i=t[r],n=i.buffer;n.push(e),n.length==this.maxBufferSize&&(a=i)}a&&this.onBufferFull(a)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this,o=t.contexts,r=t.destination,a;0<o.length;)a=o.shift(),r.next(a.buffer);e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var o=this.bufferTimeSpan,a={subscriber:this,context:e,bufferTimeSpan:o};this.add(e.closeAction=this.scheduler.schedule(r,o,a))}},t.prototype.openContext=function(){var e=new d;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts,o=t?t.indexOf(e):-1;0<=o&&t.splice(t.indexOf(e),1)},t}(l.Subscriber)},{"../Subscriber":27,"../scheduler/async":322,"../util/isScheduler":353}],213:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscription"),i=e("../util/subscribeToResult"),n=e("../OuterSubscriber");o.bufferToggle=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.openings,this.closingSelector))},e}(),l=function(e){function t(t,o,r){e.call(this,t),this.openings=o,this.closingSelector=r,this.contexts=[],this.add(i.subscribeToResult(this,o))}return r(t,e),t.prototype._next=function(e){for(var t=this.contexts,o=t.length,r=0;r<o;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var o=this.contexts,r;0<o.length;)r=o.shift(),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null;this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,o;0<t.length;)o=t.shift(),this.destination.next(o.buffer),o.subscription.unsubscribe(),o.buffer=null,o.subscription=null;this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector,o=t.call(this,e);o&&this.trySubscribe(o)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var o=e.buffer,r=e.subscription;this.destination.next(o),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,o=new a.Subscription,r={buffer:[],subscription:o};t.push(r);var n=i.subscribeToResult(this,e,r);!n||n.closed?this.closeBuffer(r):(n.context=r,this.add(n),o.add(n))},t}(n.OuterSubscriber)},{"../OuterSubscriber":21,"../Subscription":28,"../util/subscribeToResult":357}],214:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscription"),i=e("../util/tryCatch"),n=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");o.bufferWhen=function(e){return this.lift(new p(e))};var p=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(e){function t(t,o){e.call(this,t),this.closingSelector=o,this.subscribing=!1,this.openBuffer()}return r(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var o=i.tryCatch(this.closingSelector)();o===n.errorObject?this.error(n.errorObject.e):(e=new a.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(l.subscribeToResult(this,o)),this.subscribing=!1)},t}(s.OuterSubscriber)},{"../OuterSubscriber":21,"../Subscription":28,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],215:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o._catch=function(e){var t=new n(e),o=this.lift(t);return t.caught=o};var n=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.selector,this.caught))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.selector=o,this.caught=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var o;try{o=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(i.subscribeToResult(this,o))}},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],216:[function(e,t,o){"use strict";var r=e("./combineLatest");o.combineAll=function(e){return this.lift(new r.CombineLatestOperator(e))}},{"./combineLatest":217}],217:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../observable/ArrayObservable"),i=e("../util/isArray"),n=e("../OuterSubscriber"),s=e("../util/subscribeToResult"),l={};o.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=null;return"function"==typeof e[e.length-1]&&(o=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0].slice()),e.unshift(this),this.lift.call(new a.ArrayObservable(e),new p(o))};var p=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project))},e}();o.CombineLatestOperator=p;var c=function(e){function t(t,o){e.call(this,t),this.project=o,this.active=0,this.values=[],this.observables=[]}return r(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var o=0,r;o<t;o++)r=e[o],this.add(s.subscribeToResult(this,r,r,o))}},t.prototype.notifyComplete=function(){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,o){var r=this.values,a=r[o],i=this.toRespond?a===l?--this.toRespond:this.toRespond:0;r[o]=t,0===i&&(this.project?this._tryProject(r):this.destination.next(r.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(n.OuterSubscriber);o.CombineLatestSubscriber=c},{"../OuterSubscriber":21,"../observable/ArrayObservable":159,"../util/isArray":346,"../util/subscribeToResult":357}],218:[function(e,t,o){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=null,r=e;return i.isScheduler(r[e.length-1])&&(o=r.pop()),null===o&&1===e.length&&e[0]instanceof a.Observable?e[0]:new n.ArrayObservable(e,o).lift(new s.MergeAllOperator(1))}var a=e("../Observable"),i=e("../util/isScheduler"),n=e("../observable/ArrayObservable"),s=e("./mergeAll");o.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))},o.concatStatic=r},{"../Observable":19,"../observable/ArrayObservable":159,"../util/isScheduler":353,"./mergeAll":253}],219:[function(e,t,o){"use strict";var r=e("./mergeAll");o.concatAll=function(){return this.lift(new r.MergeAllOperator(1))}},{"./mergeAll":253}],220:[function(e,t,o){"use strict";var r=e("./mergeMap");o.concatMap=function(e,t){return this.lift(new r.MergeMapOperator(e,t,1))}},{"./mergeMap":254}],221:[function(e,t,o){"use strict";var r=e("./mergeMapTo");o.concatMapTo=function(e,t){return this.lift(new r.MergeMapToOperator(e,t,1))}},{"./mergeMapTo":255}],222:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.count=function(e){return this.lift(new i(e,this))};var i=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.predicate,this.source))},e}(),n=function(e){function t(t,o,r){e.call(this,t),this.predicate=o,this.source=r,this.count=0,this.index=0}return r(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":27}],223:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.debounce=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector))},e}(),s=function(e){function t(t,o){e.call(this,t),this.durationSelector=o,this.hasValue=!1,this.durationSubscription=null}return r(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var o=this.durationSubscription;this.value=e,this.hasValue=!0,o&&(o.unsubscribe(),this.remove(o)),o=i.subscribeToResult(this,t),o.closed||this.add(this.durationSubscription=o)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,o=this.durationSubscription;o&&(this.durationSubscription=null,o.unsubscribe(),this.remove(o)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],224:[function(e,t,o){"use strict";function r(e){e.debouncedNext()}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../Subscriber"),n=e("../scheduler/async");o.debounceTime=function(e,t){return void 0===t&&(t=n.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.dueTime,this.scheduler))},e}(),l=function(e){function t(t,o,r){e.call(this,t),this.dueTime=o,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(r,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i.Subscriber)},{"../Subscriber":27,"../scheduler/async":322}],225:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.defaultIfEmpty=function(e){return void 0===e&&(e=null),this.lift(new i(e))};var i=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.defaultValue))},e}(),n=function(e){function t(t,o){e.call(this,t),this.defaultValue=o,this.isEmpty=!0}return r(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":27}],226:[function(e,t,o){"use strict";/**
 * Delays the emission of items from the source Observable by a given timeout or
 * until a given Date.
 *
 * <span class="informal">Time shifts each item by some specified amount of
 * milliseconds.</span>
 *
 * <img src="./img/delay.png" width="100%">
 *
 * If the delay argument is a Number, this operator time shifts the source
 * Observable by that amount of time expressed in milliseconds. The relative
 * time intervals between the values are preserved.
 *
 * If the delay argument is a Date, this operator time shifts the start of the
 * Observable execution until the given date occurs.
 *
 * @example <caption>Delay each click by one second</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var delayedClicks = clicks.delay(1000); // each click emitted after 1 second
 * delayedClicks.subscribe(x => console.log(x));
 *
 * @example <caption>Delay all clicks until a future date happens</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var date = new Date('March 15, 2050 12:00:00'); // in the future
 * var delayedClicks = clicks.delay(date); // click emitted only after that date
 * delayedClicks.subscribe(x => console.log(x));
 *
 * @see {@link debounceTime}
 * @see {@link delayWhen}
 *
 * @param {number|Date} delay The delay duration in milliseconds (a `number`) or
 * a `Date` until which the emission of the source items is delayed.
 * @param {Scheduler} [scheduler=async] The IScheduler to use for
 * managing the timers that handle the time-shift for each item.
 * @return {Observable} An Observable that delays the emissions of the source
 * Observable by the specified timeout or Date.
 * @method delay
 * @owner Observable
 */function r(e,t){void 0===t&&(t=i.async);var o=n.isDate(e),r=o?+e-t.now():Math.abs(e);return this.lift(new p(r,t))}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../scheduler/async"),n=e("../util/isDate"),s=e("../Subscriber"),l=e("../Notification");o.delay=r;var p=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.delay,this.scheduler))},e}(),c=function(e){function t(t,o,r){e.call(this,t),this.delay=o,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return a(t,e),t.dispatch=function(e){for(var t=e.source,o=t.queue,r=e.scheduler,a=e.destination;0<o.length&&0>=o[0].time-r.now();)o.shift().notification.observe(a);if(0<o.length){var i=Math.max(0,o[0].time-r.now());this.schedule(e,i)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,o=new d(t.now()+this.delay,e);this.queue.push(o),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(l.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(l.Notification.createComplete())},t}(s.Subscriber),d=function(){return function(e,t){this.time=e,this.notification=t}}()},{"../Notification":18,"../Subscriber":27,"../scheduler/async":322,"../util/isDate":348}],227:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../Observable"),n=e("../OuterSubscriber"),s=e("../util/subscribeToResult");o.delayWhen=function(e,t){return t?new c(this,t).lift(new l(e)):this.lift(new l(e))};var l=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.delayDurationSelector))},e}(),p=function(e){function t(t,o){e.call(this,t),this.delayDurationSelector=o,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return r(t,e),t.prototype.notifyNext=function(e,t,o,r,a){this.destination.next(e),this.removeSubscription(a),this.tryComplete()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),o=null;return-1!==t&&(o=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),o},t.prototype.tryDelay=function(e,t){var o=s.subscribeToResult(this,e,t);o&&!o.closed&&(this.add(o),this.delayNotifierSubscriptions.push(o)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(n.OuterSubscriber),c=function(e){function t(t,o){e.call(this),this.source=t,this.subscriptionDelay=o}return r(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new d(e,this.source))},t}(i.Observable),d=function(e){function t(t,o){e.call(this),this.parent=t,this.source=o,this.sourceSubscribed=!1}return r(t,e),t.prototype._next=function(){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(a.Subscriber)},{"../Observable":19,"../OuterSubscriber":21,"../Subscriber":27,"../util/subscribeToResult":357}],228:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.dematerialize=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new n(e))},e}(),n=function(e){function t(t){e.call(this,t)}return r(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(a.Subscriber)},{"../Subscriber":27}],229:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult"),n=e("../util/Set");o.distinct=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.keySelector,this.flushes))},e}(),l=function(e){function t(t,o,r){e.call(this,t),this.keySelector=o,this.values=new n.Set,r&&this.add(i.subscribeToResult(this,r))}return r(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination,o;try{o=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(o,e)},t.prototype._finalizeNext=function(e,t){var o=this.values;o.has(e)||(o.add(e),this.destination.next(t))},t}(a.OuterSubscriber);o.DistinctSubscriber=l},{"../OuterSubscriber":21,"../util/Set":340,"../util/subscribeToResult":357}],230:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/tryCatch"),n=e("../util/errorObject");o.distinctUntilChanged=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.compare,this.keySelector))},e}(),l=function(e){function t(t,o,r){e.call(this,t),this.keySelector=r,this.hasKey=!1,"function"==typeof o&&(this.compare=o)}return r(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=this.keySelector,o=e;if(t&&(o=i.tryCatch(this.keySelector)(e),o===n.errorObject))return this.destination.error(n.errorObject.e);var r=!1;if(!this.hasKey)this.hasKey=!0;else if(r=i.tryCatch(this.compare)(this.key,o),r===n.errorObject)return this.destination.error(n.errorObject.e);!1===!!r&&(this.key=o,this.destination.next(e))},t}(a.Subscriber)},{"../Subscriber":27,"../util/errorObject":345,"../util/tryCatch":359}],231:[function(e,t,o){"use strict";var r=e("./distinctUntilChanged");o.distinctUntilKeyChanged=function(e,t){return r.distinctUntilChanged.call(this,function(o,r){return t?t(o[e],r[e]):o[e]===r[e]})}},{"./distinctUntilChanged":230}],232:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o._do=function(e,t,o){return this.lift(new i(e,t,o))};var i=function(){function e(e,t,o){this.nextOrObserver=e,this.error=t,this.complete=o}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.nextOrObserver,this.error,this.complete))},e}(),n=function(e){function t(t,o,r,i){e.call(this,t);var n=new a.Subscriber(o,r,i);n.syncErrorThrowable=!0,this.add(n),this.safeSubscriber=n}return r(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":27}],233:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/ArgumentOutOfRangeError");o.elementAt=function(e,t){return this.lift(new n(e,t))};var n=function(){function e(e,t){if(this.index=e,this.defaultValue=t,0>e)throw new i.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.index,this.defaultValue))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.index=o,this.defaultValue=r}return r(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;0<=this.index&&("undefined"==typeof this.defaultValue?e.error(new i.ArgumentOutOfRangeError):e.next(this.defaultValue)),e.complete()},t}(a.Subscriber)},{"../Subscriber":27,"../util/ArgumentOutOfRangeError":333}],234:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.every=function(e,t){return this.lift(new i(e,t,this))};var i=function(){function e(e,t,o){this.predicate=e,this.thisArg=t,this.source=o}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.predicate,this.thisArg,this.source))},e}(),n=function(e){function t(t,o,r,a){e.call(this,t),this.predicate=o,this.thisArg=r,this.source=a,this.index=0,this.thisArg=r||this}return r(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(a.Subscriber)},{"../Subscriber":27}],235:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.exhaust=function(){return this.lift(new n)};var n=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return r(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(i.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],236:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.exhaustMap=function(e,t){return this.lift(new n(e,t))};var n=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.project=o,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return r(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,o=this.destination;try{var r=this.project(e,t);this.hasSubscription=!0,this.add(i.subscribeToResult(this,r,e,t))}catch(e){o.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,o,r){var a=this,i=a.resultSelector,n=a.destination;i?this.trySelectResult(e,t,o,r):n.next(t)},t.prototype.trySelectResult=function(e,t,o,r){var a=this,i=a.resultSelector,n=a.destination;try{var s=i(e,t,o,r);n.next(s)}catch(e){n.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],237:[function(e,t,o){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../util/tryCatch"),n=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");o.expand=function(e,t,o){return void 0===t&&(t=r),void 0===o&&(o=void 0),t=1>(t||0)?r:t,this.lift(new p(e,t,o))};var p=function(){function e(e,t,o){this.project=e,this.concurrent=t,this.scheduler=o}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},e}();o.ExpandOperator=p;var c=function(e){function t(t,o,a,i){e.call(this,t),this.project=o,this.concurrent=a,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,a<r&&(this.buffer=[])}return a(t,e),t.dispatch=function(e){var t=e.subscriber,o=e.result,r=e.value,a=e.index;t.subscribeToProjection(o,r,a)},t.prototype._next=function(e){var o=this.destination;if(o.closed)return void this._complete();var r=this.index++;if(this.active<this.concurrent){o.next(e);var a=i.tryCatch(this.project)(e,r);if(a===n.errorObject)o.error(n.errorObject.e);else if(!this.scheduler)this.subscribeToProjection(a,e,r);else{var s={subscriber:this,result:a,value:e,index:r};this.add(this.scheduler.schedule(t.dispatch,0,s))}}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,t,o){this.active++,this.add(l.subscribeToResult(this,e,t,o))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&0<t.length&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(s.OuterSubscriber);o.ExpandSubscriber=c},{"../OuterSubscriber":21,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],238:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.filter=function(e,t){return this.lift(new i(e,t))};var i=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.predicate,this.thisArg))},e}(),n=function(e){function t(t,o,r){e.call(this,t),this.predicate=o,this.thisArg=r,this.count=0,this.predicate=o}return r(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(a.Subscriber)},{"../Subscriber":27}],239:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../Subscription");o._finally=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.callback))},e}(),s=function(e){function t(t,o){e.call(this,t),this.add(new i.Subscription(o))}return r(t,e),t}(a.Subscriber)},{"../Subscriber":27,"../Subscription":28}],240:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.find=function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return this.lift(new i(e,this,!1,t))};var i=function(){function e(e,t,o,r){this.predicate=e,this.source=t,this.yieldIndex=o,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();o.FindValueOperator=i;var n=function(e){function t(t,o,r,a,i){e.call(this,t),this.predicate=o,this.source=r,this.yieldIndex=a,this.thisArg=i,this.index=0}return r(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this,o=t.predicate,r=t.thisArg,a=this.index++;try{var i=o.call(r||this,e,a,this.source);i&&this.notifyComplete(this.yieldIndex?a:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(a.Subscriber);o.FindValueSubscriber=n},{"../Subscriber":27}],241:[function(e,t,o){"use strict";var r=e("./find");o.findIndex=function(e,t){return this.lift(new r.FindValueOperator(e,this,!0,t))}},{"./find":240}],242:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/EmptyError");o.first=function(e,t,o){return this.lift(new n(e,t,o,this))};var n=function(){function e(e,t,o,r){this.predicate=e,this.resultSelector=t,this.defaultValue=o,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,o,r,a,i){e.call(this,t),this.predicate=o,this.resultSelector=r,this.defaultValue=a,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var o;try{o=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}o&&this._emit(e,t)},t.prototype._emit=function(e,t){return this.resultSelector?void this._tryResultSelector(e,t):void this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var o;try{o=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(o)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?!this.hasCompleted&&e.error(new i.EmptyError):(e.next(this.defaultValue),e.complete())},t}(a.Subscriber)},{"../Subscriber":27,"../util/EmptyError":334}],243:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../Subscription"),n=e("../Observable"),s=e("../Subject"),l=e("../util/Map"),p=e("../util/FastMap");o.groupBy=function(e,t,o,r){return this.lift(new c(e,t,o,r))};var c=function(){function e(e,t,o,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=o,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),d=function(e){function t(t,o,r,a,i){e.call(this,t),this.keySelector=o,this.elementSelector=r,this.durationSelector=a,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return r(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var o=this.groups;o||(o=this.groups="string"==typeof t?new p.FastMap:new l.Map);var r=o.get(t),a;if(this.elementSelector)try{a=this.elementSelector(e)}catch(e){this.error(e)}else a=e;if(!r){r=this.subjectSelector?this.subjectSelector():new s.Subject,o.set(t,r);var i=new b(t,r,this);if(this.destination.next(i),this.durationSelector){var n;try{n=this.durationSelector(new b(t,r))}catch(e){return void this.error(e)}this.add(n.subscribe(new u(t,r,this)))}}r.closed||r.next(a)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(a.Subscriber),u=function(e){function t(t,o,r){e.call(this,o),this.key=t,this.group=o,this.parent=r}return r(t,e),t.prototype._next=function(){this.complete()},t.prototype._unsubscribe=function(){var e=this,t=e.parent,o=e.key;this.key=this.parent=null,t&&t.removeGroup(o)},t}(a.Subscriber),b=function(e){function t(t,o,r){e.call(this),this.key=t,this.groupSubject=o,this.refCountSubscription=r}return r(t,e),t.prototype._subscribe=function(e){var t=new i.Subscription,o=this,r=o.refCountSubscription,a=o.groupSubject;return r&&!r.closed&&t.add(new m(r)),t.add(a.subscribe(e)),t},t}(n.Observable);o.GroupedObservable=b;var m=function(e){function t(t){e.call(this),this.parent=t,t.count++}return r(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(i.Subscription)},{"../Observable":19,"../Subject":25,"../Subscriber":27,"../Subscription":28,"../util/FastMap":335,"../util/Map":337}],244:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/noop");o.ignoreElements=function(){return this.lift(new n)};var n=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype._next=function(){i.noop()},t}(a.Subscriber)},{"../Subscriber":27,"../util/noop":354}],245:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.isEmpty=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new n(e))},e}(),n=function(e){function t(t){e.call(this,t)}return r(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(a.Subscriber)},{"../Subscriber":27}],246:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/EmptyError");o.last=function(e,t,o){return this.lift(new n(e,t,o,this))};var n=function(){function e(e,t,o,r){this.predicate=e,this.resultSelector=t,this.defaultValue=o,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(e){function t(t,o,r,a,i){e.call(this,t),this.predicate=o,this.resultSelector=r,this.defaultValue=a,this.source=i,this.hasValue=!1,this.index=0,"undefined"!=typeof a&&(this.lastValue=a,this.hasValue=!0)}return r(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var o;try{o=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(o){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var o;try{o=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=o,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new i.EmptyError)},t}(a.Subscriber)},{"../Subscriber":27,"../util/EmptyError":334}],247:[function(e,t,o){"use strict";o.letProto=function(e){return e(this)}},{}],248:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.map=function(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new i(e,t))};var i=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.project,this.thisArg))},e}();o.MapOperator=i;var n=function(e){function t(t,o,r){e.call(this,t),this.project=o,this.count=0,this.thisArg=r||this}return r(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.Subscriber)},{"../Subscriber":27}],249:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.mapTo=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.value))},e}(),n=function(e){function t(t,o){e.call(this,t),this.value=o}return r(t,e),t.prototype._next=function(){this.destination.next(this.value)},t}(a.Subscriber)},{"../Subscriber":27}],250:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../Notification");o.materialize=function(){return this.lift(new n)};var n=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return r(t,e),t.prototype._next=function(e){this.destination.next(i.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(i.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(i.Notification.createComplete()),e.complete()},t}(a.Subscriber)},{"../Notification":18,"../Subscriber":27}],251:[function(e,t,o){"use strict";function r(e){var t="function"==typeof e?function(t,o){return 0<e(t,o)?t:o}:function(e,t){return e>t?e:t};return this.lift(new a.ReduceOperator(t))}var a=e("./reduce");o.max=r},{"./reduce":269}],252:[function(e,t,o){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=Number.POSITIVE_INFINITY,r=null,l=e[e.length-1];return s.isScheduler(l)?(r=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(o=e.pop())):"number"==typeof l&&(o=e.pop()),null===r&&1===e.length&&e[0]instanceof a.Observable?e[0]:new i.ArrayObservable(e,r).lift(new n.MergeAllOperator(o))}var a=e("../Observable"),i=e("../observable/ArrayObservable"),n=e("./mergeAll"),s=e("../util/isScheduler");o.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))},o.mergeStatic=r},{"../Observable":19,"../observable/ArrayObservable":159,"../util/isScheduler":353,"./mergeAll":253}],253:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new n(e))};var n=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.concurrent))},e}();o.MergeAllOperator=n;var s=function(e){function t(t,o){e.call(this,t),this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(i.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);o.MergeAllSubscriber=s},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],254:[function(e,t,o){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../util/subscribeToResult"),n=e("../OuterSubscriber");o.mergeMap=function(e,t,o){return void 0===o&&(o=r),"number"==typeof t&&(o=t,t=null),this.lift(new s(e,t,o))};var s=function(){function e(e,t,o){void 0===o&&(o=r),this.project=e,this.resultSelector=t,this.concurrent=o}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.resultSelector,this.concurrent))},e}();o.MergeMapOperator=s;var l=function(e){function t(t,o,a,i){void 0===i&&(i=r),e.call(this,t),this.project=o,this.resultSelector=a,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return a(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++,o;try{o=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(o,e,t)},t.prototype._innerSub=function(e,t,o){this.add(i.subscribeToResult(this,e,t,o))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,o,r){this.resultSelector?this._notifyResultSelector(e,t,o,r):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,o,r){var a;try{a=this.resultSelector(e,t,o,r)}catch(e){return void this.destination.error(e)}this.destination.next(a)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber);o.MergeMapSubscriber=l},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],255:[function(e,t,o){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../OuterSubscriber"),n=e("../util/subscribeToResult");o.mergeMapTo=function(e,t,o){return void 0===o&&(o=r),"number"==typeof t&&(o=t,t=null),this.lift(new s(e,t,o))};var s=function(){function e(e,t,o){void 0===o&&(o=r),this.ish=e,this.resultSelector=t,this.concurrent=o}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.ish,this.resultSelector,this.concurrent))},e}();o.MergeMapToOperator=s;var l=function(e){function t(t,o,a,i){void 0===i&&(i=r),e.call(this,t),this.ish=o,this.resultSelector=a,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return a(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,o=this.index++,r=this.ish,a=this.destination;this.active++,this._innerSub(r,a,t,e,o)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,o,r,a){this.add(n.subscribeToResult(this,e,r,a))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,o,r){var a=this,i=a.resultSelector,n=a.destination;i?this.trySelectResult(e,t,o,r):n.next(t)},t.prototype.trySelectResult=function(e,t,o,r){var a=this,i=a.resultSelector,n=a.destination,s;try{s=i(e,t,o,r)}catch(e){return void n.error(e)}n.next(s)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);o.MergeMapToSubscriber=l},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],256:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/tryCatch"),i=e("../util/errorObject"),n=e("../util/subscribeToResult"),s=e("../OuterSubscriber");o.mergeScan=function(e,t,o){return void 0===o&&(o=Number.POSITIVE_INFINITY),this.lift(new l(e,t,o))};var l=function(){function e(e,t,o){this.accumulator=e,this.seed=t,this.concurrent=o}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.accumulator,this.seed,this.concurrent))},e}();o.MergeScanOperator=l;var p=function(e){function t(t,o,r,a){e.call(this,t),this.accumulator=o,this.acc=r,this.concurrent=a,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,o=a.tryCatch(this.accumulator)(this.acc,e),r=this.destination;o===i.errorObject?r.error(i.errorObject.e):(this.active++,this._innerSub(o,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,o){this.add(n.subscribeToResult(this,e,t,o))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(s.OuterSubscriber);o.MergeScanSubscriber=p},{"../OuterSubscriber":21,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],257:[function(e,t,o){"use strict";function r(e){var t="function"==typeof e?function(t,o){return 0>e(t,o)?t:o}:function(e,t){return e<t?e:t};return this.lift(new a.ReduceOperator(t))}var a=e("./reduce");o.min=r},{"./reduce":269}],258:[function(e,t,o){"use strict";var r=e("../observable/ConnectableObservable");o.multicast=function(e,t){var o;if(o="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new a(o,t));var i=Object.create(this,r.connectableObservableDescriptor);return i.source=this,i.subjectFactory=o,i};var a=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var o=this.selector,r=this.subjectFactory(),a=o(r).subscribe(e);return a.add(t.subscribe(r)),a},e}();o.MulticastOperator=a},{"../observable/ConnectableObservable":162}],259:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../Notification");o.observeOn=function(e,t){return void 0===t&&(t=0),this.lift(new n(e,t))};var n=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))},e}();o.ObserveOnOperator=n;var s=function(e){function t(t,o,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=o,this.delay=r}return r(t,e),t.dispatch=function(e){var t=e.notification,o=e.destination;t.observe(o),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(i.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(i.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(i.Notification.createComplete())},t}(a.Subscriber);o.ObserveOnSubscriber=s;var l=function(){return function(e,t){this.notification=e,this.destination=t}}();o.ObserveOnMessage=l},{"../Notification":18,"../Subscriber":27}],260:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../observable/FromObservable"),i=e("../util/isArray"),n=e("../OuterSubscriber"),s=e("../util/subscribeToResult");o.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&i.isArray(e[0])&&(e=e[0]),this.lift(new l(e))},o.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=null;return 1===e.length&&i.isArray(e[0])&&(e=e[0]),o=e.shift(),new a.FromObservable(o,null).lift(new l(e))};var l=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.nextSources))},e}(),p=function(e){function t(t,o){e.call(this,t),this.destination=t,this.nextSources=o}return r(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(s.subscribeToResult(this,e)):this.destination.complete()},t}(n.OuterSubscriber)},{"../OuterSubscriber":21,"../observable/FromObservable":169,"../util/isArray":346,"../util/subscribeToResult":357}],261:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.pairwise=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new n(e))},e}(),n=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return r(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(a.Subscriber)},{"../Subscriber":27}],262:[function(e,t,o){"use strict";var r=e("../util/not"),a=e("./filter");o.partition=function(e,t){return[a.filter.call(this,e,t),a.filter.call(this,r.not(e,t))]}},{"../util/not":355,"./filter":238}],263:[function(e,t,o){"use strict";function r(e,t){return function(o){for(var r=o,a=0,i;a<t;a++)if(i=r[e[a]],"undefined"!=typeof i)r=i;else return;return r}}var a=e("./map");o.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=e.length;if(0===o)throw new Error("list of properties cannot be empty.");return a.map.call(this,r(e,o))}},{"./map":248}],264:[function(e,t,o){"use strict";var r=e("../Subject"),a=e("./multicast");o.publish=function(e){return e?a.multicast.call(this,function(){return new r.Subject},e):a.multicast.call(this,new r.Subject)}},{"../Subject":25,"./multicast":258}],265:[function(e,t,o){"use strict";var r=e("../BehaviorSubject"),a=e("./multicast");o.publishBehavior=function(e){return a.multicast.call(this,new r.BehaviorSubject(e))}},{"../BehaviorSubject":16,"./multicast":258}],266:[function(e,t,o){"use strict";var r=e("../AsyncSubject"),a=e("./multicast");o.publishLast=function(){return a.multicast.call(this,new r.AsyncSubject)}},{"../AsyncSubject":15,"./multicast":258}],267:[function(e,t,o){"use strict";var r=Number.POSITIVE_INFINITY,a=e("../ReplaySubject"),i=e("./multicast");o.publishReplay=function(e,t,o){return void 0===e&&(e=r),void 0===t&&(t=r),i.multicast.call(this,new a.ReplaySubject(e,t,o))}},{"../ReplaySubject":22,"./multicast":258}],268:[function(e,t,o){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length)if(i.isArray(e[0]))e=e[0];else return e[0];return new n.ArrayObservable(e).lift(new p)}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../util/isArray"),n=e("../observable/ArrayObservable"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");o.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&i.isArray(e[0])&&(e=e[0]),this.lift.call(r.apply(void 0,[this].concat(e)))},o.raceStatic=r;var p=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}();o.RaceOperator=p;var c=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return a(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var o=0;o<t&&!this.hasFirst;o++){var r=e[o],a=l.subscribeToResult(this,r,r,o);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}},t.prototype.notifyNext=function(e,t,o){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==o){var a=this.subscriptions[r];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber);o.RaceSubscriber=c},{"../OuterSubscriber":21,"../observable/ArrayObservable":159,"../util/isArray":346,"../util/subscribeToResult":357}],269:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.reduce=function(e,t){var o=!1;return 2<=arguments.length&&(o=!0),this.lift(new i(e,t,o))};var i=function(){function e(e,t,o){void 0===o&&(o=!1),this.accumulator=e,this.seed=t,this.hasSeed=o}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.accumulator,this.seed,this.hasSeed))},e}();o.ReduceOperator=i;var n=function(e){function t(t,o,r,a){e.call(this,t),this.accumulator=o,this.hasSeed=a,this.index=0,this.hasValue=!1,this.acc=r,this.hasSeed||this.index++}return r(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e,this.index++)}catch(e){return void this.destination.error(e)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(a.Subscriber);o.ReduceSubscriber=n},{"../Subscriber":27}],270:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../observable/EmptyObservable");o.repeat=function(e){return void 0===e&&(e=-1),0===e?new i.EmptyObservable:0>e?this.lift(new n(-1,this)):this.lift(new n(e-1,this))};var n=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.count=o,this.source=r}return r(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this,o=t.source,r=t.count;if(0===r)return e.prototype.complete.call(this);-1<r&&(this.count=r-1),o.subscribe(this._unsubscribeAndRecycle())}},t}(a.Subscriber)},{"../Subscriber":27,"../observable/EmptyObservable":164}],271:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../util/tryCatch"),n=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");o.repeatWhen=function(e){return this.lift(new p(e))};var p=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,t))},e}(),c=function(e){function t(t,o,r){e.call(this,t),this.notifier=o,this.source=r,this.sourceIsBeingSubscribedTo=!0}return r(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(!this.retries)this.subscribeToRetries();else if(this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this,t=e.notifications,o=e.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),o&&(o.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this,o=t.notifications,r=t.retries,a=t.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=o,this.retries=r,this.retriesSubscription=a,this},t.prototype.subscribeToRetries=function(){this.notifications=new a.Subject;var t=i.tryCatch(this.notifier)(this.notifications);return t===n.errorObject?e.prototype.complete.call(this):void(this.retries=t,this.retriesSubscription=l.subscribeToResult(this,t))},t}(s.OuterSubscriber)},{"../OuterSubscriber":21,"../Subject":25,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],272:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.retry=function(e){return void 0===e&&(e=-1),this.lift(new i(e,this))};var i=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.count,this.source))},e}(),n=function(e){function t(t,o,r){e.call(this,t),this.count=o,this.source=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var o=this,r=o.source,a=o.count;if(0===a)return e.prototype.error.call(this,t);-1<a&&(this.count=a-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(a.Subscriber)},{"../Subscriber":27}],273:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../util/tryCatch"),n=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");o.retryWhen=function(e){return this.lift(new p(e,this))};var p=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,this.source))},e}(),c=function(e){function t(t,o,r){e.call(this,t),this.notifier=o,this.source=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var o=this.errors,r=this.retries,s=this.retriesSubscription;if(!r){if(o=new a.Subject,r=i.tryCatch(this.notifier)(o),r===n.errorObject)return e.prototype.error.call(this,n.errorObject.e);s=l.subscribeToResult(this,r)}else this.errors=null,this.retriesSubscription=null;this._unsubscribeAndRecycle(),this.errors=o,this.retries=r,this.retriesSubscription=s,o.next(t)}},t.prototype._unsubscribe=function(){var e=this,t=e.errors,o=e.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),o&&(o.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(){var e=this,t=e.errors,o=e.retries,r=e.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=t,this.retries=o,this.retriesSubscription=r,this.source.subscribe(this)},t}(s.OuterSubscriber)},{"../OuterSubscriber":21,"../Subject":25,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],274:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.sample=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var o=new s(e),r=t.subscribe(o);return r.add(i.subscribeToResult(o,this.notifier)),r},e}(),s=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return r(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],275:[function(e,t,o){"use strict";function r(e){var t=e.subscriber,o=e.period;t.notifyNext(),this.schedule(e,o)}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../Subscriber"),n=e("../scheduler/async");o.sampleTime=function(e,t){return void 0===t&&(t=n.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.period,this.scheduler))},e}(),l=function(e){function t(t,o,a){e.call(this,t),this.period=o,this.scheduler=a,this.hasValue=!1,this.add(a.schedule(r,o,{subscriber:this,period:o}))}return a(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber)},{"../Subscriber":27,"../scheduler/async":322}],276:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.scan=function(e,t){var o=!1;return 2<=arguments.length&&(o=!0),this.lift(new i(e,t,o))};var i=function(){function e(e,t,o){void 0===o&&(o=!1),this.accumulator=e,this.seed=t,this.hasSeed=o}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.accumulator,this.seed,this.hasSeed))},e}(),n=function(e){function t(t,o,r,a){e.call(this,t),this.accumulator=o,this._seed=r,this.hasSeed=a,this.index=0}return r(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){return this.hasSeed?this._tryNext(e):void(this.seed=e,this.destination.next(e))},t.prototype._tryNext=function(e){var t=this.index++,o;try{o=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=o,this.destination.next(o)},t}(a.Subscriber)},{"../Subscriber":27}],277:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/tryCatch"),n=e("../util/errorObject");o.sequenceEqual=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.compareTo,this.comparor))},e}();o.SequenceEqualOperator=s;var l=function(e){function t(t,o,r){e.call(this,t),this.compareTo=o,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(o.subscribe(new p(t,this)))}return r(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this,t=e._a,o=e._b,r=e.comparor;0<t.length&&0<o.length;){var s=t.shift(),a=o.shift(),l=!1;r?(l=i.tryCatch(r)(s,a),l===n.errorObject&&this.destination.error(n.errorObject.e)):l=s===a,l||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(a.Subscriber);o.SequenceEqualSubscriber=l;var p=function(e){function t(t,o){e.call(this,t),this.parent=o}return r(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(a.Subscriber)},{"../Subscriber":27,"../util/errorObject":345,"../util/tryCatch":359}],278:[function(e,t,o){"use strict";function r(){return new i.Subject}var a=e("./multicast"),i=e("../Subject");o.share=function(){return a.multicast.call(this,r).refCount()}},{"../Subject":25,"./multicast":258}],279:[function(e,t,o){"use strict";var r=e("./multicast"),a=e("../ReplaySubject");o.shareReplay=function(e,t,o){var i=r.multicast.call(this,function(){return this._isComplete?n:n=new a.ReplaySubject(e,t,o)}),n;return i.refCount()}},{"../ReplaySubject":22,"./multicast":258}],280:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/EmptyError");o.single=function(e){return this.lift(new n(e,this))};var n=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.predicate=o,this.source=r,this.seenValue=!1,this.index=0}return r(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;0<this.index?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new i.EmptyError)},t}(a.Subscriber)},{"../Subscriber":27,"../util/EmptyError":334}],281:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.skip=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.total))},e}(),n=function(e){function t(t,o){e.call(this,t),this.total=o,this.count=0}return r(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(a.Subscriber)},{"../Subscriber":27}],282:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/ArgumentOutOfRangeError");o.skipLast=function(e){return this.lift(new n(e))};var n=function(){function e(e){if(this._skipCount=e,0>this._skipCount)throw new i.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new a.Subscriber(e)):t.subscribe(new s(e,this._skipCount))},e}(),s=function(e){function t(t,o){e.call(this,t),this._skipCount=o,this._count=0,this._ring=Array(o)}return r(t,e),t.prototype._next=function(e){var t=this._skipCount,o=this._count++;if(o<t)this._ring[o]=e;else{var r=o%t,a=this._ring,i=a[r];a[r]=e,this.destination.next(i)}},t}(a.Subscriber)},{"../Subscriber":27,"../util/ArgumentOutOfRangeError":333}],283:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.skipUntil=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,o){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(i.subscribeToResult(this,o))}return r(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],284:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.skipWhile=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.predicate))},e}(),n=function(e){function t(t,o){e.call(this,t),this.predicate=o,this.skipping=!0,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=!!t}catch(e){this.destination.error(e)}},t}(a.Subscriber)},{"../Subscriber":27}],285:[function(e,t,o){"use strict";var r=e("../observable/ArrayObservable"),a=e("../observable/ScalarObservable"),i=e("../observable/EmptyObservable"),n=e("./concat"),s=e("../util/isScheduler");o.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=e[e.length-1];s.isScheduler(o)?e.pop():o=null;var l=e.length;return 1===l?n.concatStatic(new a.ScalarObservable(e[0],o),this):1<l?n.concatStatic(new r.ArrayObservable(e,o),this):n.concatStatic(new i.EmptyObservable(o),this)}},{"../observable/ArrayObservable":159,"../observable/EmptyObservable":164,"../observable/ScalarObservable":178,"../util/isScheduler":353,"./concat":218}],286:[function(e,t,o){"use strict";var r=e("../observable/SubscribeOnObservable");o.subscribeOn=function(e,t){return void 0===t&&(t=0),this.lift(new a(e,t))};var a=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new r.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},{"../observable/SubscribeOnObservable":179}],287:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o._switch=function(){return this.lift(new n)};var n=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.active=0,this.hasCompleted=!1}return r(t,e),t.prototype._next=function(e){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=i.subscribeToResult(this,e))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},t.prototype.unsubscribeInner=function(){this.active=0<this.active?this.active-1:0;var e=this.innerSubscription;e&&(e.unsubscribe(),this.remove(e))},t.prototype.notifyNext=function(e,t){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],288:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.switchMap=function(e,t){return this.lift(new n(e,t))};var n=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.project=o,this.resultSelector=r,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.index++,o;try{o=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(o,e,t)},t.prototype._innerSub=function(e,t,o){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=i.subscribeToResult(this,e,t,o))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,o,r){this.resultSelector?this._tryNotifyNext(e,t,o,r):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,o,r){var a;try{a=this.resultSelector(e,t,o,r)}catch(e){return void this.destination.error(e)}this.destination.next(a)},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],289:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.switchMapTo=function(e,t){return this.lift(new n(e,t))};var n=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observable,this.resultSelector))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.inner=o,this.resultSelector=r,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=i.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,o,r){var a=this,i=a.resultSelector,n=a.destination;i?this.tryResultSelector(e,t,o,r):n.next(t)},t.prototype.tryResultSelector=function(e,t,o,r){var a=this,i=a.resultSelector,n=a.destination,s;try{s=i(e,t,o,r)}catch(e){return void n.error(e)}n.next(s)},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],290:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/ArgumentOutOfRangeError"),n=e("../observable/EmptyObservable");o.take=function(e){return 0===e?new n.EmptyObservable:this.lift(new s(e))};var s=function(){function e(e){if(this.total=e,0>this.total)throw new i.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,o){e.call(this,t),this.total=o,this.count=0}return r(t,e),t.prototype._next=function(e){var t=this.total,o=++this.count;o<=t&&(this.destination.next(e),o===t&&(this.destination.complete(),this.unsubscribe()))},t}(a.Subscriber)},{"../Subscriber":27,"../observable/EmptyObservable":164,"../util/ArgumentOutOfRangeError":333}],291:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../util/ArgumentOutOfRangeError"),n=e("../observable/EmptyObservable");o.takeLast=function(e){return 0===e?new n.EmptyObservable:this.lift(new s(e))};var s=function(){function e(e){if(this.total=e,0>this.total)throw new i.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,o){e.call(this,t),this.total=o,this.ring=[],this.count=0}return r(t,e),t.prototype._next=function(e){var t=this.ring,o=this.total,r=this.count++;if(t.length<o)t.push(e);else{t[r%o]=e}},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var o=this.count>=this.total?this.total:this.count,r=this.ring,a=0,i;a<o;a++)i=t++%o,e.next(r[i]);e.complete()},t}(a.Subscriber)},{"../Subscriber":27,"../observable/EmptyObservable":164,"../util/ArgumentOutOfRangeError":333}],292:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.takeUntil=function(e){return this.lift(new n(e))};var n=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,o){e.call(this,t),this.notifier=o,this.add(i.subscribeToResult(this,o))}return r(t,e),t.prototype.notifyNext=function(){this.complete()},t.prototype.notifyComplete=function(){},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],293:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.takeWhile=function(e){return this.lift(new i(e))};var i=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new n(e,this.predicate))},e}(),n=function(e){function t(t,o){e.call(this,t),this.predicate=o,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.destination,o;try{o=this.predicate(e,this.index++)}catch(e){return void t.error(e)}this.nextOrComplete(e,o)},t.prototype.nextOrComplete=function(e,t){var o=this.destination;t?o.next(e):o.complete()},t}(a.Subscriber)},{"../Subscriber":27}],294:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),i=e("../util/subscribeToResult");o.defaultThrottleConfig={leading:!0,trailing:!1},o.throttle=function(e,t){return void 0===t&&(t=o.defaultThrottleConfig),this.lift(new n(e,t.leading,t.trailing))};var n=function(){function e(e,t,o){this.durationSelector=e,this.leading=t,this.trailing=o}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector,this.leading,this.trailing))},e}(),s=function(e){function t(t,o,r,a){e.call(this,t),this.destination=t,this.durationSelector=o,this._leading=r,this._trailing=a,this._hasTrailingValue=!1}return r(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=i.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype._unsubscribe=function(){var e=this,t=e.throttled,o=e._trailingValue,r=e._hasTrailingValue,a=e._trailing;this._trailingValue=null,this._hasTrailingValue=!1,t&&(this.remove(t),this.throttled=null,t.unsubscribe())},t.prototype._sendTrailing=function(){var e=this,t=e.destination,o=e.throttled,r=e._trailing,a=e._trailingValue,i=e._hasTrailingValue;o&&r&&i&&(t.next(a),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],295:[function(e,t,o){"use strict";function r(e){var t=e.subscriber;t.clearThrottle()}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../Subscriber"),n=e("../scheduler/async"),s=e("./throttle");o.throttleTime=function(e,t,o){return void 0===t&&(t=n.async),void 0===o&&(o=s.defaultThrottleConfig),this.lift(new l(e,t,o.leading,o.trailing))};var l=function(){function e(e,t,o,r){this.duration=e,this.scheduler=t,this.leading=o,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),p=function(e){function t(t,o,r,a,i){e.call(this,t),this.duration=o,this.scheduler=r,this.leading=a,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}return a(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(r,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i.Subscriber)},{"../Subscriber":27,"../scheduler/async":322,"./throttle":294}],296:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../scheduler/async");o.timeInterval=function(e){return void 0===e&&(e=i.async),this.lift(new s(e))};var n=function(){return function(e,t){this.value=e,this.interval=t}}();o.TimeInterval=n;var s=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.scheduler))},e}(),l=function(e){function t(t,o){e.call(this,t),this.scheduler=o,this.lastTime=0,this.lastTime=o.now()}return r(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),o=t-this.lastTime;this.lastTime=t,this.destination.next(new n(e,o))},t}(a.Subscriber)},{"../Subscriber":27,"../scheduler/async":322}],297:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../scheduler/async"),i=e("../util/isDate"),n=e("../Subscriber"),s=e("../util/TimeoutError");o.timeout=function(e,t){void 0===t&&(t=a.async);var o=i.isDate(e),r=o?+e-t.now():Math.abs(e);return this.lift(new l(r,o,t,new s.TimeoutError()))};var l=function(){function e(e,t,o,r){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=o,this.errorInstance=r}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),p=function(e){function t(t,o,r,a,i){e.call(this,t),this.absoluteTimeout=o,this.waitFor=r,this.scheduler=a,this.errorInstance=i,this.action=null,this.scheduleTimeout()}return r(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(n.Subscriber)},{"../Subscriber":27,"../scheduler/async":322,"../util/TimeoutError":341,"../util/isDate":348}],298:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../scheduler/async"),i=e("../util/isDate"),n=e("../OuterSubscriber"),s=e("../util/subscribeToResult");o.timeoutWith=function(e,t,o){void 0===o&&(o=a.async);var r=i.isDate(e),n=r?+e-o.now():Math.abs(e);return this.lift(new l(n,r,t,o))};var l=function(){function e(e,t,o,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=o,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),p=function(e){function t(t,o,r,a,i){e.call(this,t),this.absoluteTimeout=o,this.waitFor=r,this.withObservable=a,this.scheduler=i,this.action=null,this.scheduleTimeout()}return r(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(s.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(n.OuterSubscriber)},{"../OuterSubscriber":21,"../scheduler/async":322,"../util/isDate":348,"../util/subscribeToResult":357}],299:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../scheduler/async");o.timestamp=function(e){return void 0===e&&(e=i.async),this.lift(new s(e))};var n=function(){return function(e,t){this.value=e,this.timestamp=t}}();o.Timestamp=n;var s=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.scheduler))},e}(),l=function(e){function t(t,o){e.call(this,t),this.scheduler=o}return r(t,e),t.prototype._next=function(e){var t=this.scheduler.now();this.destination.next(new n(e,t))},t}(a.Subscriber)},{"../Subscriber":27,"../scheduler/async":322}],300:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber");o.toArray=function(){return this.lift(new i)};var i=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new n(e))},e}(),n=function(e){function t(t){e.call(this,t),this.array=[]}return r(t,e),t.prototype._next=function(e){this.array.push(e)},t.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},t}(a.Subscriber)},{"../Subscriber":27}],301:[function(e,t,o){"use strict";var r=e("../util/root");o.toPromise=function(e){var t=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,o){var r;t.subscribe(function(e){return r=e},function(e){return o(e)},function(){return e(r)})})}},{"../util/root":356}],302:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../OuterSubscriber"),n=e("../util/subscribeToResult");o.window=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var o=new l(e),r=t.subscribe(o);return r.closed||o.add(n.subscribeToResult(o,this.windowBoundaries)),r},e}(),l=function(e){function t(t){e.call(this,t),this.window=new a.Subject,t.next(this.window)}return r(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,o=this.window=new a.Subject;t.next(o)},t}(i.OuterSubscriber)},{"../OuterSubscriber":21,"../Subject":25,"../util/subscribeToResult":357}],303:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscriber"),i=e("../Subject");o.windowCount=function(e,t){return void 0===t&&(t=0),this.lift(new n(e,t))};var n=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.windowSize,this.startWindowEvery))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.destination=t,this.windowSize=o,this.startWindowEvery=r,this.windows=[new i.Subject],this.count=0,t.next(this.windows[0])}return r(t,e),t.prototype._next=function(e){for(var t=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,o=this.destination,r=this.windowSize,a=this.windows,n=a.length,s=0;s<n&&!this.closed;s++)a[s].next(e);var l=this.count-r+1;if(0<=l&&0==l%t&&!this.closed&&a.shift().complete(),0==++this.count%t&&!this.closed){var p=new i.Subject;a.push(p),o.next(p)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(a.Subscriber)},{"../Subject":25,"../Subscriber":27}],304:[function(e,t,o){"use strict";function r(e){var t=e.subscriber,o=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,o)}function a(e){var t=e.windowTimeSpan,o=e.subscriber,r=e.scheduler,a=e.windowCreationInterval,n=o.openWindow(),s=this,l={action:s,subscription:null};l.subscription=r.schedule(i,t,{subscriber:o,window:n,context:l}),s.add(l.subscription),s.schedule(e,a)}function i(e){var t=e.subscriber,o=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(o)}var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},s=e("../Subject"),l=e("../scheduler/async"),p=e("../Subscriber"),c=e("../util/isNumeric"),d=e("../util/isScheduler");o.windowTime=function(e){var t=l.async,o=null,r=Number.POSITIVE_INFINITY;return d.isScheduler(arguments[3])&&(t=arguments[3]),d.isScheduler(arguments[2])?t=arguments[2]:c.isNumeric(arguments[2])&&(r=arguments[2]),d.isScheduler(arguments[1])?t=arguments[1]:c.isNumeric(arguments[1])&&(o=arguments[1]),this.lift(new u(e,o,r,t))};var u=function(){function e(e,t,o,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=o,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new m(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),b=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return n(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(s.Subject),m=function(e){function t(t,o,n,s,l){e.call(this,t),this.destination=t,this.windowTimeSpan=o,this.windowCreationInterval=n,this.maxWindowSize=s,this.scheduler=l,this.windows=[];var p=this.openWindow();if(null!==n&&0<=n){var c={subscriber:this,window:p,context:null},d={windowTimeSpan:o,windowCreationInterval:n,subscriber:this,scheduler:l};this.add(l.schedule(i,o,c)),this.add(l.schedule(a,n,d))}else{var u={subscriber:this,window:p,windowTimeSpan:o};this.add(l.schedule(r,o,u))}}return n(t,e),t.prototype._next=function(e){for(var t=this.windows,o=t.length,r=0,a;r<o;r++)a=t[r],a.closed||(a.next(e),a.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(a))},t.prototype._error=function(e){for(var t=this.windows;0<t.length;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows,t;0<e.length;)t=e.shift(),t.closed||t.complete();this.destination.complete()},t.prototype.openWindow=function(){var e=new b;this.windows.push(e);var t=this.destination;return t.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(p.Subscriber)},{"../Subject":25,"../Subscriber":27,"../scheduler/async":322,"../util/isNumeric":350,"../util/isScheduler":353}],305:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../Subscription"),n=e("../util/tryCatch"),s=e("../util/errorObject"),l=e("../OuterSubscriber"),p=e("../util/subscribeToResult");o.windowToggle=function(e,t){return this.lift(new c(e,t))};var c=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.openings,this.closingSelector))},e}(),d=function(e){function t(t,o,r){e.call(this,t),this.openings=o,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=p.subscribeToResult(this,o,o))}return r(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var o=t.length,r=0;r<o;r++)t[r].window.next(e)},t.prototype._error=function(t){var o=this.contexts;if(this.contexts=null,o)for(var r=o.length,a=-1,i;++a<r;)i=o[a],i.window.error(t),i.subscription.unsubscribe();e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var o=t.length,r=-1,a;++r<o;)a=t[r],a.window.complete(),a.subscription.unsubscribe();e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,o=-1,r;++o<t;)r=e[o],r.window.unsubscribe(),r.subscription.unsubscribe()},t.prototype.notifyNext=function(e,t){if(e===this.openings){var o=this.closingSelector,r=n.tryCatch(o)(t);if(r===s.errorObject)return this.error(s.errorObject.e);var l=new a.Subject,c=new i.Subscription,d={window:l,subscription:c};this.contexts.push(d);var u=p.subscribeToResult(this,r,d);u.closed?this.closeWindow(this.contexts.length-1):(u.context=d,c.add(u)),this.destination.next(l)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,o=t[e],r=o.window,a=o.subscription;t.splice(e,1),r.complete(),a.unsubscribe()}},t}(l.OuterSubscriber)},{"../OuterSubscriber":21,"../Subject":25,"../Subscription":28,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],306:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../util/tryCatch"),n=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");o.windowWhen=function(e){return this.lift(new p(e))};var p=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(e){function t(t,o){e.call(this,t),this.destination=t,this.closingSelector=o,this.openWindow()}return r(t,e),t.prototype.notifyNext=function(e,t,o,r,a){this.openWindow(a)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var o=this.window=new a.Subject;this.destination.next(o);var r=i.tryCatch(this.closingSelector)();if(r===n.errorObject){var s=n.errorObject.e;this.destination.error(s),this.window.error(s)}else this.add(this.closingNotification=l.subscribeToResult(this,r))},t}(s.OuterSubscriber)},{"../OuterSubscriber":21,"../Subject":25,"../util/errorObject":345,"../util/subscribeToResult":357,"../util/tryCatch":359}],307:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../OuterSubscriber"),n=e("../util/subscribeToResult");o.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o;"function"==typeof e[e.length-1]&&(o=e.pop());return this.lift(new i(e,o))};var i=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observables,this.project))},e}(),s=function(e){function t(t,o,r){e.call(this,t),this.observables=o,this.project=r,this.toRespond=[];var a=o.length;this.values=Array(a);for(var s=0;s<a;s++)this.toRespond.push(s);for(var s=0,i;s<a;s++)i=o[s],this.add(n.subscribeToResult(this,i,i,s))}return r(t,e),t.prototype.notifyNext=function(e,t,o){this.values[o]=t;var r=this.toRespond;if(0<r.length){var a=r.indexOf(o);-1!==a&&r.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.OuterSubscriber)},{"../OuterSubscriber":21,"../util/subscribeToResult":357}],308:[function(e,t,o){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=e[e.length-1];return"function"==typeof o&&e.pop(),new i.ArrayObservable(e).lift(new d(o))}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../observable/ArrayObservable"),n=e("../util/isArray"),s=e("../Subscriber"),l=e("../OuterSubscriber"),p=e("../util/subscribeToResult"),c=e("../symbol/iterator");o.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))},o.zipStatic=r;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project))},e}();o.ZipOperator=d;var u=function(e){function t(t,o,r){void 0===r&&(r=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof o?o:null,this.values=r}return a(t,e),t.prototype._next=function(e){var t=this.iterators;n.isArray(e)?t.push(new m(e)):"function"==typeof e[c.iterator]?t.push(new b(e[c.iterator]())):t.push(new y(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0===t)return void this.destination.complete();this.active=t;for(var o=0,r;o<t;o++)r=e[o],r.stillUnsubscribed?this.add(r.subscribe(r,o)):this.active--},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,o=this.destination,r=0,a;r<t;r++)if(a=e[r],"function"==typeof a.hasValue&&!a.hasValue())return;for(var i=!1,n=[],r=0;r<t;r++){var a=e[r],s=a.next();if(a.hasCompleted()&&(i=!0),s.done)return void o.complete();n.push(s.value)}this.project?this._tryProject(n):o.next(n),i&&o.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.Subscriber);o.ZipSubscriber=u;var b=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),m=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){var e=this.index++,t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),y=function(e){function t(t,o,r){e.call(this,t),this.parent=o,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return a(t,e),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return p.subscribeToResult(this,this.observable,this,t)},t}(l.OuterSubscriber)},{"../OuterSubscriber":21,"../Subscriber":27,"../observable/ArrayObservable":159,"../symbol/iterator":324,"../util/isArray":346,"../util/subscribeToResult":357}],309:[function(e,t,o){"use strict";var r=e("./zip");o.zipAll=function(e){return this.lift(new r.ZipOperator(e))}},{"./zip":308}],310:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subscription"),i=function(e){function t(){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(a.Subscription);o.Action=i},{"../Subscription":28}],311:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./AsyncAction"),i=e("../util/AnimationFrame"),n=function(e){function t(t,o){e.call(this,t,o),this.scheduler=t,this.work=o}return r(t,e),t.prototype.requestAsyncId=function(t,o,r){return(void 0===r&&(r=0),null!==r&&0<r)?e.prototype.requestAsyncId.call(this,t,o,r):(t.actions.push(this),t.scheduled||(t.scheduled=i.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,o,r){return(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)?e.prototype.recycleAsyncId.call(this,t,o,r):void(0===t.actions.length&&(i.AnimationFrame.cancelAnimationFrame(o),t.scheduled=void 0))},t}(a.AsyncAction);o.AnimationFrameAction=n},{"../util/AnimationFrame":332,"./AsyncAction":315}],312:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./AsyncScheduler"),i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t=this.actions,o=-1,r=t.length,a;e=e||t.shift();do if(a=e.execute(e.state,e.delay))break;while(++o<r&&(e=t.shift()));if(this.active=!1,a){for(;++o<r&&(e=t.shift());)e.unsubscribe();throw a}},t}(a.AsyncScheduler);o.AnimationFrameScheduler=i},{"./AsyncScheduler":316}],313:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/Immediate"),i=e("./AsyncAction"),n=function(e){function t(t,o){e.call(this,t,o),this.scheduler=t,this.work=o}return r(t,e),t.prototype.requestAsyncId=function(t,o,r){return(void 0===r&&(r=0),null!==r&&0<r)?e.prototype.requestAsyncId.call(this,t,o,r):(t.actions.push(this),t.scheduled||(t.scheduled=a.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,o,r){return(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)?e.prototype.recycleAsyncId.call(this,t,o,r):void(0===t.actions.length&&(a.Immediate.clearImmediate(o),t.scheduled=void 0))},t}(i.AsyncAction);o.AsapAction=n},{"../util/Immediate":336,"./AsyncAction":315}],314:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./AsyncScheduler"),i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t=this.actions,o=-1,r=t.length,a;e=e||t.shift();do if(a=e.execute(e.state,e.delay))break;while(++o<r&&(e=t.shift()));if(this.active=!1,a){for(;++o<r&&(e=t.shift());)e.unsubscribe();throw a}},t}(a.AsyncScheduler);o.AsapScheduler=i},{"./AsyncScheduler":316}],315:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../util/root"),i=e("./Action"),n=function(e){function t(t,o){e.call(this,t,o),this.scheduler=t,this.work=o,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var o=this.id,r=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(r,o,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,o){return void 0===o&&(o=0),a.root.setInterval(e.flush.bind(e,this),o)},t.prototype.recycleAsyncId=function(e,t,o){return void 0===o&&(o=0),null!==o&&this.delay===o&&!1===this.pending?t:a.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(e,t);return o?o:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e){var t=!1,o;try{this.work(e)}catch(r){t=!0,o=!!r&&r||new Error(r)}if(t)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,o=t.actions,r=o.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&o.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i.Action);o.AsyncAction=n},{"../util/root":356,"./Action":310}],316:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Scheduler"),i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var o;this.active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}},t}(a.Scheduler);o.AsyncScheduler=i},{"../Scheduler":24}],317:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./AsyncAction"),i=function(e){function t(t,o){e.call(this,t,o),this.scheduler=t,this.work=o}return r(t,e),t.prototype.schedule=function(t,o){return(void 0===o&&(o=0),0<o)?e.prototype.schedule.call(this,t,o):(this.delay=o,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,o){return 0<o||this.closed?e.prototype.execute.call(this,t,o):this._execute(t,o)},t.prototype.requestAsyncId=function(t,o,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,o,r):t.flush(this)},t}(a.AsyncAction);o.QueueAction=i},{"./AsyncAction":315}],318:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./AsyncScheduler"),i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(a.AsyncScheduler);o.QueueScheduler=i},{"./AsyncScheduler":316}],319:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("./AsyncAction"),i=e("./AsyncScheduler"),n=function(e){function t(t,o){var r=this;void 0===t&&(t=s),void 0===o&&(o=Number.POSITIVE_INFINITY),e.call(this,t,function(){return r.frame}),this.maxFrames=o,this.frame=0,this.index=-1}return r(t,e),t.prototype.flush=function(){for(var e=this,t=e.actions,o=e.maxFrames,r,a;(a=t.shift())&&(this.frame=a.delay)<=o&&!(r=a.execute(a.state,a.delay)););if(r){for(;a=t.shift();)a.unsubscribe();throw r}},t.frameTimeFactor=10,t}(i.AsyncScheduler);o.VirtualTimeScheduler=n;var s=function(e){function t(t,o,r){void 0===r&&(r=t.index+=1),e.call(this,t,o),this.scheduler=t,this.work=o,this.index=r,this.active=!0,this.index=t.index=r}return r(t,e),t.prototype.schedule=function(o,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,o,r);this.active=!1;var a=new t(this.scheduler,this.work);return this.add(a),a.schedule(o,r)},t.prototype.requestAsyncId=function(e,o,r){void 0===r&&(r=0),this.delay=e.frame+r;var a=e.actions;return a.push(this),a.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,o){void 0===o&&(o=0)},t.prototype._execute=function(t,o){if(!0===this.active)return e.prototype._execute.call(this,t,o)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(a.AsyncAction);o.VirtualAction=s},{"./AsyncAction":315,"./AsyncScheduler":316}],320:[function(e,t,o){"use strict";var r=e("./AnimationFrameAction"),a=e("./AnimationFrameScheduler");o.animationFrame=new a.AnimationFrameScheduler(r.AnimationFrameAction)},{"./AnimationFrameAction":311,"./AnimationFrameScheduler":312}],321:[function(e,t,o){"use strict";var r=e("./AsapAction"),a=e("./AsapScheduler");o.asap=new a.AsapScheduler(r.AsapAction)},{"./AsapAction":313,"./AsapScheduler":314}],322:[function(e,t,o){"use strict";var r=e("./AsyncAction"),a=e("./AsyncScheduler");o.async=new a.AsyncScheduler(r.AsyncAction)},{"./AsyncAction":315,"./AsyncScheduler":316}],323:[function(e,t,o){"use strict";var r=e("./QueueAction"),a=e("./QueueScheduler");o.queue=new a.QueueScheduler(r.QueueAction)},{"./QueueAction":317,"./QueueScheduler":318}],324:[function(e,t,o){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var o=e.Set;if(o&&"function"==typeof new o()["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var a=Object.getOwnPropertyNames(r.prototype),n=0,i;n<a.length;++n)if(i=a[n],"entries"!==i&&"size"!==i&&r.prototype[i]===r.prototype.entries)return i;return"@@iterator"}var a=e("../util/root");o.symbolIteratorPonyfill=r,o.iterator=r(a.root),o.$$iterator=o.iterator},{"../util/root":356}],325:[function(e,t,o){"use strict";function r(e){var t=e.Symbol,o;return"function"==typeof t?t.observable?o=t.observable:(o=t("observable"),t.observable=o):o="@@observable",o}var a=e("../util/root");o.getSymbolObservable=r,o.observable=r(a.root),o.$$observable=o.observable},{"../util/root":356}],326:[function(e,t,o){"use strict";var r=e("../util/root"),a=r.root.Symbol;o.rxSubscriber="function"==typeof a&&"function"==typeof a.for?a.for("rxSubscriber"):"@@rxSubscriber",o.$$rxSubscriber=o.rxSubscriber},{"../util/root":356}],327:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Observable"),i=e("../Subscription"),n=e("./SubscriptionLoggable"),s=e("../util/applyMixins"),l=function(e){function t(t,o){e.call(this,function(e){var t=this,o=t.logSubscribedFrame();return e.add(new i.Subscription(function(){t.logUnsubscribedFrame(o)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=o}return r(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,o=0,r;o<t;o++)r=this.messages[o],e.add(this.scheduler.schedule(function(e){var t=e.message,o=e.subscriber;t.notification.observe(o)},r.frame,{message:r,subscriber:e}))},t}(a.Observable);o.ColdObservable=l,s.applyMixins(l,[n.SubscriptionLoggable])},{"../Observable":19,"../Subscription":28,"../util/applyMixins":343,"./SubscriptionLoggable":330}],328:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=e("../Subject"),i=e("../Subscription"),n=e("./SubscriptionLoggable"),s=e("../util/applyMixins"),l=function(e){function t(t,o){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=o}return r(t,e),t.prototype._subscribe=function(t){var o=this,r=o.logSubscribedFrame();return t.add(new i.Subscription(function(){o.logUnsubscribedFrame(r)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,o=0;o<t;o++)(function(){var t=e.messages[o];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)})()},t}(a.Subject);o.HotObservable=l,s.applyMixins(l,[n.SubscriptionLoggable])},{"../Subject":25,"../Subscription":28,"../util/applyMixins":343,"./SubscriptionLoggable":330}],329:[function(e,t,o){"use strict";var r=function(){return function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t}}();o.SubscriptionLog=r},{}],330:[function(e,t,o){"use strict";var r=e("./SubscriptionLog"),a=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new r.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,o=t[e];t[e]=new r.SubscriptionLog(o.subscribedFrame,this.scheduler.now())},e}();o.SubscriptionLoggable=a},{"./SubscriptionLog":329}],331:[function(e,t,o){"use strict";var r=Number.POSITIVE_INFINITY,a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=e("../Observable"),n=e("../Notification"),s=e("./ColdObservable"),l=e("./HotObservable"),p=e("./SubscriptionLog"),c=e("../scheduler/VirtualTimeScheduler"),d=function(e){function t(t){e.call(this,c.VirtualAction,750),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return a(t,e),t.prototype.createTime=function(e){var o=e.indexOf("|");if(-1===o)throw new Error("marble diagram for time should have a completion marker \"|\"");return o*t.frameTimeFactor},t.prototype.createColdObservable=function(e,o,r){if(-1!==e.indexOf("^"))throw new Error("cold observable cannot have subscription offset \"^\"");if(-1!==e.indexOf("!"))throw new Error("cold observable cannot have unsubscription marker \"!\"");var a=t.parseMarbles(e,o,r),i=new s.ColdObservable(a,this);return this.coldObservables.push(i),i},t.prototype.createHotObservable=function(e,o,r){if(-1!==e.indexOf("!"))throw new Error("hot observable cannot have unsubscription marker \"!\"");var a=t.parseMarbles(e,o,r),i=new l.HotObservable(a,this);return this.hotObservables.push(i),i},t.prototype.materializeInnerObservable=function(e,t){var o=this,r=[];return e.subscribe(function(e){r.push({frame:o.frame-t,notification:n.Notification.createNext(e)})},function(e){r.push({frame:o.frame-t,notification:n.Notification.createError(e)})},function(){r.push({frame:o.frame-t,notification:n.Notification.createComplete()})}),r},t.prototype.expectObservable=function(e,o){var a=this;void 0===o&&(o=null);var s=[],l={actual:s,ready:!1},p=t.parseMarblesAsSubscriptions(o).unsubscribedFrame,c;return this.schedule(function(){c=e.subscribe(function(e){var t=e;e instanceof i.Observable&&(t=a.materializeInnerObservable(t,a.frame)),s.push({frame:a.frame,notification:n.Notification.createNext(t)})},function(e){s.push({frame:a.frame,notification:n.Notification.createError(e)})},function(){s.push({frame:a.frame,notification:n.Notification.createComplete()})})},0),p!==r&&this.schedule(function(){return c.unsubscribe()},p),this.flushTests.push(l),{toBe:function(e,o,r){l.ready=!0,l.expected=t.parseMarbles(e,o,r,!0)}}},t.prototype.expectSubscriptions=function(e){var o={actual:e,ready:!1};return this.flushTests.push(o),{toBe:function(e){var r="string"==typeof e?[e]:e;o.ready=!0,o.expected=r.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;0<t.length;)t.shift().setup();e.prototype.flush.call(this);for(var o=this.flushTests.filter(function(e){return e.ready}),r;0<o.length;)r=o.shift(),this.assertDeepEqual(r.actual,r.expected)},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new p.SubscriptionLog(r);for(var t=e.length,o=-1,a=r,n=r,s=0;s<t;s++){var i=s*this.frameTimeFactor,l=e[s];switch(l){case"-":case" ":break;case"(":o=i;break;case")":o=-1;break;case"^":if(a!==r)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");a=-1<o?o:i;break;case"!":if(n!==r)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=-1<o?o:i;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+l+"'.");}}return 0>n?new p.SubscriptionLog(a):new p.SubscriptionLog(a,n)},t.parseMarbles=function(e,t,o,r){if(void 0===r&&(r=!1),-1!==e.indexOf("!"))throw new Error("conventional marble diagrams cannot have the unsubscription marker \"!\"");for(var a=e.length,l=[],p=e.indexOf("^"),d=-1===p?0:p*-this.frameTimeFactor,u="object"==typeof t?function(e){return r&&t[e]instanceof s.ColdObservable?t[e].messages:t[e]}:function(e){return e},b=-1,m=0;m<a;m++){var i=m*this.frameTimeFactor+d,y=void 0,_=e[m];switch(_){case"-":case" ":break;case"(":b=i;break;case")":b=-1;break;case"|":y=n.Notification.createComplete();break;case"^":break;case"#":y=n.Notification.createError(o||"error");break;default:y=n.Notification.createNext(u(_));}y&&l.push({frame:-1<b?b:i,notification:y})}return l},t}(c.VirtualTimeScheduler);o.TestScheduler=d},{"../Notification":18,"../Observable":19,"../scheduler/VirtualTimeScheduler":319,"./ColdObservable":327,"./HotObservable":328,"./SubscriptionLog":329}],332:[function(e,t,o){"use strict";var r=e("./root"),a=function(){return function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})}}();o.RequestAnimationFrameDefinition=a,o.AnimationFrame=new a(r.root)},{"./root":356}],333:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);o.ArgumentOutOfRangeError=a},{}],334:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);o.EmptyError=a},{}],335:[function(e,t,o){"use strict";var r=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var o=this.values;for(var r in o)o.hasOwnProperty(r)&&null!==o[r]&&e.call(t,o[r],r)},e.prototype.clear=function(){this.values={}},e}();o.FastMap=r},{}],336:[function(e,t,o){"use strict";var r=e("./root"),a=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.setImmediate=this.canUseProcessNextTick()?this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.createReadyStateChangeSetImmediate():this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return!!this.root.MessageChannel},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return!!(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,o=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=o,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var r=function e(){var t=e,o=t.handler,r=t.args;"function"==typeof o?o.apply(void 0,r):new Function(""+o)()};return r.handler=e,r.args=t,r},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,o=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,o)),o};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",o=function o(r){var a=o.instance;r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a.runIfPresent(+r.data.slice(t.length))};o.instance=this,e.addEventListener("message",o,!1);var r=function e(){var t=e,o=t.messagePrefix,r=t.instance,a=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(o+a,"*"),a};return r.instance=this,r.messagePrefix=t,r},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var o=t.data;e.runIfPresent(o)};var o=function e(){var t=e,o=t.channel,r=t.instance,a=r.addFromSetImmediateArguments(arguments);return o.port2.postMessage(a),a};return o.channel=t,o.instance=this,o},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,o=t.root,r=o.document,a=r.documentElement,i=t.addFromSetImmediateArguments(arguments),n=r.createElement("script");return n.onreadystatechange=function(){t.runIfPresent(i),n.onreadystatechange=null,a.removeChild(n),n=null},a.appendChild(n),i};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,o=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,o),0),o};return e.instance=this,e},e}();o.ImmediateDefinition=a,o.Immediate=new a(r.root)},{"./root":356}],337:[function(e,t,o){"use strict";var r=e("./root"),a=e("./MapPolyfill");o.Map=r.root.Map||function(){return a.MapPolyfill}()},{"./MapPolyfill":338,"./root":356}],338:[function(e,t,o){"use strict";var r=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var o=this._keys.indexOf(e);return-1===o?(this._keys.push(e),this._values.push(t),this.size++):this._values[o]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var o=0;o<this.size;o++)e.call(t,this._values[o],this._keys[o])},e}();o.MapPolyfill=r},{}],339:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);o.ObjectUnsubscribedError=a},{}],340:[function(e,t,o){"use strict";function r(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}var a=e("./root");o.minimalSetImpl=r,o.Set=a.root.Set||r()},{"./root":356}],341:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);o.TimeoutError=a},{}],342:[function(e,t,o){"use strict";var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=function(e){function t(t){e.call(this),this.errors=t;var o=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=o.name="UnsubscriptionError",this.stack=o.stack,this.message=o.message}return r(t,e),t}(Error);o.UnsubscriptionError=a},{}],343:[function(e,t,o){"use strict";o.applyMixins=function(e,t){for(var o=0,r=t.length;o<r;o++)for(var a=t[o],i=Object.getOwnPropertyNames(a.prototype),n=0,s=i.length,l;n<s;n++)l=i[n],e.prototype[l]=a.prototype[l]}},{}],344:[function(e,t,o){"use strict";function r(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var r=t.length,a=0,i;a<r;a++)for(var n in i=t[a],i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e}function a(e){return e.Object.assign||r}var i=e("./root");o.assignImpl=r;o.getAssign=a,o.assign=a(i.root)},{"./root":356}],345:[function(e,t,o){"use strict";o.errorObject={e:{}}},{}],346:[function(e,t,o){"use strict";o.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],347:[function(e,t,o){"use strict";o.isArrayLike=function(e){return e&&"number"==typeof e.length}},{}],348:[function(e,t,o){"use strict";o.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},{}],349:[function(e,t,o){"use strict";o.isFunction=function(e){return"function"==typeof e}},{}],350:[function(e,t,o){"use strict";var r=e("../util/isArray");o.isNumeric=function(e){return!r.isArray(e)&&0<=e-parseFloat(e)+1}},{"../util/isArray":346}],351:[function(e,t,o){"use strict";o.isObject=function(e){return null!=e&&"object"==typeof e}},{}],352:[function(e,t,o){"use strict";o.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},{}],353:[function(e,t,o){"use strict";o.isScheduler=function(e){return e&&"function"==typeof e.schedule}},{}],354:[function(e,t,o){"use strict";o.noop=function(){}},{}],355:[function(e,t,o){"use strict";o.not=function(e,t){function o(){return!o.pred.apply(o.thisArg,arguments)}return o.pred=e,o.thisArg=t,o}},{}],356:[function(e,t,o){(function(e){"use strict";var t="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,a=t||"undefined"!=typeof e&&e||r;o.root=a,function(){if(!a)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],357:[function(e,t,o){"use strict";var r=e("./root"),a=e("./isArrayLike"),i=e("./isPromise"),n=e("./isObject"),s=e("../Observable"),l=e("../symbol/iterator"),p=e("../InnerSubscriber"),c=e("../symbol/observable");o.subscribeToResult=function(e,t,o,d){var u=new p.InnerSubscriber(e,o,d);if(u.closed)return null;if(t instanceof s.Observable)return t._isScalar?(u.next(t.value),u.complete(),null):t.subscribe(u);if(a.isArrayLike(t)){for(var b=0,m=t.length;b<m&&!u.closed;b++)u.next(t[b]);u.closed||u.complete()}else{if(i.isPromise(t))return t.then(function(e){u.closed||(u.next(e),u.complete())},function(e){return u.error(e)}).then(null,function(e){r.root.setTimeout(function(){throw e})}),u;if(t&&"function"==typeof t[l.iterator]){var y=t[l.iterator]();do{var _=y.next();if(_.done){u.complete();break}if(u.next(_.value),u.closed)break}while(!0)}else if(t&&"function"==typeof t[c.observable]){var f=t[c.observable]();if("function"!=typeof f.subscribe)u.error(new TypeError("Provided object does not correctly implement Symbol.observable"));else return f.subscribe(new p.InnerSubscriber(e,o,d))}else{var g=n.isObject(t)?"an invalid object":"'"+t+"'";u.error(new TypeError("You provided "+g+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},{"../InnerSubscriber":17,"../Observable":19,"../symbol/iterator":324,"../symbol/observable":325,"./isArrayLike":347,"./isObject":351,"./isPromise":352,"./root":356}],358:[function(e,t,o){"use strict";var r=e("../Subscriber"),a=e("../symbol/rxSubscriber"),i=e("../Observer");o.toSubscriber=function(e,t,o){if(e){if(e instanceof r.Subscriber)return e;if(e[a.rxSubscriber])return e[a.rxSubscriber]()}return e||t||o?new r.Subscriber(e,t,o):new r.Subscriber(i.empty)}},{"../Observer":20,"../Subscriber":27,"../symbol/rxSubscriber":326}],359:[function(e,t,o){"use strict";function r(){try{return i.apply(this,arguments)}catch(t){return a.errorObject.e=t,a.errorObject}}var a=e("./errorObject"),i;o.tryCatch=function(e){return i=e,r}},{"./errorObject":345}]},{},[3]);